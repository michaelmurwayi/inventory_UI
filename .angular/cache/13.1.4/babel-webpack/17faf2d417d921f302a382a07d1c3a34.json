{"ast":null,"code":"(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, require('@angular/core'), require('@ngxs/store/internals'), require('@angular/common'), require('rxjs'), require('rxjs/operators')) : typeof define === 'function' && define.amd ? define('@ngxs/store', ['exports', '@angular/core', '@ngxs/store/internals', '@angular/common', 'rxjs', 'rxjs/operators'], factory) : (global = global || self, factory((global.ngxs = global.ngxs || {}, global.ngxs.store = {}), global.ng.core, global.ngxs.store.internals, global.ng.common, global.rxjs, global.rxjs.operators));\n})(this, function (exports, core, internals, common, rxjs, operators) {\n  'use strict';\n  /*! *****************************************************************************\r\n  Copyright (c) Microsoft Corporation.\r\n    Permission to use, copy, modify, and/or distribute this software for any\r\n  purpose with or without fee is hereby granted.\r\n    THE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\n  REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\n  AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\n  INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\n  LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\n  OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\n  PERFORMANCE OF THIS SOFTWARE.\r\n  ***************************************************************************** */\n\n  /* global Reflect, Promise */\n\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  function __extends(d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  }\n\n  var __assign = function () {\n    __assign = Object.assign || function __assign(t) {\n      for (var s, i = 1, n = arguments.length; i < n; i++) {\n        s = arguments[i];\n\n        for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n      }\n\n      return t;\n    };\n\n    return __assign.apply(this, arguments);\n  };\n\n  function __rest(s, e) {\n    var t = {};\n\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n      if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n    }\n    return t;\n  }\n\n  function __decorate(decorators, target, key, desc) {\n    var c = arguments.length,\n        r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n        d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n  }\n\n  function __param(paramIndex, decorator) {\n    return function (target, key) {\n      decorator(target, key, paramIndex);\n    };\n  }\n\n  function __metadata(metadataKey, metadataValue) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\n  }\n\n  function __awaiter(thisArg, _arguments, P, generator) {\n    function adopt(value) {\n      return value instanceof P ? value : new P(function (resolve) {\n        resolve(value);\n      });\n    }\n\n    return new (P || (P = Promise))(function (resolve, reject) {\n      function fulfilled(value) {\n        try {\n          step(generator.next(value));\n        } catch (e) {\n          reject(e);\n        }\n      }\n\n      function rejected(value) {\n        try {\n          step(generator[\"throw\"](value));\n        } catch (e) {\n          reject(e);\n        }\n      }\n\n      function step(result) {\n        result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n      }\n\n      step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n  }\n\n  function __generator(thisArg, body) {\n    var _ = {\n      label: 0,\n      sent: function () {\n        if (t[0] & 1) throw t[1];\n        return t[1];\n      },\n      trys: [],\n      ops: []\n    },\n        f,\n        y,\n        t,\n        g;\n    return g = {\n      next: verb(0),\n      \"throw\": verb(1),\n      \"return\": verb(2)\n    }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function () {\n      return this;\n    }), g;\n\n    function verb(n) {\n      return function (v) {\n        return step([n, v]);\n      };\n    }\n\n    function step(op) {\n      if (f) throw new TypeError(\"Generator is already executing.\");\n\n      while (_) try {\n        if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n        if (y = 0, t) op = [op[0] & 2, t.value];\n\n        switch (op[0]) {\n          case 0:\n          case 1:\n            t = op;\n            break;\n\n          case 4:\n            _.label++;\n            return {\n              value: op[1],\n              done: false\n            };\n\n          case 5:\n            _.label++;\n            y = op[1];\n            op = [0];\n            continue;\n\n          case 7:\n            op = _.ops.pop();\n\n            _.trys.pop();\n\n            continue;\n\n          default:\n            if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {\n              _ = 0;\n              continue;\n            }\n\n            if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {\n              _.label = op[1];\n              break;\n            }\n\n            if (op[0] === 6 && _.label < t[1]) {\n              _.label = t[1];\n              t = op;\n              break;\n            }\n\n            if (t && _.label < t[2]) {\n              _.label = t[2];\n\n              _.ops.push(op);\n\n              break;\n            }\n\n            if (t[2]) _.ops.pop();\n\n            _.trys.pop();\n\n            continue;\n        }\n\n        op = body.call(thisArg, _);\n      } catch (e) {\n        op = [6, e];\n        y = 0;\n      } finally {\n        f = t = 0;\n      }\n\n      if (op[0] & 5) throw op[1];\n      return {\n        value: op[0] ? op[1] : void 0,\n        done: true\n      };\n    }\n  }\n\n  function __createBinding(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n  }\n\n  function __exportStar(m, exports) {\n    for (var p in m) if (p !== \"default\" && !exports.hasOwnProperty(p)) exports[p] = m[p];\n  }\n\n  function __values(o) {\n    var s = typeof Symbol === \"function\" && Symbol.iterator,\n        m = s && o[s],\n        i = 0;\n    if (m) return m.call(o);\n    if (o && typeof o.length === \"number\") return {\n      next: function () {\n        if (o && i >= o.length) o = void 0;\n        return {\n          value: o && o[i++],\n          done: !o\n        };\n      }\n    };\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n  }\n\n  function __read(o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o),\n        r,\n        ar = [],\n        e;\n\n    try {\n      while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    } catch (error) {\n      e = {\n        error: error\n      };\n    } finally {\n      try {\n        if (r && !r.done && (m = i[\"return\"])) m.call(i);\n      } finally {\n        if (e) throw e.error;\n      }\n    }\n\n    return ar;\n  }\n\n  function __spread() {\n    for (var ar = [], i = 0; i < arguments.length; i++) ar = ar.concat(__read(arguments[i]));\n\n    return ar;\n  }\n\n  function __spreadArrays() {\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\n\n    for (var r = Array(s), k = 0, i = 0; i < il; i++) for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++) r[k] = a[j];\n\n    return r;\n  }\n\n  ;\n\n  function __await(v) {\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\n  }\n\n  function __asyncGenerator(thisArg, _arguments, generator) {\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\n    var g = generator.apply(thisArg, _arguments || []),\n        i,\n        q = [];\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () {\n      return this;\n    }, i;\n\n    function verb(n) {\n      if (g[n]) i[n] = function (v) {\n        return new Promise(function (a, b) {\n          q.push([n, v, a, b]) > 1 || resume(n, v);\n        });\n      };\n    }\n\n    function resume(n, v) {\n      try {\n        step(g[n](v));\n      } catch (e) {\n        settle(q[0][3], e);\n      }\n    }\n\n    function step(r) {\n      r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r);\n    }\n\n    function fulfill(value) {\n      resume(\"next\", value);\n    }\n\n    function reject(value) {\n      resume(\"throw\", value);\n    }\n\n    function settle(f, v) {\n      if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]);\n    }\n  }\n\n  function __asyncDelegator(o) {\n    var i, p;\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) {\n      throw e;\n    }), verb(\"return\"), i[Symbol.iterator] = function () {\n      return this;\n    }, i;\n\n    function verb(n, f) {\n      i[n] = o[n] ? function (v) {\n        return (p = !p) ? {\n          value: __await(o[n](v)),\n          done: n === \"return\"\n        } : f ? f(v) : v;\n      } : f;\n    }\n  }\n\n  function __asyncValues(o) {\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\n    var m = o[Symbol.asyncIterator],\n        i;\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () {\n      return this;\n    }, i);\n\n    function verb(n) {\n      i[n] = o[n] && function (v) {\n        return new Promise(function (resolve, reject) {\n          v = o[n](v), settle(resolve, reject, v.done, v.value);\n        });\n      };\n    }\n\n    function settle(resolve, reject, d, v) {\n      Promise.resolve(v).then(function (v) {\n        resolve({\n          value: v,\n          done: d\n        });\n      }, reject);\n    }\n  }\n\n  function __makeTemplateObject(cooked, raw) {\n    if (Object.defineProperty) {\n      Object.defineProperty(cooked, \"raw\", {\n        value: raw\n      });\n    } else {\n      cooked.raw = raw;\n    }\n\n    return cooked;\n  }\n\n  ;\n\n  function __importStar(mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\n    result.default = mod;\n    return result;\n  }\n\n  function __importDefault(mod) {\n    return mod && mod.__esModule ? mod : {\n      default: mod\n    };\n  }\n\n  function __classPrivateFieldGet(receiver, privateMap) {\n    if (!privateMap.has(receiver)) {\n      throw new TypeError(\"attempted to get private field on non-instance\");\n    }\n\n    return privateMap.get(receiver);\n  }\n\n  function __classPrivateFieldSet(receiver, privateMap, value) {\n    if (!privateMap.has(receiver)) {\n      throw new TypeError(\"attempted to set private field on non-instance\");\n    }\n\n    privateMap.set(receiver, value);\n    return value;\n  }\n  /**\n   * @fileoverview added by tsickle\n   * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n   */\n\n  /**\n   * @param {?} name\n   * @return {?}\n   */\n\n\n  function throwStateNameError(name) {\n    throw new Error(name + \" is not a valid state name. It needs to be a valid object property name.\");\n  }\n  /**\n   * @return {?}\n   */\n\n\n  function throwStateNamePropertyError() {\n    throw new Error(\"States must register a 'name' property.\");\n  }\n  /**\n   * @param {?} current\n   * @param {?} newName\n   * @param {?} oldName\n   * @return {?}\n   */\n\n\n  function throwStateUniqueError(current, newName, oldName) {\n    throw new Error(\"State name '\" + current + \"' from \" + newName + \" already exists in \" + oldName + \".\");\n  }\n  /**\n   * @param {?} name\n   * @return {?}\n   */\n\n\n  function throwStateDecoratorError(name) {\n    throw new Error(\"States must be decorated with @State() decorator, but \\\"\" + name + \"\\\" isn't.\");\n  }\n  /**\n   * @return {?}\n   */\n\n\n  function throwActionDecoratorError() {\n    throw new Error('@Action() decorator cannot be used with static methods.');\n  }\n  /**\n   * @return {?}\n   */\n\n\n  function throwSelectorDecoratorError() {\n    throw new Error('Selectors only work on methods.');\n  }\n  /**\n   * @return {?}\n   */\n\n\n  function getZoneWarningMessage() {\n    return 'Your application was bootstrapped with nooped zone and your execution strategy requires an actual NgZone!\\n' + 'Please set the value of the executionStrategy property to NoopNgxsExecutionStrategy.\\n' + 'NgxsModule.forRoot(states, { executionStrategy: NoopNgxsExecutionStrategy })';\n  }\n  /**\n   * @param {?} name\n   * @return {?}\n   */\n\n\n  function getUndecoratedStateInIvyWarningMessage(name) {\n    return \"'\" + name + \"' class should be decorated with @Injectable() right after the @State() decorator\";\n  }\n  /**\n   * @return {?}\n   */\n\n\n  function throwSelectFactoryNotConnectedError() {\n    throw new Error('You have forgotten to import the NGXS module!');\n  }\n  /**\n   * @return {?}\n   */\n\n\n  function throwPatchingArrayError() {\n    throw new Error('Patching arrays is not supported.');\n  }\n  /**\n   * @return {?}\n   */\n\n\n  function throwPatchingPrimitiveError() {\n    throw new Error('Patching primitives is not supported.');\n  }\n  /**\n   * @fileoverview added by tsickle\n   * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n   */\n\n\n  var DispatchOutsideZoneNgxsExecutionStrategy =\n  /** @class */\n  function () {\n    function DispatchOutsideZoneNgxsExecutionStrategy(_ngZone, _platformId) {\n      this._ngZone = _ngZone;\n      this._platformId = _platformId; // Caretaker note: we have still left the `typeof` condition in order to avoid\n      // creating a breaking change for projects that still use the View Engine.\n\n      if (typeof ngDevMode === 'undefined' || ngDevMode) {\n        verifyZoneIsNotNooped(_ngZone);\n      }\n    }\n    /**\n     * @template T\n     * @param {?} func\n     * @return {?}\n     */\n\n\n    DispatchOutsideZoneNgxsExecutionStrategy.prototype.enter =\n    /**\n    * @template T\n    * @param {?} func\n    * @return {?}\n    */\n    function (func) {\n      if (common.isPlatformServer(this._platformId)) {\n        return this.runInsideAngular(func);\n      }\n\n      return this.runOutsideAngular(func);\n    };\n    /**\n     * @template T\n     * @param {?} func\n     * @return {?}\n     */\n\n\n    DispatchOutsideZoneNgxsExecutionStrategy.prototype.leave =\n    /**\n    * @template T\n    * @param {?} func\n    * @return {?}\n    */\n    function (func) {\n      return this.runInsideAngular(func);\n    };\n    /**\n     * @private\n     * @template T\n     * @param {?} func\n     * @return {?}\n     */\n\n\n    DispatchOutsideZoneNgxsExecutionStrategy.prototype.runInsideAngular =\n    /**\n    * @private\n    * @template T\n    * @param {?} func\n    * @return {?}\n    */\n    function (func) {\n      if (core.NgZone.isInAngularZone()) {\n        return func();\n      }\n\n      return this._ngZone.run(func);\n    };\n    /**\n     * @private\n     * @template T\n     * @param {?} func\n     * @return {?}\n     */\n\n\n    DispatchOutsideZoneNgxsExecutionStrategy.prototype.runOutsideAngular =\n    /**\n    * @private\n    * @template T\n    * @param {?} func\n    * @return {?}\n    */\n    function (func) {\n      if (core.NgZone.isInAngularZone()) {\n        return this._ngZone.runOutsideAngular(func);\n      }\n\n      return func();\n    };\n\n    DispatchOutsideZoneNgxsExecutionStrategy.decorators = [{\n      type: core.Injectable,\n      args: [{\n        providedIn: 'root'\n      }]\n    }];\n    /** @nocollapse */\n\n    DispatchOutsideZoneNgxsExecutionStrategy.ctorParameters = function () {\n      return [{\n        type: core.NgZone\n      }, {\n        type: String,\n        decorators: [{\n          type: core.Inject,\n          args: [core.PLATFORM_ID]\n        }]\n      }];\n    };\n    /** @nocollapse */\n\n\n    DispatchOutsideZoneNgxsExecutionStrategy.ngInjectableDef = core.defineInjectable({\n      factory: function DispatchOutsideZoneNgxsExecutionStrategy_Factory() {\n        return new DispatchOutsideZoneNgxsExecutionStrategy(core.inject(core.NgZone), core.inject(core.PLATFORM_ID));\n      },\n      token: DispatchOutsideZoneNgxsExecutionStrategy,\n      providedIn: \"root\"\n    });\n    return DispatchOutsideZoneNgxsExecutionStrategy;\n  }();\n\n  if (false) {\n    /**\n     * @type {?}\n     * @private\n     */\n    DispatchOutsideZoneNgxsExecutionStrategy.prototype._ngZone;\n    /**\n     * @type {?}\n     * @private\n     */\n\n    DispatchOutsideZoneNgxsExecutionStrategy.prototype._platformId;\n  } // Caretaker note: this should exist as a separate function and not a class method,\n  // since class methods are not tree-shakable.\n\n  /**\n   * @param {?} ngZone\n   * @return {?}\n   */\n\n\n  function verifyZoneIsNotNooped(ngZone) {\n    // `NoopNgZone` is not exposed publicly as it doesn't expect\n    // to be used outside of the core Angular code, thus we just have\n    // to check if the zone doesn't extend or instanceof `NgZone`.\n    if (ngZone instanceof core.NgZone) {\n      return;\n    }\n\n    console.warn(getZoneWarningMessage());\n  }\n  /**\n   * @fileoverview added by tsickle\n   * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n   */\n\n  /** @type {?} */\n\n\n  var ROOT_STATE_TOKEN = new core.InjectionToken('ROOT_STATE_TOKEN');\n  /** @type {?} */\n\n  var FEATURE_STATE_TOKEN = new core.InjectionToken('FEATURE_STATE_TOKEN');\n  /** @type {?} */\n\n  var NGXS_PLUGINS = new core.InjectionToken('NGXS_PLUGINS');\n  /** @type {?} */\n\n  var META_KEY = 'NGXS_META';\n  /** @type {?} */\n\n  var META_OPTIONS_KEY = 'NGXS_OPTIONS_META';\n  /** @type {?} */\n\n  var SELECTOR_META_KEY = 'NGXS_SELECTOR_META';\n  /**\n   * The NGXS config settings.\n   */\n\n  var NgxsConfig =\n  /** @class */\n  function () {\n    function NgxsConfig() {\n      /**\n       * Defining the default state before module initialization\n       * This is convenient if we need to create a define our own set of states.\n       * @deprecated will be removed after v4\n       * (default: {})\n       */\n      this.defaultsState = {};\n      /**\n       * Defining shared selector options\n       */\n\n      this.selectorOptions = {\n        injectContainerState: true,\n        // TODO: default is true in v3, will change in v4\n        suppressErrors: true // TODO: default is true in v3, will change in v4\n\n      };\n      this.compatibility = {\n        strictContentSecurityPolicy: false\n      };\n      this.executionStrategy = DispatchOutsideZoneNgxsExecutionStrategy;\n    }\n\n    NgxsConfig.decorators = [{\n      type: core.Injectable\n    }];\n    /** @nocollapse */\n\n    NgxsConfig.ctorParameters = function () {\n      return [];\n    };\n\n    return NgxsConfig;\n  }();\n\n  if (false) {\n    /**\n     * Run in development mode. This will add additional debugging features:\n     * - Object.freeze on the state and actions to guarantee immutability\n     * (default: false)\n     *\n     * @deprecated This property is no longer necessary when the Ivy compiler is used.\n     * We'll determine the development mode through the `ngDevMode`. It's still essential with View Engine.\n     * @type {?}\n     */\n    NgxsConfig.prototype.developmentMode;\n    /** @type {?} */\n\n    NgxsConfig.prototype.compatibility;\n    /**\n     * Determines the execution context to perform async operations inside. An implementation can be\n     * provided to override the default behaviour where the async operations are run\n     * outside Angular's zone but all observable behaviours of NGXS are run back inside Angular's zone.\n     * These observable behaviours are from:\n     *   `\\@Select(...)`, `store.select(...)`, `actions.subscribe(...)` or `store.dispatch(...).subscribe(...)`\n     * Every `zone.run` causes Angular to run change detection on the whole tree (`app.tick()`) so of your\n     * application doesn't rely on zone.js running change detection then you can switch to the\n     * `NoopNgxsExecutionStrategy` that doesn't interact with zones.\n     * (default: null)\n     * @type {?}\n     */\n\n    NgxsConfig.prototype.executionStrategy;\n    /**\n     * Defining the default state before module initialization\n     * This is convenient if we need to create a define our own set of states.\n     * @deprecated will be removed after v4\n     * (default: {})\n     * @type {?}\n     */\n\n    NgxsConfig.prototype.defaultsState;\n    /**\n     * Defining shared selector options\n     * @type {?}\n     */\n\n    NgxsConfig.prototype.selectorOptions;\n  }\n  /**\n   * State context provided to the actions in the state.\n   * @record\n   * @template T\n   */\n\n\n  function StateContext() {}\n\n  if (false) {\n    /**\n     * Get the current state.\n     * @return {?}\n     */\n    StateContext.prototype.getState = function () {};\n    /**\n     * Reset the state to a new value.\n     * @param {?} val\n     * @return {?}\n     */\n\n\n    StateContext.prototype.setState = function (val) {};\n    /**\n     * Patch the existing state with the provided value.\n     * @param {?} val\n     * @return {?}\n     */\n\n\n    StateContext.prototype.patchState = function (val) {};\n    /**\n     * Dispatch a new action and return the dispatched observable.\n     * @param {?} actions\n     * @return {?}\n     */\n\n\n    StateContext.prototype.dispatch = function (actions) {};\n  }\n  /**\n   * Plugin interface\n   * @record\n   */\n\n\n  function NgxsPlugin() {}\n\n  if (false) {\n    /**\n     * Handle the state/action before its submitted to the state handlers.\n     * @param {?} state\n     * @param {?} action\n     * @param {?} next\n     * @return {?}\n     */\n    NgxsPlugin.prototype.handle = function (state, action, next) {};\n  }\n  /**\n   * Options that can be provided to the store.\n   * @record\n   * @template T\n   */\n\n\n  function StoreOptions() {}\n\n  if (false) {\n    /**\n     * Name of the state. Required.\n     * @type {?}\n     */\n    StoreOptions.prototype.name;\n    /**\n     * Default values for the state. If not provided, uses empty object.\n     * @type {?|undefined}\n     */\n\n    StoreOptions.prototype.defaults;\n    /**\n     * Sub states for the given state.\n     * @type {?|undefined}\n     */\n\n    StoreOptions.prototype.children;\n  }\n  /**\n   * Represents a basic change from a previous to a new value for a single state instance.\n   * Passed as a value in a NgxsSimpleChanges object to the ngxsOnChanges hook.\n   * @template T\n   */\n\n\n  var\n  /**\n  * Represents a basic change from a previous to a new value for a single state instance.\n  * Passed as a value in a NgxsSimpleChanges object to the ngxsOnChanges hook.\n  * @template T\n  */\n  NgxsSimpleChange =\n  /** @class */\n  function () {\n    function NgxsSimpleChange(previousValue, currentValue, firstChange) {\n      this.previousValue = previousValue;\n      this.currentValue = currentValue;\n      this.firstChange = firstChange;\n    }\n\n    return NgxsSimpleChange;\n  }();\n\n  if (false) {\n    /** @type {?} */\n    NgxsSimpleChange.prototype.previousValue;\n    /** @type {?} */\n\n    NgxsSimpleChange.prototype.currentValue;\n    /** @type {?} */\n\n    NgxsSimpleChange.prototype.firstChange;\n  }\n  /**\n   * On init interface\n   * @record\n   */\n\n\n  function NgxsOnInit() {}\n\n  if (false) {\n    /**\n     * @param {?=} ctx\n     * @return {?}\n     */\n    NgxsOnInit.prototype.ngxsOnInit = function (ctx) {};\n  }\n  /**\n   * On change interface\n   * @record\n   */\n\n\n  function NgxsOnChanges() {}\n\n  if (false) {\n    /**\n     * @param {?} change\n     * @return {?}\n     */\n    NgxsOnChanges.prototype.ngxsOnChanges = function (change) {};\n  }\n  /**\n   * After bootstrap interface\n   * @record\n   */\n\n\n  function NgxsAfterBootstrap() {}\n\n  if (false) {\n    /**\n     * @param {?=} ctx\n     * @return {?}\n     */\n    NgxsAfterBootstrap.prototype.ngxsAfterBootstrap = function (ctx) {};\n  }\n  /**\n   * @fileoverview added by tsickle\n   * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n   */\n\n\n  var NoopNgxsExecutionStrategy =\n  /** @class */\n  function () {\n    function NoopNgxsExecutionStrategy() {}\n    /**\n     * @template T\n     * @param {?} func\n     * @return {?}\n     */\n\n\n    NoopNgxsExecutionStrategy.prototype.enter =\n    /**\n    * @template T\n    * @param {?} func\n    * @return {?}\n    */\n    function (func) {\n      return func();\n    };\n    /**\n     * @template T\n     * @param {?} func\n     * @return {?}\n     */\n\n\n    NoopNgxsExecutionStrategy.prototype.leave =\n    /**\n    * @template T\n    * @param {?} func\n    * @return {?}\n    */\n    function (func) {\n      return func();\n    };\n\n    NoopNgxsExecutionStrategy.decorators = [{\n      type: core.Injectable,\n      args: [{\n        providedIn: 'root'\n      }]\n    }];\n    /** @nocollapse */\n\n    NoopNgxsExecutionStrategy.ngInjectableDef = core.defineInjectable({\n      factory: function NoopNgxsExecutionStrategy_Factory() {\n        return new NoopNgxsExecutionStrategy();\n      },\n      token: NoopNgxsExecutionStrategy,\n      providedIn: \"root\"\n    });\n    return NoopNgxsExecutionStrategy;\n  }();\n  /**\n   * @fileoverview added by tsickle\n   * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n   */\n\n  /**\n   * The strategy that might be provided by users through `options.executionStrategy`.\n   * @type {?}\n   */\n\n\n  var USER_PROVIDED_NGXS_EXECUTION_STRATEGY = new core.InjectionToken('USER_PROVIDED_NGXS_EXECUTION_STRATEGY');\n  /*\n   * Internal execution strategy injection token\n   */\n\n  /** @type {?} */\n\n  var NGXS_EXECUTION_STRATEGY = new core.InjectionToken('NGXS_EXECUTION_STRATEGY', {\n    providedIn: 'root',\n    factory:\n    /**\n    * @return {?}\n    */\n    function () {\n      /** @type {?} */\n      var injector = core.inject(core.INJECTOR);\n      /** @type {?} */\n\n      var executionStrategy = injector.get(USER_PROVIDED_NGXS_EXECUTION_STRATEGY);\n      return executionStrategy ? injector.get(executionStrategy) : injector.get(typeof core.Éµglobal.Zone !== 'undefined' ? DispatchOutsideZoneNgxsExecutionStrategy : NoopNgxsExecutionStrategy);\n    }\n  });\n  /**\n   * @record\n   */\n\n  function NgxsExecutionStrategy() {}\n\n  if (false) {\n    /**\n     * @template T\n     * @param {?} func\n     * @return {?}\n     */\n    NgxsExecutionStrategy.prototype.enter = function (func) {};\n    /**\n     * @template T\n     * @param {?} func\n     * @return {?}\n     */\n\n\n    NgxsExecutionStrategy.prototype.leave = function (func) {};\n  }\n  /**\n   * @fileoverview added by tsickle\n   * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n   */\n\n  /**\n   * Returns the type from an action instance/class.\n   * @ignore\n   * @param {?} action\n   * @return {?}\n   */\n\n\n  function getActionTypeFromInstance(action) {\n    if (action.constructor && action.constructor.type) {\n      return action.constructor.type;\n    } else {\n      return action.type;\n    }\n  }\n  /**\n   * Matches a action\n   * @ignore\n   * @param {?} action1\n   * @return {?}\n   */\n\n\n  function actionMatcher(action1) {\n    /** @type {?} */\n    var type1 = getActionTypeFromInstance(action1);\n    return (\n      /**\n      * @param {?} action2\n      * @return {?}\n      */\n      function (action2) {\n        return type1 === getActionTypeFromInstance(action2);\n      }\n    );\n  }\n  /**\n   * Set a deeply nested value. Example:\n   *\n   *   setValue({ foo: { bar: { eat: false } } },\n   *      'foo.bar.eat', true) //=> { foo: { bar: { eat: true } } }\n   *\n   * While it traverses it also creates new objects from top down.\n   *\n   * @ignore\n   * @type {?}\n   */\n\n\n  var setValue =\n  /**\n  * @param {?} obj\n  * @param {?} prop\n  * @param {?} val\n  * @return {?}\n  */\n  function (obj, prop, val) {\n    obj = __assign({}, obj);\n    /** @type {?} */\n\n    var split = prop.split('.');\n    /** @type {?} */\n\n    var lastIndex = split.length - 1;\n    split.reduce(\n    /**\n    * @param {?} acc\n    * @param {?} part\n    * @param {?} index\n    * @return {?}\n    */\n    function (acc, part, index) {\n      if (index === lastIndex) {\n        acc[part] = val;\n      } else {\n        acc[part] = Array.isArray(acc[part]) ? acc[part].slice() : __assign({}, acc[part]);\n      }\n\n      return acc && acc[part];\n    }, obj);\n    return obj;\n  };\n  /**\n   * Get a deeply nested value. Example:\n   *\n   *    getValue({ foo: bar: [] }, 'foo.bar') //=> []\n   *\n   * @ignore\n   * @type {?}\n   */\n\n\n  var getValue =\n  /**\n  * @param {?} obj\n  * @param {?} prop\n  * @return {?}\n  */\n  function (obj, prop) {\n    return prop.split('.').reduce(\n    /**\n    * @param {?} acc\n    * @param {?} part\n    * @return {?}\n    */\n    function (acc, part) {\n      return acc && acc[part];\n    }, obj);\n  };\n  /**\n   * Simple object check.\n   *\n   *    isObject({a:1}) //=> true\n   *    isObject(1) //=> false\n   *\n   * @ignore\n   * @type {?}\n   */\n\n\n  var isObject =\n  /**\n  * @param {?} item\n  * @return {?}\n  */\n  function (item) {\n    return item && typeof item === 'object' && !Array.isArray(item);\n  };\n  /**\n   * Deep merge two objects.\n   *\n   *    mergeDeep({a:1, b:{x: 1, y:2}}, {b:{x: 3}, c:4}) //=> {a:1, b:{x:3, y:2}, c:4}\n   *\n   * \\@param base base object onto which `sources` will be applied\n   * @type {?}\n   */\n\n\n  var mergeDeep =\n  /**\n  * @param {?} base\n  * @param {...?} sources\n  * @return {?}\n  */\n  function (base) {\n    var sources = [];\n\n    for (var _i = 1; _i < arguments.length; _i++) {\n      sources[_i - 1] = arguments[_i];\n    }\n\n    var _a, _b;\n\n    if (!sources.length) return base;\n    /** @type {?} */\n\n    var source = sources.shift();\n\n    if (isObject(base) && isObject(source)) {\n      for (var key in source) {\n        if (isObject(source[key])) {\n          if (!base[key]) Object.assign(base, (_a = {}, _a[key] = {}, _a));\n          mergeDeep(base[key], source[key]);\n        } else {\n          Object.assign(base, (_b = {}, _b[key] = source[key], _b));\n        }\n      }\n    }\n\n    return mergeDeep.apply(void 0, __spread([base], sources));\n  };\n  /**\n   * @fileoverview added by tsickle\n   * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n   */\n\n  /**\n   * @record\n   * @template T, U\n   */\n\n\n  function StateClassInternal() {}\n\n  if (false) {\n    /* Skipping unnamed member:\n    [META_KEY]?: MetaDataModel;*/\n\n    /* Skipping unnamed member:\n    [META_OPTIONS_KEY]?: StoreOptions<U>;*/\n  }\n  /**\n   * @record\n   * @template T\n   */\n\n\n  function StateOperations() {}\n\n  if (false) {\n    /**\n     * @return {?}\n     */\n    StateOperations.prototype.getState = function () {};\n    /**\n     * @param {?} val\n     * @return {?}\n     */\n\n\n    StateOperations.prototype.setState = function (val) {};\n    /**\n     * @param {?} actionOrActions\n     * @return {?}\n     */\n\n\n    StateOperations.prototype.dispatch = function (actionOrActions) {};\n  }\n  /**\n   * @record\n   */\n\n\n  function MetaDataModel() {}\n\n  if (false) {\n    /** @type {?} */\n    MetaDataModel.prototype.name;\n    /** @type {?} */\n\n    MetaDataModel.prototype.actions;\n    /** @type {?} */\n\n    MetaDataModel.prototype.defaults;\n    /** @type {?} */\n\n    MetaDataModel.prototype.path;\n    /** @type {?} */\n\n    MetaDataModel.prototype.makeRootSelector;\n    /** @type {?|undefined} */\n\n    MetaDataModel.prototype.children;\n  }\n  /**\n   * @record\n   */\n\n\n  function RuntimeSelectorContext() {}\n\n  if (false) {\n    /**\n     * @param {?} key\n     * @return {?}\n     */\n    RuntimeSelectorContext.prototype.getStateGetter = function (key) {};\n    /**\n     * @param {?=} localOptions\n     * @return {?}\n     */\n\n\n    RuntimeSelectorContext.prototype.getSelectorOptions = function (localOptions) {};\n  }\n  /**\n   * @record\n   */\n\n\n  function SharedSelectorOptions() {}\n\n  if (false) {\n    /** @type {?|undefined} */\n    SharedSelectorOptions.prototype.injectContainerState;\n    /** @type {?|undefined} */\n\n    SharedSelectorOptions.prototype.suppressErrors;\n  }\n  /**\n   * @record\n   */\n\n\n  function SelectorMetaDataModel() {}\n\n  if (false) {\n    /** @type {?} */\n    SelectorMetaDataModel.prototype.makeRootSelector;\n    /** @type {?} */\n\n    SelectorMetaDataModel.prototype.originalFn;\n    /** @type {?} */\n\n    SelectorMetaDataModel.prototype.containerClass;\n    /** @type {?} */\n\n    SelectorMetaDataModel.prototype.selectorName;\n    /** @type {?} */\n\n    SelectorMetaDataModel.prototype.getSelectorOptions;\n  }\n  /**\n   * @record\n   */\n\n\n  function MappedStore() {}\n\n  if (false) {\n    /** @type {?} */\n    MappedStore.prototype.name;\n    /** @type {?} */\n\n    MappedStore.prototype.isInitialised;\n    /** @type {?} */\n\n    MappedStore.prototype.actions;\n    /** @type {?} */\n\n    MappedStore.prototype.defaults;\n    /** @type {?} */\n\n    MappedStore.prototype.instance;\n    /** @type {?} */\n\n    MappedStore.prototype.path;\n  }\n  /**\n   * @record\n   */\n\n\n  function StatesAndDefaults() {}\n\n  if (false) {\n    /** @type {?} */\n    StatesAndDefaults.prototype.defaults;\n    /** @type {?} */\n\n    StatesAndDefaults.prototype.states;\n  }\n  /**\n   * @record\n   * @template T\n   */\n\n\n  function RootStateDiff() {}\n\n  if (false) {\n    /** @type {?} */\n    RootStateDiff.prototype.currentAppState;\n    /** @type {?} */\n\n    RootStateDiff.prototype.newAppState;\n  }\n  /**\n   * Ensures metadata is attached to the class and returns it.\n   *\n   * @ignore\n   * @param {?} target\n   * @return {?}\n   */\n\n\n  function ensureStoreMetadata(target) {\n    if (!target.hasOwnProperty(META_KEY)) {\n      /** @type {?} */\n      var defaultMetadata_1 = {\n        name: null,\n        actions: {},\n        defaults: {},\n        path: null,\n        makeRootSelector:\n        /**\n        * @param {?} context\n        * @return {?}\n        */\n        function (context) {\n          return context.getStateGetter(defaultMetadata_1.name);\n        },\n        children: []\n      };\n      Object.defineProperty(target, META_KEY, {\n        value: defaultMetadata_1\n      });\n    }\n\n    return getStoreMetadata(target);\n  }\n  /**\n   * Get the metadata attached to the state class if it exists.\n   *\n   * @ignore\n   * @param {?} target\n   * @return {?}\n   */\n\n\n  function getStoreMetadata(target) {\n    return (\n      /** @type {?} */\n      target[META_KEY]\n    );\n  }\n  /**\n   * Ensures metadata is attached to the selector and returns it.\n   *\n   * @ignore\n   * @param {?} target\n   * @return {?}\n   */\n\n\n  function ensureSelectorMetadata(target) {\n    if (!target.hasOwnProperty(SELECTOR_META_KEY)) {\n      /** @type {?} */\n      var defaultMetadata = {\n        makeRootSelector: null,\n        originalFn: null,\n        containerClass: null,\n        selectorName: null,\n        getSelectorOptions:\n        /**\n        * @return {?}\n        */\n        function () {\n          return {};\n        }\n      };\n      Object.defineProperty(target, SELECTOR_META_KEY, {\n        value: defaultMetadata\n      });\n    }\n\n    return getSelectorMetadata(target);\n  }\n  /**\n   * Get the metadata attached to the selector if it exists.\n   *\n   * @ignore\n   * @param {?} target\n   * @return {?}\n   */\n\n\n  function getSelectorMetadata(target) {\n    return target[SELECTOR_META_KEY];\n  }\n  /**\n   * Get a deeply nested value. Example:\n   *\n   *    getValue({ foo: bar: [] }, 'foo.bar') //=> []\n   *\n   * Note: This is not as fast as the `fastPropGetter` but is strict Content Security Policy compliant.\n   * See perf hit: https://jsperf.com/fast-value-getter-given-path/1\n   *\n   * @ignore\n   * @param {?} paths\n   * @return {?}\n   */\n\n\n  function compliantPropGetter(paths) {\n    /** @type {?} */\n    var copyOfPaths = paths.slice();\n    return (\n      /**\n      * @param {?} obj\n      * @return {?}\n      */\n      function (obj) {\n        return copyOfPaths.reduce(\n        /**\n        * @param {?} acc\n        * @param {?} part\n        * @return {?}\n        */\n        function (acc, part) {\n          return acc && acc[part];\n        }, obj);\n      }\n    );\n  }\n  /**\n   * The generated function is faster than:\n   * - pluck (Observable operator)\n   * - memoize\n   *\n   * @ignore\n   * @param {?} paths\n   * @return {?}\n   */\n\n\n  function fastPropGetter(paths) {\n    /** @type {?} */\n    var segments = paths;\n    /** @type {?} */\n\n    var seg = 'store.' + segments[0];\n    /** @type {?} */\n\n    var i = 0;\n    /** @type {?} */\n\n    var l = segments.length;\n    /** @type {?} */\n\n    var expr = seg;\n\n    while (++i < l) {\n      expr = expr + ' && ' + (seg = seg + '.' + segments[i]);\n    }\n    /** @type {?} */\n\n\n    var fn = new Function('store', 'return ' + expr + ';');\n    return (\n      /** @type {?} */\n      fn\n    );\n  }\n  /**\n   * Get a deeply nested value. Example:\n   *\n   *    getValue({ foo: bar: [] }, 'foo.bar') //=> []\n   *\n   * @ignore\n   * @param {?} paths\n   * @param {?} config\n   * @return {?}\n   */\n\n\n  function propGetter(paths, config) {\n    if (config && config.compatibility && config.compatibility.strictContentSecurityPolicy) {\n      return compliantPropGetter(paths);\n    } else {\n      return fastPropGetter(paths);\n    }\n  }\n  /**\n   * Given an array of states, it will return a object graph. Example:\n   *    const states = [\n   *      Cart,\n   *      CartSaved,\n   *      CartSavedItems\n   *    ]\n   *\n   * would return:\n   *\n   *  const graph = {\n   *    cart: ['saved'],\n   *    saved: ['items'],\n   *    items: []\n   *  };\n   *\n   * @ignore\n   * @param {?} stateClasses\n   * @return {?}\n   */\n\n\n  function buildGraph(stateClasses) {\n    /** @type {?} */\n    var findName =\n    /**\n    * @param {?} stateClass\n    * @return {?}\n    */\n    function (stateClass) {\n      /** @type {?} */\n      var meta = stateClasses.find(\n      /**\n      * @param {?} g\n      * @return {?}\n      */\n      function (g) {\n        return g === stateClass;\n      }); // Caretaker note: we have still left the `typeof` condition in order to avoid\n      // creating a breaking change for projects that still use the View Engine.\n\n      if ((typeof ngDevMode === 'undefined' || ngDevMode) && !meta) {\n        throw new Error(\"Child state not found: \" + stateClass + \". \\r\\nYou may have forgotten to add states to module\");\n      }\n\n      return (\n        /** @type {?} */\n\n        /** @type {?} */\n\n        /** @type {?} */\n        meta[META_KEY].name\n      );\n    };\n\n    return stateClasses.reduce(\n    /**\n    * @param {?} result\n    * @param {?} stateClass\n    * @return {?}\n    */\n    function (result, stateClass) {\n      var _a =\n      /** @type {?} */\n      stateClass[META_KEY],\n          name = _a.name,\n          children = _a.children;\n      result[\n      /** @type {?} */\n      name] = (children || []).map(findName);\n      return result;\n    }, {});\n  }\n  /**\n   * Given a states array, returns object graph\n   * returning the name and state metadata. Example:\n   *\n   *  const graph = {\n   *    cart: { metadata }\n   *  };\n   *\n   * @ignore\n   * @param {?} states\n   * @return {?}\n   */\n\n\n  function nameToState(states) {\n    return states.reduce(\n    /**\n    * @param {?} result\n    * @param {?} stateClass\n    * @return {?}\n    */\n    function (result, stateClass) {\n      /** @type {?} */\n      var meta =\n      /** @type {?} */\n      stateClass[META_KEY];\n      result[\n      /** @type {?} */\n      meta.name] = stateClass;\n      return result;\n    }, {});\n  }\n  /**\n   * Given a object relationship graph will return the full path\n   * for the child items. Example:\n   *\n   *  const graph = {\n   *    cart: ['saved'],\n   *    saved: ['items'],\n   *    items: []\n   *  };\n   *\n   * would return:\n   *\n   *  const r = {\n   *    cart: 'cart',\n   *    saved: 'cart.saved',\n   *    items: 'cart.saved.items'\n   *  };\n   *\n   * @ignore\n   * @param {?} obj\n   * @param {?=} newObj\n   * @return {?}\n   */\n\n\n  function findFullParentPath(obj, newObj) {\n    if (newObj === void 0) {\n      newObj = {};\n    }\n    /** @type {?} */\n\n\n    var visit =\n    /**\n    * @param {?} child\n    * @param {?} keyToFind\n    * @return {?}\n    */\n    function (child, keyToFind) {\n      for (var key in child) {\n        if (child.hasOwnProperty(key) && child[key].indexOf(keyToFind) >= 0) {\n          /** @type {?} */\n          var parent_1 = visit(child, key);\n          return parent_1 !== null ? parent_1 + \".\" + key : key;\n        }\n      }\n\n      return null;\n    };\n\n    for (var key in obj) {\n      if (obj.hasOwnProperty(key)) {\n        /** @type {?} */\n        var parent_2 = visit(obj, key);\n        newObj[key] = parent_2 ? parent_2 + \".\" + key : key;\n      }\n    }\n\n    return newObj;\n  }\n  /**\n   * Given a object graph, it will return the items topologically sorted Example:\n   *\n   *  const graph = {\n   *    cart: ['saved'],\n   *    saved: ['items'],\n   *    items: []\n   *  };\n   *\n   * would return:\n   *\n   *  const results = [\n   *    'items',\n   *    'saved',\n   *    'cart'\n   *  ];\n   *\n   * @ignore\n   * @param {?} graph\n   * @return {?}\n   */\n\n\n  function topologicalSort(graph) {\n    /** @type {?} */\n    var sorted = [];\n    /** @type {?} */\n\n    var visited = {};\n    /** @type {?} */\n\n    var visit =\n    /**\n    * @param {?} name\n    * @param {?=} ancestors\n    * @return {?}\n    */\n    function (name, ancestors) {\n      if (ancestors === void 0) {\n        ancestors = [];\n      }\n\n      if (!Array.isArray(ancestors)) {\n        ancestors = [];\n      }\n\n      ancestors.push(name);\n      visited[name] = true;\n      graph[name].forEach(\n      /**\n      * @param {?} dep\n      * @return {?}\n      */\n      function (dep) {\n        // Caretaker note: we have still left the `typeof` condition in order to avoid\n        // creating a breaking change for projects that still use the View Engine.\n        if ((typeof ngDevMode === 'undefined' || ngDevMode) && ancestors.indexOf(dep) >= 0) {\n          throw new Error(\"Circular dependency '\" + dep + \"' is required by '\" + name + \"': \" + ancestors.join(' -> '));\n        }\n\n        if (visited[dep]) {\n          return;\n        }\n\n        visit(dep, ancestors.slice(0));\n      });\n\n      if (sorted.indexOf(name) < 0) {\n        sorted.push(name);\n      }\n    };\n\n    Object.keys(graph).forEach(\n    /**\n    * @param {?} k\n    * @return {?}\n    */\n    function (k) {\n      return visit(k);\n    });\n    return sorted.reverse();\n  }\n  /**\n   * Returns if the parameter is a object or not.\n   *\n   * @ignore\n   * @param {?} obj\n   * @return {?}\n   */\n\n\n  function isObject$1(obj) {\n    return typeof obj === 'object' && obj !== null || typeof obj === 'function';\n  }\n  /**\n   * @template T\n   * @param {?} mappedStore\n   * @param {?} diff\n   * @return {?}\n   */\n\n\n  function getStateDiffChanges(mappedStore, diff) {\n    /** @type {?} */\n    var previousValue = getValue(diff.currentAppState, mappedStore.path);\n    /** @type {?} */\n\n    var currentValue = getValue(diff.newAppState, mappedStore.path);\n    return new NgxsSimpleChange(previousValue, currentValue, !mappedStore.isInitialised);\n  }\n  /**\n   * @fileoverview added by tsickle\n   * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n   */\n\n  /**\n   * @record\n   * @template T, E\n   */\n\n\n  function ActionCompletion() {}\n\n  if (false) {\n    /** @type {?} */\n    ActionCompletion.prototype.action;\n    /** @type {?} */\n\n    ActionCompletion.prototype.result;\n  }\n  /**\n   * RxJS operator for selecting out specific actions.\n   *\n   * This will grab actions that have just been dispatched as well as actions that have completed\n   * @param {...?} allowedTypes\n   * @return {?}\n   */\n\n\n  function ofAction() {\n    var allowedTypes = [];\n\n    for (var _i = 0; _i < arguments.length; _i++) {\n      allowedTypes[_i] = arguments[_i];\n    }\n\n    return ofActionOperator(allowedTypes);\n  }\n  /**\n   * RxJS operator for selecting out specific actions.\n   *\n   * This will ONLY grab actions that have just been dispatched\n   * @param {...?} allowedTypes\n   * @return {?}\n   */\n\n\n  function ofActionDispatched() {\n    var allowedTypes = [];\n\n    for (var _i = 0; _i < arguments.length; _i++) {\n      allowedTypes[_i] = arguments[_i];\n    }\n\n    return ofActionOperator(allowedTypes, [\"DISPATCHED\"\n    /* Dispatched */\n    ]);\n  }\n  /**\n   * RxJS operator for selecting out specific actions.\n   *\n   * This will ONLY grab actions that have just been successfully completed\n   * @param {...?} allowedTypes\n   * @return {?}\n   */\n\n\n  function ofActionSuccessful() {\n    var allowedTypes = [];\n\n    for (var _i = 0; _i < arguments.length; _i++) {\n      allowedTypes[_i] = arguments[_i];\n    }\n\n    return ofActionOperator(allowedTypes, [\"SUCCESSFUL\"\n    /* Successful */\n    ]);\n  }\n  /**\n   * RxJS operator for selecting out specific actions.\n   *\n   * This will ONLY grab actions that have just been canceled\n   * @param {...?} allowedTypes\n   * @return {?}\n   */\n\n\n  function ofActionCanceled() {\n    var allowedTypes = [];\n\n    for (var _i = 0; _i < arguments.length; _i++) {\n      allowedTypes[_i] = arguments[_i];\n    }\n\n    return ofActionOperator(allowedTypes, [\"CANCELED\"\n    /* Canceled */\n    ]);\n  }\n  /**\n   * RxJS operator for selecting out specific actions.\n   *\n   * This will ONLY grab actions that have just been completed\n   * @param {...?} allowedTypes\n   * @return {?}\n   */\n\n\n  function ofActionCompleted() {\n    var allowedTypes = [];\n\n    for (var _i = 0; _i < arguments.length; _i++) {\n      allowedTypes[_i] = arguments[_i];\n    }\n    /** @type {?} */\n\n\n    var allowedStatuses = [\"SUCCESSFUL\"\n    /* Successful */\n    , \"CANCELED\"\n    /* Canceled */\n    , \"ERRORED\"\n    /* Errored */\n    ];\n    return ofActionOperator(allowedTypes, allowedStatuses, mapActionResult);\n  }\n  /**\n   * RxJS operator for selecting out specific actions.\n   *\n   * This will ONLY grab actions that have just thrown an error\n   * @param {...?} allowedTypes\n   * @return {?}\n   */\n\n\n  function ofActionErrored() {\n    var allowedTypes = [];\n\n    for (var _i = 0; _i < arguments.length; _i++) {\n      allowedTypes[_i] = arguments[_i];\n    }\n\n    return ofActionOperator(allowedTypes, [\"ERRORED\"\n    /* Errored */\n    ]);\n  }\n  /**\n   * @param {?} allowedTypes\n   * @param {?=} statuses\n   * @param {?=} mapOperator\n   * @return {?}\n   */\n\n\n  function ofActionOperator(allowedTypes, statuses, // This actually could've been `OperatorFunction<ActionContext, ActionCompletion | any>`,\n  // since it maps either to `ctx.action` OR to `ActionCompletion`. But `ActionCompleteion | any`\n  // defaults to `any`, thus there is no sense from union type.\n  mapOperator) {\n    if (mapOperator === void 0) {\n      mapOperator = mapAction;\n    }\n    /** @type {?} */\n\n\n    var allowedMap = createAllowedActionTypesMap(allowedTypes);\n    /** @type {?} */\n\n    var allowedStatusMap = statuses && createAllowedStatusesMap(statuses);\n    return (\n      /**\n      * @param {?} o\n      * @return {?}\n      */\n      function (o) {\n        return o.pipe(filterStatus(allowedMap, allowedStatusMap), mapOperator());\n      }\n    );\n  }\n  /**\n   * @param {?} allowedTypes\n   * @param {?=} allowedStatuses\n   * @return {?}\n   */\n\n\n  function filterStatus(allowedTypes, allowedStatuses) {\n    return operators.filter(\n    /**\n    * @param {?} ctx\n    * @return {?}\n    */\n    function (ctx) {\n      /** @type {?} */\n      var actionType =\n      /** @type {?} */\n      getActionTypeFromInstance(ctx.action);\n      /** @type {?} */\n\n      var typeMatch = allowedTypes[actionType];\n      /** @type {?} */\n\n      var statusMatch = allowedStatuses ? allowedStatuses[ctx.status] : true;\n      return typeMatch && statusMatch;\n    });\n  }\n  /**\n   * @return {?}\n   */\n\n\n  function mapActionResult() {\n    return operators.map(\n    /**\n    * @param {?} __0\n    * @return {?}\n    */\n    function (_a) {\n      var action = _a.action,\n          status = _a.status,\n          error = _a.error;\n      return (\n        /** @type {?} */\n        {\n          action: action,\n          result: {\n            successful: \"SUCCESSFUL\"\n            /* Successful */\n            === status,\n            canceled: \"CANCELED\"\n            /* Canceled */\n            === status,\n            error: error\n          }\n        }\n      );\n    });\n  }\n  /**\n   * @template T\n   * @return {?}\n   */\n\n\n  function mapAction() {\n    return operators.map(\n    /**\n    * @param {?} ctx\n    * @return {?}\n    */\n    function (ctx) {\n      return (\n        /** @type {?} */\n        ctx.action\n      );\n    });\n  }\n  /**\n   * @record\n   */\n\n\n  function FilterMap() {}\n  /**\n   * @param {?} types\n   * @return {?}\n   */\n\n\n  function createAllowedActionTypesMap(types) {\n    return types.reduce(\n    /**\n    * @param {?} filterMap\n    * @param {?} klass\n    * @return {?}\n    */\n    function (filterMap, klass) {\n      filterMap[\n      /** @type {?} */\n      getActionTypeFromInstance(klass)] = true;\n      return filterMap;\n    },\n    /** @type {?} */\n    {});\n  }\n  /**\n   * @param {?} statuses\n   * @return {?}\n   */\n\n\n  function createAllowedStatusesMap(statuses) {\n    return statuses.reduce(\n    /**\n    * @param {?} filterMap\n    * @param {?} status\n    * @return {?}\n    */\n    function (filterMap, status) {\n      filterMap[status] = true;\n      return filterMap;\n    },\n    /** @type {?} */\n    {});\n  }\n  /**\n   * @fileoverview added by tsickle\n   * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n   */\n\n  /**\n   * Returns operator that will run\n   * `subscribe` outside of the ngxs execution context\n   * @template T\n   * @param {?} ngxsExecutionStrategy\n   * @return {?}\n   */\n\n\n  function leaveNgxs(ngxsExecutionStrategy) {\n    return (\n      /**\n      * @param {?} source\n      * @return {?}\n      */\n      function (source) {\n        return new rxjs.Observable(\n        /**\n        * @param {?} sink\n        * @return {?}\n        */\n        function (sink) {\n          return source.subscribe({\n            next:\n            /**\n            * @param {?} value\n            * @return {?}\n            */\n            function (value) {\n              ngxsExecutionStrategy.leave(\n              /**\n              * @return {?}\n              */\n              function () {\n                return sink.next(value);\n              });\n            },\n            error:\n            /**\n            * @param {?} error\n            * @return {?}\n            */\n            function (error) {\n              ngxsExecutionStrategy.leave(\n              /**\n              * @return {?}\n              */\n              function () {\n                return sink.error(error);\n              });\n            },\n            complete:\n            /**\n            * @return {?}\n            */\n            function () {\n              ngxsExecutionStrategy.leave(\n              /**\n              * @return {?}\n              */\n              function () {\n                return sink.complete();\n              });\n            }\n          });\n        });\n      }\n    );\n  }\n  /**\n   * @fileoverview added by tsickle\n   * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n   */\n\n\n  var InternalNgxsExecutionStrategy =\n  /** @class */\n  function () {\n    function InternalNgxsExecutionStrategy(_executionStrategy) {\n      this._executionStrategy = _executionStrategy;\n    }\n    /**\n     * @template T\n     * @param {?} func\n     * @return {?}\n     */\n\n\n    InternalNgxsExecutionStrategy.prototype.enter =\n    /**\n    * @template T\n    * @param {?} func\n    * @return {?}\n    */\n    function (func) {\n      return this._executionStrategy.enter(func);\n    };\n    /**\n     * @template T\n     * @param {?} func\n     * @return {?}\n     */\n\n\n    InternalNgxsExecutionStrategy.prototype.leave =\n    /**\n    * @template T\n    * @param {?} func\n    * @return {?}\n    */\n    function (func) {\n      return this._executionStrategy.leave(func);\n    };\n\n    InternalNgxsExecutionStrategy.decorators = [{\n      type: core.Injectable\n    }];\n    /** @nocollapse */\n\n    InternalNgxsExecutionStrategy.ctorParameters = function () {\n      return [{\n        type: undefined,\n        decorators: [{\n          type: core.Inject,\n          args: [NGXS_EXECUTION_STRATEGY]\n        }]\n      }];\n    };\n\n    return InternalNgxsExecutionStrategy;\n  }();\n\n  if (false) {\n    /**\n     * @type {?}\n     * @private\n     */\n    InternalNgxsExecutionStrategy.prototype._executionStrategy;\n  }\n  /**\n   * @fileoverview added by tsickle\n   * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n   */\n\n  /** @enum {string} */\n\n\n  var ActionStatus = {\n    Dispatched: 'DISPATCHED',\n    Successful: 'SUCCESSFUL',\n    Canceled: 'CANCELED',\n    Errored: 'ERRORED'\n  };\n  /**\n   * @record\n   * @template T\n   */\n\n  function ActionContext() {}\n\n  if (false) {\n    /** @type {?} */\n    ActionContext.prototype.status;\n    /** @type {?} */\n\n    ActionContext.prototype.action;\n    /** @type {?|undefined} */\n\n    ActionContext.prototype.error;\n  }\n  /**\n   * Custom Subject that ensures that subscribers are notified of values in the order that they arrived.\n   * A standard Subject does not have this guarantee.\n   * For example, given the following code:\n   * ```typescript\n   *   const subject = new Subject<string>();\n   * subject.subscribe(value => {\n   * if (value === 'start') subject.next('end');\n   * });\n   * subject.subscribe(value => { });\n   * subject.next('start');\n   * ```\n   * When `subject` is a standard `Subject<T>` the second subscriber would recieve `end` and then `start`.\n   * When `subject` is a `OrderedSubject<T>` the second subscriber would recieve `start` and then `end`.\n   * @template T\n   */\n\n\n  var\n  /**\n  * Custom Subject that ensures that subscribers are notified of values in the order that they arrived.\n  * A standard Subject does not have this guarantee.\n  * For example, given the following code:\n  * ```typescript\n  *   const subject = new Subject<string>();\n  * subject.subscribe(value => {\n  * if (value === 'start') subject.next('end');\n  * });\n  * subject.subscribe(value => { });\n  * subject.next('start');\n  * ```\n  * When `subject` is a standard `Subject<T>` the second subscriber would recieve `end` and then `start`.\n  * When `subject` is a `OrderedSubject<T>` the second subscriber would recieve `start` and then `end`.\n  * @template T\n  */\n  OrderedSubject =\n  /** @class */\n  function (_super) {\n    __extends(OrderedSubject, _super);\n\n    function OrderedSubject() {\n      var _this = _super !== null && _super.apply(this, arguments) || this;\n\n      _this._itemQueue = [];\n      _this._busyPushingNext = false;\n      return _this;\n    }\n    /**\n     * @param {?=} value\n     * @return {?}\n     */\n\n\n    OrderedSubject.prototype.next =\n    /**\n    * @param {?=} value\n    * @return {?}\n    */\n    function (value) {\n      if (this._busyPushingNext) {\n        this._itemQueue.unshift(\n        /** @type {?} */\n        value);\n\n        return;\n      }\n\n      this._busyPushingNext = true;\n\n      _super.prototype.next.call(this, value);\n\n      while (this._itemQueue.length > 0) {\n        /** @type {?} */\n        var nextValue = this._itemQueue.pop();\n\n        _super.prototype.next.call(this, nextValue);\n      }\n\n      this._busyPushingNext = false;\n    };\n\n    return OrderedSubject;\n  }(rxjs.Subject);\n\n  if (false) {\n    /**\n     * @type {?}\n     * @private\n     */\n    OrderedSubject.prototype._itemQueue;\n    /**\n     * @type {?}\n     * @private\n     */\n\n    OrderedSubject.prototype._busyPushingNext;\n  }\n  /**\n   * Internal Action stream that is emitted anytime an action is dispatched.\n   */\n\n\n  var InternalActions =\n  /** @class */\n  function (_super) {\n    __extends(InternalActions, _super);\n\n    function InternalActions() {\n      return _super !== null && _super.apply(this, arguments) || this;\n    }\n\n    InternalActions.decorators = [{\n      type: core.Injectable\n    }];\n    return InternalActions;\n  }(OrderedSubject);\n  /**\n   * Action stream that is emitted anytime an action is dispatched.\n   *\n   * You can listen to this in services to react without stores.\n   */\n\n\n  var Actions =\n  /** @class */\n  function (_super) {\n    __extends(Actions, _super);\n\n    function Actions(internalActions$, internalExecutionStrategy) {\n      return _super.call(this,\n      /**\n      * @param {?} observer\n      * @return {?}\n      */\n      function (observer) {\n        /** @type {?} */\n        var childSubscription = internalActions$.pipe(leaveNgxs(internalExecutionStrategy)).subscribe({\n          next:\n          /**\n          * @param {?} ctx\n          * @return {?}\n          */\n          function (ctx) {\n            return observer.next(ctx);\n          },\n          error:\n          /**\n          * @param {?} error\n          * @return {?}\n          */\n          function (error) {\n            return observer.error(error);\n          },\n          complete:\n          /**\n          * @return {?}\n          */\n          function () {\n            return observer.complete();\n          }\n        });\n        observer.add(childSubscription);\n      }) || this;\n    }\n\n    Actions.decorators = [{\n      type: core.Injectable\n    }];\n    /** @nocollapse */\n\n    Actions.ctorParameters = function () {\n      return [{\n        type: InternalActions\n      }, {\n        type: InternalNgxsExecutionStrategy\n      }];\n    };\n\n    return Actions;\n  }(rxjs.Observable);\n  /**\n   * @fileoverview added by tsickle\n   * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n   */\n\n  /**\n   * Composes a array of functions from left to right. Example:\n   *\n   *      compose([fn, final])(state, action);\n   *\n   * then the funcs have a signature like:\n   *\n   *      function fn (state, action, next) {\n   *          console.log('here', state, action, next);\n   *          return next(state, action);\n   *      }\n   *\n   *      function final (state, action) {\n   *          console.log('here', state, action);\n   *          return state;\n   *      }\n   *\n   * the last function should not call `next`.\n   *\n   * @ignore\n   * @type {?}\n   */\n\n\n  var compose =\n  /**\n  * @param {?} funcs\n  * @return {?}\n  */\n  function (funcs) {\n    return (\n      /**\n      * @param {...?} args\n      * @return {?}\n      */\n      function () {\n        var args = [];\n\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n        /** @type {?} */\n\n\n        var curr =\n        /** @type {?} */\n        funcs.shift();\n        return curr.apply(void 0, __spread(args, [\n        /**\n        * @param {...?} nextArgs\n        * @return {?}\n        */\n        function () {\n          var nextArgs = [];\n\n          for (var _i = 0; _i < arguments.length; _i++) {\n            nextArgs[_i] = arguments[_i];\n          }\n\n          return compose(funcs).apply(void 0, __spread(nextArgs));\n        }]));\n      }\n    );\n  };\n  /**\n   * @fileoverview added by tsickle\n   * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n   */\n\n  /**\n   * BehaviorSubject of the entire state.\n   * @ignore\n   */\n\n\n  var StateStream =\n  /** @class */\n  function (_super) {\n    __extends(StateStream, _super);\n\n    function StateStream() {\n      return _super.call(this, {}) || this;\n    }\n    /**\n     * @return {?}\n     */\n\n\n    StateStream.prototype.ngOnDestroy =\n    /**\n    * @return {?}\n    */\n    function () {\n      // The `StateStream` should never emit values once the root view is removed, e.g. when the `NgModuleRef.destroy()` is called.\n      // This will eliminate memory leaks in server-side rendered apps where the `StateStream` is created per each HTTP request, users\n      // might forget to unsubscribe from `store.select` or `store.subscribe`, thus this will lead to huge memory leaks in SSR apps.\n      this.complete();\n    };\n\n    StateStream.decorators = [{\n      type: core.Injectable\n    }];\n    /** @nocollapse */\n\n    StateStream.ctorParameters = function () {\n      return [];\n    };\n\n    return StateStream;\n  }(rxjs.BehaviorSubject);\n  /**\n   * @fileoverview added by tsickle\n   * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n   */\n\n\n  var PluginManager =\n  /** @class */\n  function () {\n    function PluginManager(_parentManager, _pluginHandlers) {\n      this._parentManager = _parentManager;\n      this._pluginHandlers = _pluginHandlers;\n      this.plugins = [];\n      this.registerHandlers();\n    }\n\n    Object.defineProperty(PluginManager.prototype, \"rootPlugins\", {\n      get:\n      /**\n      * @private\n      * @return {?}\n      */\n      function () {\n        return this._parentManager && this._parentManager.plugins || this.plugins;\n      },\n      enumerable: true,\n      configurable: true\n    });\n    /**\n     * @private\n     * @return {?}\n     */\n\n    PluginManager.prototype.registerHandlers =\n    /**\n    * @private\n    * @return {?}\n    */\n    function () {\n      var _a;\n      /** @type {?} */\n\n\n      var pluginHandlers = this.getPluginHandlers();\n\n      (_a = this.rootPlugins).push.apply(_a, __spread(pluginHandlers));\n    };\n    /**\n     * @private\n     * @return {?}\n     */\n\n\n    PluginManager.prototype.getPluginHandlers =\n    /**\n    * @private\n    * @return {?}\n    */\n    function () {\n      /** @type {?} */\n      var handlers = this._pluginHandlers || [];\n      return handlers.map(\n      /**\n      * @param {?} plugin\n      * @return {?}\n      */\n      function (plugin) {\n        return (\n          /** @type {?} */\n          plugin.handle ? plugin.handle.bind(plugin) : plugin\n        );\n      });\n    };\n\n    PluginManager.decorators = [{\n      type: core.Injectable\n    }];\n    /** @nocollapse */\n\n    PluginManager.ctorParameters = function () {\n      return [{\n        type: PluginManager,\n        decorators: [{\n          type: core.Optional\n        }, {\n          type: core.SkipSelf\n        }]\n      }, {\n        type: Array,\n        decorators: [{\n          type: core.Inject,\n          args: [NGXS_PLUGINS]\n        }, {\n          type: core.Optional\n        }]\n      }];\n    };\n\n    return PluginManager;\n  }();\n\n  if (false) {\n    /** @type {?} */\n    PluginManager.prototype.plugins;\n    /**\n     * @type {?}\n     * @private\n     */\n\n    PluginManager.prototype._parentManager;\n    /**\n     * @type {?}\n     * @private\n     */\n\n    PluginManager.prototype._pluginHandlers;\n  }\n  /**\n   * @fileoverview added by tsickle\n   * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n   */\n\n  /**\n   * Internal Action result stream that is emitted when an action is completed.\n   * This is used as a method of returning the action result to the dispatcher\n   * for the observable returned by the dispatch(...) call.\n   * The dispatcher then asynchronously pushes the result from this stream onto the main action stream as a result.\n   */\n\n\n  var InternalDispatchedActionResults =\n  /** @class */\n  function (_super) {\n    __extends(InternalDispatchedActionResults, _super);\n\n    function InternalDispatchedActionResults() {\n      return _super !== null && _super.apply(this, arguments) || this;\n    }\n\n    InternalDispatchedActionResults.decorators = [{\n      type: core.Injectable\n    }];\n    return InternalDispatchedActionResults;\n  }(rxjs.Subject);\n\n  var InternalDispatcher =\n  /** @class */\n  function () {\n    function InternalDispatcher(_injector, _actions, _actionResults, _pluginManager, _stateStream, _ngxsExecutionStrategy) {\n      this._injector = _injector;\n      this._actions = _actions;\n      this._actionResults = _actionResults;\n      this._pluginManager = _pluginManager;\n      this._stateStream = _stateStream;\n      this._ngxsExecutionStrategy = _ngxsExecutionStrategy;\n    }\n    /**\n     * Dispatches event(s).\n     */\n\n    /**\n     * Dispatches event(s).\n     * @param {?} actionOrActions\n     * @return {?}\n     */\n\n\n    InternalDispatcher.prototype.dispatch =\n    /**\n    * Dispatches event(s).\n    * @param {?} actionOrActions\n    * @return {?}\n    */\n    function (actionOrActions) {\n      var _this = this;\n      /** @type {?} */\n\n\n      var result = this._ngxsExecutionStrategy.enter(\n      /**\n      * @return {?}\n      */\n      function () {\n        return _this.dispatchByEvents(actionOrActions);\n      });\n\n      result.subscribe({\n        error:\n        /**\n        * @param {?} error\n        * @return {?}\n        */\n        function (error) {\n          return _this._ngxsExecutionStrategy.leave(\n          /**\n          * @return {?}\n          */\n          function () {\n            try {\n              // Retrieve lazily to avoid cyclic dependency exception\n              _this._errorHandler = _this._errorHandler || _this._injector.get(core.ErrorHandler);\n\n              _this._errorHandler.handleError(error);\n            } catch (_a) {}\n          });\n        }\n      });\n      return result.pipe(leaveNgxs(this._ngxsExecutionStrategy));\n    };\n    /**\n     * @private\n     * @param {?} actionOrActions\n     * @return {?}\n     */\n\n\n    InternalDispatcher.prototype.dispatchByEvents =\n    /**\n    * @private\n    * @param {?} actionOrActions\n    * @return {?}\n    */\n    function (actionOrActions) {\n      var _this = this;\n\n      if (Array.isArray(actionOrActions)) {\n        if (actionOrActions.length === 0) return rxjs.of(this._stateStream.getValue());\n        return rxjs.forkJoin(actionOrActions.map(\n        /**\n        * @param {?} action\n        * @return {?}\n        */\n        function (action) {\n          return _this.dispatchSingle(action);\n        }));\n      } else {\n        return this.dispatchSingle(actionOrActions);\n      }\n    };\n    /**\n     * @private\n     * @param {?} action\n     * @return {?}\n     */\n\n\n    InternalDispatcher.prototype.dispatchSingle =\n    /**\n    * @private\n    * @param {?} action\n    * @return {?}\n    */\n    function (action) {\n      var _this = this;\n      /** @type {?} */\n\n\n      var type = getActionTypeFromInstance(action);\n\n      if (!type) {\n        /** @type {?} */\n        var error = new Error(\"This action doesn't have a type property: \" + action.constructor.name);\n        return rxjs.throwError(error);\n      }\n      /** @type {?} */\n\n\n      var prevState = this._stateStream.getValue();\n      /** @type {?} */\n\n\n      var plugins = this._pluginManager.plugins;\n      return (\n        /** @type {?} */\n        compose(__spread(plugins, [\n        /**\n        * @param {?} nextState\n        * @param {?} nextAction\n        * @return {?}\n        */\n        function (nextState, nextAction) {\n          if (nextState !== prevState) {\n            _this._stateStream.next(nextState);\n          }\n          /** @type {?} */\n\n\n          var actionResult$ = _this.getActionResultStream(nextAction);\n\n          actionResult$.subscribe(\n          /**\n          * @param {?} ctx\n          * @return {?}\n          */\n          function (ctx) {\n            return _this._actions.next(ctx);\n          });\n\n          _this._actions.next({\n            action: nextAction,\n            status: \"DISPATCHED\"\n            /* Dispatched */\n\n          });\n\n          return _this.createDispatchObservable(actionResult$);\n        }]))(prevState, action).pipe(operators.shareReplay())\n      );\n    };\n    /**\n     * @private\n     * @param {?} action\n     * @return {?}\n     */\n\n\n    InternalDispatcher.prototype.getActionResultStream =\n    /**\n    * @private\n    * @param {?} action\n    * @return {?}\n    */\n    function (action) {\n      return this._actionResults.pipe(operators.filter(\n      /**\n      * @param {?} ctx\n      * @return {?}\n      */\n      function (ctx) {\n        return ctx.action === action && ctx.status !== \"DISPATCHED\"\n        /* Dispatched */\n        ;\n      }), operators.take(1), operators.shareReplay());\n    };\n    /**\n     * @private\n     * @param {?} actionResult$\n     * @return {?}\n     */\n\n\n    InternalDispatcher.prototype.createDispatchObservable =\n    /**\n    * @private\n    * @param {?} actionResult$\n    * @return {?}\n    */\n    function (actionResult$) {\n      var _this = this;\n\n      return actionResult$.pipe(operators.exhaustMap(\n      /**\n      * @param {?} ctx\n      * @return {?}\n      */\n      function (ctx) {\n        switch (ctx.status) {\n          case \"SUCCESSFUL\"\n          /* Successful */\n          :\n            return rxjs.of(_this._stateStream.getValue());\n\n          case \"ERRORED\"\n          /* Errored */\n          :\n            return rxjs.throwError(ctx.error);\n\n          default:\n            return rxjs.EMPTY;\n        }\n      })).pipe(operators.shareReplay());\n    };\n\n    InternalDispatcher.decorators = [{\n      type: core.Injectable\n    }];\n    /** @nocollapse */\n\n    InternalDispatcher.ctorParameters = function () {\n      return [{\n        type: core.Injector\n      }, {\n        type: InternalActions\n      }, {\n        type: InternalDispatchedActionResults\n      }, {\n        type: PluginManager\n      }, {\n        type: StateStream\n      }, {\n        type: InternalNgxsExecutionStrategy\n      }];\n    };\n\n    return InternalDispatcher;\n  }();\n\n  if (false) {\n    /**\n     * @type {?}\n     * @private\n     */\n    InternalDispatcher.prototype._errorHandler;\n    /**\n     * @type {?}\n     * @private\n     */\n\n    InternalDispatcher.prototype._injector;\n    /**\n     * @type {?}\n     * @private\n     */\n\n    InternalDispatcher.prototype._actions;\n    /**\n     * @type {?}\n     * @private\n     */\n\n    InternalDispatcher.prototype._actionResults;\n    /**\n     * @type {?}\n     * @private\n     */\n\n    InternalDispatcher.prototype._pluginManager;\n    /**\n     * @type {?}\n     * @private\n     */\n\n    InternalDispatcher.prototype._stateStream;\n    /**\n     * @type {?}\n     * @private\n     */\n\n    InternalDispatcher.prototype._ngxsExecutionStrategy;\n  }\n  /**\n   * @fileoverview added by tsickle\n   * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n   */\n\n  /**\n   * Object freeze code\n   * https://github.com/jsdf/deep-freeze\n   * @type {?}\n   */\n\n\n  var deepFreeze =\n  /**\n  * @param {?} o\n  * @return {?}\n  */\n  function (o) {\n    Object.freeze(o);\n    /** @type {?} */\n\n    var oIsFunction = typeof o === 'function';\n    /** @type {?} */\n\n    var hasOwnProp = Object.prototype.hasOwnProperty;\n    Object.getOwnPropertyNames(o).forEach(\n    /**\n    * @param {?} prop\n    * @return {?}\n    */\n    function (prop) {\n      if (hasOwnProp.call(o, prop) && (oIsFunction ? prop !== 'caller' && prop !== 'callee' && prop !== 'arguments' : true) && o[prop] !== null && (typeof o[prop] === 'object' || typeof o[prop] === 'function') && !Object.isFrozen(o[prop])) {\n        deepFreeze(o[prop]);\n      }\n    });\n    return o;\n  };\n  /**\n   * @fileoverview added by tsickle\n   * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n   */\n\n  /**\n   * State Context factory class\n   * @ignore\n   */\n\n\n  var InternalStateOperations =\n  /** @class */\n  function () {\n    function InternalStateOperations(_stateStream, _dispatcher, _config) {\n      this._stateStream = _stateStream;\n      this._dispatcher = _dispatcher;\n      this._config = _config;\n    }\n    /**\n     * Returns the root state operators.\n     */\n\n    /**\n     * Returns the root state operators.\n     * @return {?}\n     */\n\n\n    InternalStateOperations.prototype.getRootStateOperations =\n    /**\n    * Returns the root state operators.\n    * @return {?}\n    */\n    function () {\n      var _this = this;\n      /** @type {?} */\n\n\n      var rootStateOperations = {\n        getState:\n        /**\n        * @return {?}\n        */\n        function () {\n          return _this._stateStream.getValue();\n        },\n        setState:\n        /**\n        * @param {?} newState\n        * @return {?}\n        */\n        function (newState) {\n          return _this._stateStream.next(newState);\n        },\n        dispatch:\n        /**\n        * @param {?} actionOrActions\n        * @return {?}\n        */\n        function (actionOrActions) {\n          return _this._dispatcher.dispatch(actionOrActions);\n        }\n      }; // We have to have that duplication since this will allow us to tree-shake `ensureStateAndActionsAreImmutable`\n      // and `deepFreeze` in Ivy production build.\n      // The below `if` condition checks 2 things:\n      // 1) if we're in View Engine (`ngDevMode` is `undefined`)\n      // 2) if we're running tests, we should fallback to `config.developmentMode` to be backwards-compatible\n\n      if (typeof ngDevMode === 'undefined' || ngDevMode && internals.isAngularInTestMode()) {\n        return this._config.developmentMode ? ensureStateAndActionsAreImmutable(rootStateOperations) : rootStateOperations;\n      } else {\n        // If we're in Ivy and not running tests, then tree-shake `ensureStateAndActionsAreImmutable` and `deepFreeze`.\n        return ngDevMode ? ensureStateAndActionsAreImmutable(rootStateOperations) : rootStateOperations;\n      }\n    };\n    /**\n     * @param {?} results\n     * @return {?}\n     */\n\n\n    InternalStateOperations.prototype.setStateToTheCurrentWithNew =\n    /**\n    * @param {?} results\n    * @return {?}\n    */\n    function (results) {\n      /** @type {?} */\n      var stateOperations = this.getRootStateOperations(); // Get our current stream\n\n      /** @type {?} */\n\n      var currentState = stateOperations.getState(); // Set the state to the current + new\n\n      stateOperations.setState(__assign({}, currentState, results.defaults));\n    };\n\n    InternalStateOperations.decorators = [{\n      type: core.Injectable\n    }];\n    /** @nocollapse */\n\n    InternalStateOperations.ctorParameters = function () {\n      return [{\n        type: StateStream\n      }, {\n        type: InternalDispatcher\n      }, {\n        type: NgxsConfig\n      }];\n    };\n\n    return InternalStateOperations;\n  }();\n\n  if (false) {\n    /**\n     * @type {?}\n     * @private\n     */\n    InternalStateOperations.prototype._stateStream;\n    /**\n     * @type {?}\n     * @private\n     */\n\n    InternalStateOperations.prototype._dispatcher;\n    /**\n     * @type {?}\n     * @private\n     */\n\n    InternalStateOperations.prototype._config;\n  }\n  /**\n   * @param {?} root\n   * @return {?}\n   */\n\n\n  function ensureStateAndActionsAreImmutable(root) {\n    return {\n      getState:\n      /**\n      * @return {?}\n      */\n      function () {\n        return root.getState();\n      },\n      setState:\n      /**\n      * @param {?} value\n      * @return {?}\n      */\n      function (value) {\n        /** @type {?} */\n        var frozenValue = deepFreeze(value);\n        return root.setState(frozenValue);\n      },\n      dispatch:\n      /**\n      * @param {?} actions\n      * @return {?}\n      */\n      function (actions) {\n        return root.dispatch(actions);\n      }\n    };\n  }\n  /**\n   * @fileoverview added by tsickle\n   * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n   */\n\n  /**\n   * @template T\n   * @param {?} val\n   * @return {?}\n   */\n\n\n  function simplePatch(val) {\n    return (\n      /**\n      * @param {?} existingState\n      * @return {?}\n      */\n      function (existingState) {\n        if (Array.isArray(val)) {\n          throwPatchingArrayError();\n        } else if (typeof val !== 'object') {\n          throwPatchingPrimitiveError();\n        }\n        /** @type {?} */\n\n\n        var newState = __assign({},\n        /** @type {?} */\n        existingState);\n\n        for (var key in val) {\n          // deep clone for patch compatibility\n          // noinspection JSUnfilteredForInLoop (IDE)\n          newState[key] =\n          /** @type {?} */\n          val[key];\n        }\n\n        return (\n          /** @type {?} */\n          newState\n        );\n      }\n    );\n  }\n  /**\n   * @fileoverview added by tsickle\n   * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n   */\n\n  /**\n   * State Context factory class\n   * @ignore\n   */\n\n\n  var StateContextFactory =\n  /** @class */\n  function () {\n    function StateContextFactory(_internalStateOperations) {\n      this._internalStateOperations = _internalStateOperations;\n    }\n    /**\n     * Create the state context\n     */\n\n    /**\n     * Create the state context\n     * @template T\n     * @param {?} mappedStore\n     * @return {?}\n     */\n\n\n    StateContextFactory.prototype.createStateContext =\n    /**\n    * Create the state context\n    * @template T\n    * @param {?} mappedStore\n    * @return {?}\n    */\n    function (mappedStore) {\n      /** @type {?} */\n      var root = this._internalStateOperations.getRootStateOperations();\n      /**\n       * @param {?} currentAppState\n       * @return {?}\n       */\n\n\n      function getState(currentAppState) {\n        return getValue(currentAppState, mappedStore.path);\n      }\n      /**\n       * @param {?} currentAppState\n       * @param {?} newValue\n       * @return {?}\n       */\n\n\n      function setStateValue(currentAppState, newValue) {\n        /** @type {?} */\n        var newAppState = setValue(currentAppState, mappedStore.path, newValue);\n        /** @type {?} */\n\n        var instance = mappedStore.instance;\n\n        if (instance.ngxsOnChanges) {\n          /** @type {?} */\n          var change = getStateDiffChanges(mappedStore, {\n            currentAppState: currentAppState,\n            newAppState: newAppState\n          });\n          instance.ngxsOnChanges(change);\n        }\n\n        root.setState(newAppState);\n        return newAppState; // In doing this refactoring I noticed that there is a 'bug' where the\n        // application state is returned instead of this state slice.\n        // This has worked this way since the beginning see:\n        // https://github.com/ngxs/store/blame/324c667b4b7debd8eb979006c67ca0ae347d88cd/src/state-factory.ts\n        // This needs to be fixed, but is a 'breaking' change.\n        // I will do this fix in a subsequent PR and we can decide how to handle it.\n      }\n      /**\n       * @param {?} currentAppState\n       * @param {?} stateOperator\n       * @return {?}\n       */\n\n\n      function setStateFromOperator(currentAppState, stateOperator) {\n        /** @type {?} */\n        var local = getState(currentAppState);\n        /** @type {?} */\n\n        var newValue = stateOperator(local);\n        return setStateValue(currentAppState, newValue);\n      }\n      /**\n       * @param {?} value\n       * @return {?}\n       */\n\n\n      function isStateOperator(value) {\n        return typeof value === 'function';\n      }\n\n      return {\n        getState:\n        /**\n        * @return {?}\n        */\n        function () {\n          /** @type {?} */\n          var currentAppState = root.getState();\n          return getState(currentAppState);\n        },\n        patchState:\n        /**\n        * @param {?} val\n        * @return {?}\n        */\n        function (val) {\n          /** @type {?} */\n          var currentAppState = root.getState();\n          /** @type {?} */\n\n          var patchOperator = simplePatch(val);\n          return setStateFromOperator(currentAppState, patchOperator);\n        },\n        setState:\n        /**\n        * @param {?} val\n        * @return {?}\n        */\n        function (val) {\n          /** @type {?} */\n          var currentAppState = root.getState();\n          return isStateOperator(val) ? setStateFromOperator(currentAppState, val) : setStateValue(currentAppState, val);\n        },\n        dispatch:\n        /**\n        * @param {?} actions\n        * @return {?}\n        */\n        function (actions) {\n          return root.dispatch(actions);\n        }\n      };\n    };\n\n    StateContextFactory.decorators = [{\n      type: core.Injectable\n    }];\n    /** @nocollapse */\n\n    StateContextFactory.ctorParameters = function () {\n      return [{\n        type: InternalStateOperations\n      }];\n    };\n\n    return StateContextFactory;\n  }();\n\n  if (false) {\n    /**\n     * @type {?}\n     * @private\n     */\n    StateContextFactory.prototype._internalStateOperations;\n  }\n  /**\n   * @fileoverview added by tsickle\n   * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n   */\n\n  /**\n   * @abstract\n   */\n\n\n  var StoreValidators =\n  /** @class */\n  function () {\n    function StoreValidators() {}\n    /**\n     * @param {?} name\n     * @return {?}\n     */\n\n\n    StoreValidators.checkThatStateIsNamedCorrectly =\n    /**\n    * @param {?} name\n    * @return {?}\n    */\n    function (name) {\n      if (!name) {\n        throwStateNamePropertyError();\n      } else if (!this.stateNameRegex.test(name)) {\n        throwStateNameError(name);\n      }\n    };\n    /**\n     * @param {?} stateName\n     * @param {?} state\n     * @param {?} statesByName\n     * @return {?}\n     */\n\n\n    StoreValidators.checkThatStateNameIsUnique =\n    /**\n    * @param {?} stateName\n    * @param {?} state\n    * @param {?} statesByName\n    * @return {?}\n    */\n    function (stateName, state, statesByName) {\n      /** @type {?} */\n      var existingState = statesByName[stateName];\n\n      if (existingState && existingState !== state) {\n        throwStateUniqueError(stateName, state.name, existingState.name);\n      }\n    };\n    /**\n     * @param {?} stateClasses\n     * @return {?}\n     */\n\n\n    StoreValidators.checkThatStateClassesHaveBeenDecorated =\n    /**\n    * @param {?} stateClasses\n    * @return {?}\n    */\n    function (stateClasses) {\n      stateClasses.forEach(\n      /**\n      * @param {?} stateClass\n      * @return {?}\n      */\n      function (stateClass) {\n        if (!getStoreMetadata(stateClass)) {\n          throwStateDecoratorError(stateClass.name);\n        }\n      });\n    };\n\n    StoreValidators.stateNameRegex = new RegExp('^[a-zA-Z0-9_]+$');\n    return StoreValidators;\n  }();\n\n  if (false) {\n    /**\n     * @type {?}\n     * @private\n     */\n    StoreValidators.stateNameRegex;\n  }\n  /**\n   * @fileoverview added by tsickle\n   * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n   */\n\n  /**\n   * State factory class\n   * @ignore\n   */\n\n\n  var StateFactory =\n  /** @class */\n  function () {\n    function StateFactory(_injector, _config, _parentFactory, _actions, _actionResults, _stateContextFactory, _initialState) {\n      var _this = this;\n\n      this._injector = _injector;\n      this._config = _config;\n      this._parentFactory = _parentFactory;\n      this._actions = _actions;\n      this._actionResults = _actionResults;\n      this._stateContextFactory = _stateContextFactory;\n      this._initialState = _initialState;\n      this._actionsSubscription = null;\n      this._states = [];\n      this._statesByName = {};\n      this._statePaths = {};\n      this.getRuntimeSelectorContext = internals.memoize(\n      /**\n      * @return {?}\n      */\n      function () {\n        /** @type {?} */\n        var stateFactory = _this;\n        /**\n         * @param {?} key\n         * @return {?}\n         */\n\n        function resolveGetter(key) {\n          /** @type {?} */\n          var path = stateFactory.statePaths[key];\n          return path ? propGetter(path.split('.'), stateFactory._config) : null;\n        }\n        /** @type {?} */\n\n\n        var context = _this._parentFactory ? _this._parentFactory.getRuntimeSelectorContext() : {\n          getStateGetter:\n          /**\n          * @param {?} key\n          * @return {?}\n          */\n          function (key) {\n            /** @type {?} */\n            var getter = resolveGetter(key);\n\n            if (getter) {\n              return getter;\n            }\n\n            return (\n              /**\n              * @param {...?} args\n              * @return {?}\n              */\n              function () {\n                var args = [];\n\n                for (var _i = 0; _i < arguments.length; _i++) {\n                  args[_i] = arguments[_i];\n                } // Late loaded getter\n\n\n                if (!getter) {\n                  getter = resolveGetter(key);\n                }\n\n                return getter ? getter.apply(void 0, __spread(args)) : undefined;\n              }\n            );\n          },\n          getSelectorOptions:\n          /**\n          * @param {?=} localOptions\n          * @return {?}\n          */\n          function (localOptions) {\n            /** @type {?} */\n            var globalSelectorOptions = stateFactory._config.selectorOptions;\n            return __assign({}, globalSelectorOptions, localOptions || {});\n          }\n        };\n        return context;\n      });\n    }\n\n    Object.defineProperty(StateFactory.prototype, \"states\", {\n      get:\n      /**\n      * @return {?}\n      */\n      function () {\n        return this._parentFactory ? this._parentFactory.states : this._states;\n      },\n      enumerable: true,\n      configurable: true\n    });\n    Object.defineProperty(StateFactory.prototype, \"statesByName\", {\n      get:\n      /**\n      * @return {?}\n      */\n      function () {\n        return this._parentFactory ? this._parentFactory.statesByName : this._statesByName;\n      },\n      enumerable: true,\n      configurable: true\n    });\n    Object.defineProperty(StateFactory.prototype, \"statePaths\", {\n      get:\n      /**\n      * @private\n      * @return {?}\n      */\n      function () {\n        return this._parentFactory ? this._parentFactory.statePaths : this._statePaths;\n      },\n      enumerable: true,\n      configurable: true\n    });\n    /**\n     * @private\n     * @param {?} defaults\n     * @return {?}\n     */\n\n    StateFactory.cloneDefaults =\n    /**\n    * @private\n    * @param {?} defaults\n    * @return {?}\n    */\n    function (defaults) {\n      /** @type {?} */\n      var value = {};\n\n      if (Array.isArray(defaults)) {\n        value = defaults.slice();\n      } else if (isObject$1(defaults)) {\n        value = __assign({}, defaults);\n      } else if (defaults === undefined) {\n        value = {};\n      } else {\n        value = defaults;\n      }\n\n      return value;\n    };\n    /**\n     * @return {?}\n     */\n\n\n    StateFactory.prototype.ngOnDestroy =\n    /**\n    * @return {?}\n    */\n    function () {\n      // I'm using non-null assertion here since `_actionsSubscrition` will\n      // be 100% defined. This is because `ngOnDestroy()` cannot be invoked\n      // on the `StateFactory` until its initialized :) An it's initialized\n      // for the first time along with the `NgxsRootModule`.\n\n      /** @type {?} */\n      this._actionsSubscription.unsubscribe();\n    };\n    /**\n     * Add a new state to the global defs.\n     */\n\n    /**\n     * Add a new state to the global defs.\n     * @param {?} stateClasses\n     * @return {?}\n     */\n\n\n    StateFactory.prototype.add =\n    /**\n    * Add a new state to the global defs.\n    * @param {?} stateClasses\n    * @return {?}\n    */\n    function (stateClasses) {\n      var e_1, _a; // Caretaker note: we have still left the `typeof` condition in order to avoid\n      // creating a breaking change for projects that still use the View Engine.\n\n\n      if (typeof ngDevMode === 'undefined' || ngDevMode) {\n        StoreValidators.checkThatStateClassesHaveBeenDecorated(stateClasses);\n      }\n\n      var newStates = this.addToStatesMap(stateClasses).newStates;\n      if (!newStates.length) return [];\n      /** @type {?} */\n\n      var stateGraph = buildGraph(newStates);\n      /** @type {?} */\n\n      var sortedStates = topologicalSort(stateGraph);\n      /** @type {?} */\n\n      var paths = findFullParentPath(stateGraph);\n      /** @type {?} */\n\n      var nameGraph = nameToState(newStates);\n      /** @type {?} */\n\n      var bootstrappedStores = [];\n\n      try {\n        for (var sortedStates_1 = __values(sortedStates), sortedStates_1_1 = sortedStates_1.next(); !sortedStates_1_1.done; sortedStates_1_1 = sortedStates_1.next()) {\n          var name_1 = sortedStates_1_1.value;\n          /** @type {?} */\n\n          var stateClass = nameGraph[name_1];\n          /** @type {?} */\n\n          var path = paths[name_1];\n          /** @type {?} */\n\n          var meta =\n          /** @type {?} */\n          stateClass[META_KEY];\n          this.addRuntimeInfoToMeta(meta, path);\n          /** @type {?} */\n\n          var stateMap = {\n            name: name_1,\n            path: path,\n            isInitialised: false,\n            actions: meta.actions,\n            instance: this._injector.get(stateClass),\n            defaults: StateFactory.cloneDefaults(meta.defaults)\n          }; // ensure our store hasn't already been added\n          // but don't throw since it could be lazy\n          // loaded from different paths\n\n          if (!this.hasBeenMountedAndBootstrapped(name_1, path)) {\n            bootstrappedStores.push(stateMap);\n          }\n\n          this.states.push(stateMap);\n        }\n      } catch (e_1_1) {\n        e_1 = {\n          error: e_1_1\n        };\n      } finally {\n        try {\n          if (sortedStates_1_1 && !sortedStates_1_1.done && (_a = sortedStates_1.return)) _a.call(sortedStates_1);\n        } finally {\n          if (e_1) throw e_1.error;\n        }\n      }\n\n      return bootstrappedStores;\n    };\n    /**\n     * Add a set of states to the store and return the defaults\n     */\n\n    /**\n     * Add a set of states to the store and return the defaults\n     * @param {?} stateClasses\n     * @return {?}\n     */\n\n\n    StateFactory.prototype.addAndReturnDefaults =\n    /**\n    * Add a set of states to the store and return the defaults\n    * @param {?} stateClasses\n    * @return {?}\n    */\n    function (stateClasses) {\n      /** @type {?} */\n      var classes = stateClasses || [];\n      /** @type {?} */\n\n      var mappedStores = this.add(classes);\n      /** @type {?} */\n\n      var defaults = mappedStores.reduce(\n      /**\n      * @param {?} result\n      * @param {?} mappedStore\n      * @return {?}\n      */\n      function (result, mappedStore) {\n        return setValue(result, mappedStore.path, mappedStore.defaults);\n      }, {});\n      return {\n        defaults: defaults,\n        states: mappedStores\n      };\n    };\n    /**\n     * Bind the actions to the handlers\n     */\n\n    /**\n     * Bind the actions to the handlers\n     * @return {?}\n     */\n\n\n    StateFactory.prototype.connectActionHandlers =\n    /**\n    * Bind the actions to the handlers\n    * @return {?}\n    */\n    function () {\n      var _this = this;\n\n      if (this._actionsSubscription !== null) return;\n      /** @type {?} */\n\n      var dispatched$ = new rxjs.Subject();\n      this._actionsSubscription = this._actions.pipe(operators.filter(\n      /**\n      * @param {?} ctx\n      * @return {?}\n      */\n      function (ctx) {\n        return ctx.status === \"DISPATCHED\"\n        /* Dispatched */\n        ;\n      }), operators.mergeMap(\n      /**\n      * @param {?} ctx\n      * @return {?}\n      */\n      function (ctx) {\n        dispatched$.next(ctx);\n        /** @type {?} */\n\n        var action = ctx.action;\n        return _this.invokeActions(dispatched$,\n        /** @type {?} */\n        action).pipe(operators.map(\n        /**\n        * @return {?}\n        */\n        function () {\n          return (\n            /** @type {?} */\n            {\n              action: action,\n              status: \"SUCCESSFUL\"\n              /* Successful */\n\n            }\n          );\n        }), operators.defaultIfEmpty(\n        /** @type {?} */\n        {\n          action: action,\n          status: \"CANCELED\"\n          /* Canceled */\n\n        }), operators.catchError(\n        /**\n        * @param {?} error\n        * @return {?}\n        */\n        function (error) {\n          return rxjs.of(\n          /** @type {?} */\n          {\n            action: action,\n            status: \"ERRORED\"\n            /* Errored */\n            ,\n            error: error\n          });\n        }));\n      })).subscribe(\n      /**\n      * @param {?} ctx\n      * @return {?}\n      */\n      function (ctx) {\n        return _this._actionResults.next(ctx);\n      });\n    };\n    /**\n     * Invoke actions on the states.\n     */\n\n    /**\n     * Invoke actions on the states.\n     * @param {?} dispatched$\n     * @param {?} action\n     * @return {?}\n     */\n\n\n    StateFactory.prototype.invokeActions =\n    /**\n    * Invoke actions on the states.\n    * @param {?} dispatched$\n    * @param {?} action\n    * @return {?}\n    */\n    function (dispatched$, action) {\n      var e_2, _a, e_3, _b;\n      /** @type {?} */\n\n\n      var type =\n      /** @type {?} */\n      getActionTypeFromInstance(action);\n      /** @type {?} */\n\n      var results = [];\n\n      try {\n        for (var _c = __values(this.states), _d = _c.next(); !_d.done; _d = _c.next()) {\n          var metadata = _d.value;\n          /** @type {?} */\n\n          var actionMetas = metadata.actions[type];\n\n          if (actionMetas) {\n            try {\n              for (var actionMetas_1 = __values(actionMetas), actionMetas_1_1 = actionMetas_1.next(); !actionMetas_1_1.done; actionMetas_1_1 = actionMetas_1.next()) {\n                var actionMeta = actionMetas_1_1.value;\n                /** @type {?} */\n\n                var stateContext = this._stateContextFactory.createStateContext(metadata);\n\n                try {\n                  /** @type {?} */\n                  var result = metadata.instance[actionMeta.fn](stateContext, action);\n\n                  if (result instanceof Promise) {\n                    result = rxjs.from(result);\n                  }\n\n                  if (result instanceof rxjs.Observable) {\n                    // If this observable has been completed w/o emitting\n                    // any value then we wouldn't want to complete the whole chain\n                    // of actions. Since if any observable completes then\n                    // action will be canceled.\n                    // For instance if any action handler would've had such statement:\n                    // `handler(ctx) { return EMPTY; }`\n                    // then the action will be canceled.\n                    // See https://github.com/ngxs/store/issues/1568\n                    result = result.pipe(operators.mergeMap(\n                    /**\n                    * @param {?} value\n                    * @return {?}\n                    */\n                    function (value) {\n                      if (value instanceof Promise) {\n                        return rxjs.from(value);\n                      }\n\n                      if (value instanceof rxjs.Observable) {\n                        return value;\n                      }\n\n                      return rxjs.of(value);\n                    }), operators.defaultIfEmpty({}));\n\n                    if (actionMeta.options.cancelUncompleted) {\n                      // todo: ofActionDispatched should be used with action class\n                      result = result.pipe(operators.takeUntil(dispatched$.pipe(ofActionDispatched(\n                      /** @type {?} */\n                      action))));\n                    }\n                  } else {\n                    result = rxjs.of({}).pipe(operators.shareReplay());\n                  }\n\n                  results.push(result);\n                } catch (e) {\n                  results.push(rxjs.throwError(e));\n                }\n              }\n            } catch (e_3_1) {\n              e_3 = {\n                error: e_3_1\n              };\n            } finally {\n              try {\n                if (actionMetas_1_1 && !actionMetas_1_1.done && (_b = actionMetas_1.return)) _b.call(actionMetas_1);\n              } finally {\n                if (e_3) throw e_3.error;\n              }\n            }\n          }\n        }\n      } catch (e_2_1) {\n        e_2 = {\n          error: e_2_1\n        };\n      } finally {\n        try {\n          if (_d && !_d.done && (_a = _c.return)) _a.call(_c);\n        } finally {\n          if (e_2) throw e_2.error;\n        }\n      }\n\n      if (!results.length) {\n        results.push(rxjs.of({}));\n      }\n\n      return rxjs.forkJoin(results);\n    };\n    /**\n     * @private\n     * @param {?} stateClasses\n     * @return {?}\n     */\n\n\n    StateFactory.prototype.addToStatesMap =\n    /**\n    * @private\n    * @param {?} stateClasses\n    * @return {?}\n    */\n    function (stateClasses) {\n      var e_4, _a;\n      /** @type {?} */\n\n\n      var newStates = [];\n      /** @type {?} */\n\n      var statesMap = this.statesByName;\n\n      try {\n        for (var stateClasses_1 = __values(stateClasses), stateClasses_1_1 = stateClasses_1.next(); !stateClasses_1_1.done; stateClasses_1_1 = stateClasses_1.next()) {\n          var stateClass = stateClasses_1_1.value;\n          /** @type {?} */\n\n          var stateName =\n          /** @type {?} */\n          getStoreMetadata(stateClass).name; // Caretaker note: we have still left the `typeof` condition in order to avoid\n          // creating a breaking change for projects that still use the View Engine.\n\n          if (typeof ngDevMode === 'undefined' || ngDevMode) {\n            StoreValidators.checkThatStateNameIsUnique(stateName, stateClass, statesMap);\n          }\n          /** @type {?} */\n\n\n          var unmountedState = !statesMap[stateName];\n\n          if (unmountedState) {\n            newStates.push(stateClass);\n            statesMap[stateName] = stateClass;\n          }\n        }\n      } catch (e_4_1) {\n        e_4 = {\n          error: e_4_1\n        };\n      } finally {\n        try {\n          if (stateClasses_1_1 && !stateClasses_1_1.done && (_a = stateClasses_1.return)) _a.call(stateClasses_1);\n        } finally {\n          if (e_4) throw e_4.error;\n        }\n      }\n\n      return {\n        newStates: newStates\n      };\n    };\n    /**\n     * @private\n     * @param {?} meta\n     * @param {?} path\n     * @return {?}\n     */\n\n\n    StateFactory.prototype.addRuntimeInfoToMeta =\n    /**\n    * @private\n    * @param {?} meta\n    * @param {?} path\n    * @return {?}\n    */\n    function (meta, path) {\n      this.statePaths[\n      /** @type {?} */\n      meta.name] = path; // TODO: v4 - we plan to get rid of the path property because it is non-deterministic\n      // we can do this when we get rid of the incorrectly exposed getStoreMetadata\n      // We will need to come up with an alternative in v4 because this is used by many plugins\n\n      meta.path = path;\n    };\n    /**\n     * @description\n     * the method checks if the state has already been added to the tree\n     * and completed the life cycle\n     * @param name\n     * @param path\n     */\n\n    /**\n     * \\@description\n     * the method checks if the state has already been added to the tree\n     * and completed the life cycle\n     * @private\n     * @param {?} name\n     * @param {?} path\n     * @return {?}\n     */\n\n\n    StateFactory.prototype.hasBeenMountedAndBootstrapped =\n    /**\n    * \\@description\n    * the method checks if the state has already been added to the tree\n    * and completed the life cycle\n    * @private\n    * @param {?} name\n    * @param {?} path\n    * @return {?}\n    */\n    function (name, path) {\n      /** @type {?} */\n      var valueIsBootstrappedInInitialState = getValue(this._initialState, path) !== undefined;\n      return this.statesByName[name] && valueIsBootstrappedInInitialState;\n    };\n\n    StateFactory.decorators = [{\n      type: core.Injectable\n    }];\n    /** @nocollapse */\n\n    StateFactory.ctorParameters = function () {\n      return [{\n        type: core.Injector\n      }, {\n        type: NgxsConfig\n      }, {\n        type: StateFactory,\n        decorators: [{\n          type: core.Optional\n        }, {\n          type: core.SkipSelf\n        }]\n      }, {\n        type: InternalActions\n      }, {\n        type: InternalDispatchedActionResults\n      }, {\n        type: StateContextFactory\n      }, {\n        type: undefined,\n        decorators: [{\n          type: core.Optional\n        }, {\n          type: core.Inject,\n          args: [internals.INITIAL_STATE_TOKEN]\n        }]\n      }];\n    };\n\n    return StateFactory;\n  }();\n\n  if (false) {\n    /**\n     * @type {?}\n     * @private\n     */\n    StateFactory.prototype._actionsSubscription;\n    /**\n     * @type {?}\n     * @private\n     */\n\n    StateFactory.prototype._states;\n    /**\n     * @type {?}\n     * @private\n     */\n\n    StateFactory.prototype._statesByName;\n    /**\n     * @type {?}\n     * @private\n     */\n\n    StateFactory.prototype._statePaths;\n    /** @type {?} */\n\n    StateFactory.prototype.getRuntimeSelectorContext;\n    /**\n     * @type {?}\n     * @private\n     */\n\n    StateFactory.prototype._injector;\n    /**\n     * @type {?}\n     * @private\n     */\n\n    StateFactory.prototype._config;\n    /**\n     * @type {?}\n     * @private\n     */\n\n    StateFactory.prototype._parentFactory;\n    /**\n     * @type {?}\n     * @private\n     */\n\n    StateFactory.prototype._actions;\n    /**\n     * @type {?}\n     * @private\n     */\n\n    StateFactory.prototype._actionResults;\n    /**\n     * @type {?}\n     * @private\n     */\n\n    StateFactory.prototype._stateContextFactory;\n    /**\n     * @type {?}\n     * @private\n     */\n\n    StateFactory.prototype._initialState;\n  }\n  /**\n   * @fileoverview added by tsickle\n   * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n   */\n\n\n  var LifecycleStateManager =\n  /** @class */\n  function () {\n    function LifecycleStateManager(internalStateOperations, stateContextFactory, bootstrapper) {\n      this.internalStateOperations = internalStateOperations;\n      this.stateContextFactory = stateContextFactory;\n      this.bootstrapper = bootstrapper;\n    }\n    /**\n     * @template T\n     * @param {?} action\n     * @param {?} results\n     * @return {?}\n     */\n\n\n    LifecycleStateManager.prototype.ngxsBootstrap =\n    /**\n    * @template T\n    * @param {?} action\n    * @param {?} results\n    * @return {?}\n    */\n    function (action, results) {\n      var _this = this;\n\n      this.internalStateOperations.getRootStateOperations().dispatch(action).pipe(operators.filter(\n      /**\n      * @return {?}\n      */\n      function () {\n        return !!results;\n      }), operators.tap(\n      /**\n      * @return {?}\n      */\n      function () {\n        return _this.invokeInit(\n        /** @type {?} */\n        results.states);\n      }), operators.mergeMap(\n      /**\n      * @return {?}\n      */\n      function () {\n        return _this.bootstrapper.appBootstrapped$;\n      }), operators.filter(\n      /**\n      * @param {?} appBootstrapped\n      * @return {?}\n      */\n      function (appBootstrapped) {\n        return !!appBootstrapped;\n      })).subscribe(\n      /**\n      * @return {?}\n      */\n      function () {\n        return _this.invokeBootstrap(\n        /** @type {?} */\n        results.states);\n      });\n    };\n    /**\n     * Invoke the init function on the states.\n     */\n\n    /**\n     * Invoke the init function on the states.\n     * @param {?} mappedStores\n     * @return {?}\n     */\n\n\n    LifecycleStateManager.prototype.invokeInit =\n    /**\n    * Invoke the init function on the states.\n    * @param {?} mappedStores\n    * @return {?}\n    */\n    function (mappedStores) {\n      var e_1, _a;\n\n      try {\n        for (var mappedStores_1 = __values(mappedStores), mappedStores_1_1 = mappedStores_1.next(); !mappedStores_1_1.done; mappedStores_1_1 = mappedStores_1.next()) {\n          var mappedStore = mappedStores_1_1.value;\n          /** @type {?} */\n\n          var instance = mappedStore.instance;\n\n          if (instance.ngxsOnChanges) {\n            /** @type {?} */\n            var currentAppState = {};\n            /** @type {?} */\n\n            var newAppState = this.internalStateOperations.getRootStateOperations().getState();\n            /** @type {?} */\n\n            var firstDiffChange = getStateDiffChanges(mappedStore, {\n              currentAppState: currentAppState,\n              newAppState: newAppState\n            });\n            instance.ngxsOnChanges(firstDiffChange);\n          }\n\n          if (instance.ngxsOnInit) {\n            instance.ngxsOnInit(this.getStateContext(mappedStore));\n          }\n\n          mappedStore.isInitialised = true;\n        }\n      } catch (e_1_1) {\n        e_1 = {\n          error: e_1_1\n        };\n      } finally {\n        try {\n          if (mappedStores_1_1 && !mappedStores_1_1.done && (_a = mappedStores_1.return)) _a.call(mappedStores_1);\n        } finally {\n          if (e_1) throw e_1.error;\n        }\n      }\n    };\n    /**\n     * Invoke the bootstrap function on the states.\n     */\n\n    /**\n     * Invoke the bootstrap function on the states.\n     * @param {?} mappedStores\n     * @return {?}\n     */\n\n\n    LifecycleStateManager.prototype.invokeBootstrap =\n    /**\n    * Invoke the bootstrap function on the states.\n    * @param {?} mappedStores\n    * @return {?}\n    */\n    function (mappedStores) {\n      var e_2, _a;\n\n      try {\n        for (var mappedStores_2 = __values(mappedStores), mappedStores_2_1 = mappedStores_2.next(); !mappedStores_2_1.done; mappedStores_2_1 = mappedStores_2.next()) {\n          var mappedStore = mappedStores_2_1.value;\n          /** @type {?} */\n\n          var instance = mappedStore.instance;\n\n          if (instance.ngxsAfterBootstrap) {\n            instance.ngxsAfterBootstrap(this.getStateContext(mappedStore));\n          }\n        }\n      } catch (e_2_1) {\n        e_2 = {\n          error: e_2_1\n        };\n      } finally {\n        try {\n          if (mappedStores_2_1 && !mappedStores_2_1.done && (_a = mappedStores_2.return)) _a.call(mappedStores_2);\n        } finally {\n          if (e_2) throw e_2.error;\n        }\n      }\n    };\n    /**\n     * @private\n     * @param {?} mappedStore\n     * @return {?}\n     */\n\n\n    LifecycleStateManager.prototype.getStateContext =\n    /**\n    * @private\n    * @param {?} mappedStore\n    * @return {?}\n    */\n    function (mappedStore) {\n      return this.stateContextFactory.createStateContext(mappedStore);\n    };\n\n    LifecycleStateManager.decorators = [{\n      type: core.Injectable\n    }];\n    /** @nocollapse */\n\n    LifecycleStateManager.ctorParameters = function () {\n      return [{\n        type: InternalStateOperations\n      }, {\n        type: StateContextFactory\n      }, {\n        type: internals.NgxsBootstrapper\n      }];\n    };\n\n    return LifecycleStateManager;\n  }();\n\n  if (false) {\n    /**\n     * @type {?}\n     * @private\n     */\n    LifecycleStateManager.prototype.internalStateOperations;\n    /**\n     * @type {?}\n     * @private\n     */\n\n    LifecycleStateManager.prototype.stateContextFactory;\n    /**\n     * @type {?}\n     * @private\n     */\n\n    LifecycleStateManager.prototype.bootstrapper;\n  }\n  /**\n   * @fileoverview added by tsickle\n   * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n   */\n\n  /** @type {?} */\n\n\n  var SELECTOR_OPTIONS_META_KEY = 'NGXS_SELECTOR_OPTIONS_META';\n  /** @type {?} */\n\n  var selectorOptionsMetaAccessor = {\n    getOptions:\n    /**\n    * @param {?} target\n    * @return {?}\n    */\n    function (target) {\n      return target &&\n      /** @type {?} */\n      target[SELECTOR_OPTIONS_META_KEY] || {};\n    },\n    defineOptions:\n    /**\n    * @param {?} target\n    * @param {?} options\n    * @return {?}\n    */\n    function (target, options) {\n      if (!target) return;\n\n      /** @type {?} */\n      target[SELECTOR_OPTIONS_META_KEY] = options;\n    }\n  };\n  /**\n   * @record\n   */\n\n  function CreationMetadata() {}\n\n  if (false) {\n    /** @type {?} */\n    CreationMetadata.prototype.containerClass;\n    /** @type {?} */\n\n    CreationMetadata.prototype.selectorName;\n    /** @type {?|undefined} */\n\n    CreationMetadata.prototype.getSelectorOptions;\n  }\n  /**\n   * @record\n   */\n\n\n  function RuntimeSelectorInfo() {}\n\n  if (false) {\n    /** @type {?} */\n    RuntimeSelectorInfo.prototype.selectorOptions;\n    /** @type {?} */\n\n    RuntimeSelectorInfo.prototype.argumentSelectorFunctions;\n  }\n  /**\n   * Function for creating a selector\n   * @template T\n   * @param {?} selectors The selectors to use to create the arguments of this function\n   * @param {?} originalFn The original function being made into a selector\n   * @param {?=} creationMetadata\n   * @return {?}\n   */\n\n\n  function createSelector(selectors, originalFn, creationMetadata) {\n    /** @type {?} */\n    var containerClass = creationMetadata && creationMetadata.containerClass;\n    /** @type {?} */\n\n    var wrappedFn =\n    /** @type {?} */\n\n    /**\n    * @param {...?} args\n    * @return {?}\n    */\n    function wrappedSelectorFn() {\n      var args = [];\n\n      for (var _i = 0; _i < arguments.length; _i++) {\n        args[_i] = arguments[_i];\n      }\n      /** @type {?} */\n\n\n      var returnValue = originalFn.apply(containerClass, args);\n\n      if (returnValue instanceof Function) {\n        /** @type {?} */\n        var innerMemoizedFn = internals.memoize.apply(null, [returnValue]);\n        return innerMemoizedFn;\n      }\n\n      return returnValue;\n    };\n    /** @type {?} */\n\n\n    var memoizedFn = internals.memoize(wrappedFn);\n    Object.setPrototypeOf(memoizedFn, originalFn);\n    /** @type {?} */\n\n    var selectorMetaData = setupSelectorMetadata(originalFn, creationMetadata);\n    /** @type {?} */\n\n    var makeRootSelector =\n    /**\n    * @param {?} context\n    * @return {?}\n    */\n    function (context) {\n      var _a = getRuntimeSelectorInfo(context, selectorMetaData, selectors),\n          argumentSelectorFunctions = _a.argumentSelectorFunctions,\n          selectorOptions = _a.selectorOptions;\n\n      return (\n        /**\n        * @param {?} rootState\n        * @return {?}\n        */\n        function selectFromRoot(rootState) {\n          // Determine arguments from the app state using the selectors\n\n          /** @type {?} */\n          var results = argumentSelectorFunctions.map(\n          /**\n          * @param {?} argFn\n          * @return {?}\n          */\n          function (argFn) {\n            return argFn(rootState);\n          }); // if the lambda tries to access a something on the\n          // state that doesn't exist, it will throw a TypeError.\n          // since this is quite usual behaviour, we simply return undefined if so.\n\n          try {\n            return memoizedFn.apply(void 0, __spread(results));\n          } catch (ex) {\n            if (ex instanceof TypeError && selectorOptions.suppressErrors) {\n              return undefined;\n            }\n\n            throw ex;\n          }\n        }\n      );\n    };\n\n    selectorMetaData.makeRootSelector = makeRootSelector;\n    return memoizedFn;\n  }\n  /**\n   * @template T\n   * @param {?} originalFn\n   * @param {?} creationMetadata\n   * @return {?}\n   */\n\n\n  function setupSelectorMetadata(originalFn, creationMetadata) {\n    /** @type {?} */\n    var selectorMetaData = ensureSelectorMetadata(originalFn);\n    selectorMetaData.originalFn = originalFn;\n    /** @type {?} */\n\n    var getExplicitSelectorOptions =\n    /**\n    * @return {?}\n    */\n    function () {\n      return {};\n    };\n\n    if (creationMetadata) {\n      selectorMetaData.containerClass = creationMetadata.containerClass;\n      selectorMetaData.selectorName = creationMetadata.selectorName;\n      getExplicitSelectorOptions = creationMetadata.getSelectorOptions || getExplicitSelectorOptions;\n    }\n    /** @type {?} */\n\n\n    var selectorMetaDataClone = __assign({}, selectorMetaData);\n\n    selectorMetaData.getSelectorOptions =\n    /**\n    * @return {?}\n    */\n    function () {\n      return getLocalSelectorOptions(selectorMetaDataClone, getExplicitSelectorOptions());\n    };\n\n    return selectorMetaData;\n  }\n  /**\n   * @param {?} context\n   * @param {?} selectorMetaData\n   * @param {?=} selectors\n   * @return {?}\n   */\n\n\n  function getRuntimeSelectorInfo(context, selectorMetaData, selectors) {\n    if (selectors === void 0) {\n      selectors = [];\n    }\n    /** @type {?} */\n\n\n    var localSelectorOptions = selectorMetaData.getSelectorOptions();\n    /** @type {?} */\n\n    var selectorOptions = context.getSelectorOptions(localSelectorOptions);\n    /** @type {?} */\n\n    var selectorsToApply = getSelectorsToApply(selectors, selectorOptions, selectorMetaData.containerClass);\n    /** @type {?} */\n\n    var argumentSelectorFunctions = selectorsToApply.map(\n    /**\n    * @param {?} selector\n    * @return {?}\n    */\n    function (selector) {\n      /** @type {?} */\n      var factory = getRootSelectorFactory(selector);\n      return factory(context);\n    });\n    return {\n      selectorOptions: selectorOptions,\n      argumentSelectorFunctions: argumentSelectorFunctions\n    };\n  }\n  /**\n   * @param {?} selectorMetaData\n   * @param {?} explicitOptions\n   * @return {?}\n   */\n\n\n  function getLocalSelectorOptions(selectorMetaData, explicitOptions) {\n    return __assign({}, selectorOptionsMetaAccessor.getOptions(selectorMetaData.containerClass) || {}, selectorOptionsMetaAccessor.getOptions(selectorMetaData.originalFn) || {}, selectorMetaData.getSelectorOptions() || {}, explicitOptions);\n  }\n  /**\n   * @param {?=} selectors\n   * @param {?=} selectorOptions\n   * @param {?=} containerClass\n   * @return {?}\n   */\n\n\n  function getSelectorsToApply(selectors, selectorOptions, containerClass) {\n    if (selectors === void 0) {\n      selectors = [];\n    }\n    /** @type {?} */\n\n\n    var selectorsToApply = [];\n    /** @type {?} */\n\n    var canInjectContainerState = selectors.length === 0 || selectorOptions.injectContainerState;\n\n    if (containerClass && canInjectContainerState) {\n      // If we are on a state class, add it as the first selector parameter\n\n      /** @type {?} */\n      var metadata = getStoreMetadata(containerClass);\n\n      if (metadata) {\n        selectorsToApply.push(containerClass);\n      }\n    }\n\n    if (selectors) {\n      selectorsToApply.push.apply(selectorsToApply, __spread(selectors));\n    }\n\n    return selectorsToApply;\n  }\n  /**\n   * This function gets the factory function to create the selector to get the selected slice from the app state\n   * @ignore\n   * @param {?} selector\n   * @return {?}\n   */\n\n\n  function getRootSelectorFactory(selector) {\n    /** @type {?} */\n    var metadata = getSelectorMetadata(selector) || getStoreMetadata(selector);\n    return metadata && metadata.makeRootSelector ||\n    /**\n    * @return {?}\n    */\n    function () {\n      return selector;\n    };\n  }\n  /**\n   * @fileoverview added by tsickle\n   * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n   */\n\n\n  var Store =\n  /** @class */\n  function () {\n    function Store(_stateStream, _internalStateOperations, _config, _internalExecutionStrategy, _stateFactory, initialStateValue) {\n      this._stateStream = _stateStream;\n      this._internalStateOperations = _internalStateOperations;\n      this._config = _config;\n      this._internalExecutionStrategy = _internalExecutionStrategy;\n      this._stateFactory = _stateFactory;\n      this.initStateStream(initialStateValue);\n    }\n    /**\n     * Dispatches event(s).\n     */\n\n    /**\n     * Dispatches event(s).\n     * @param {?} actionOrActions\n     * @return {?}\n     */\n\n\n    Store.prototype.dispatch =\n    /**\n    * Dispatches event(s).\n    * @param {?} actionOrActions\n    * @return {?}\n    */\n    function (actionOrActions) {\n      return this._internalStateOperations.getRootStateOperations().dispatch(actionOrActions);\n    };\n    /**\n     * @param {?} selector\n     * @return {?}\n     */\n\n\n    Store.prototype.select =\n    /**\n    * @param {?} selector\n    * @return {?}\n    */\n    function (selector) {\n      var _this = this;\n      /** @type {?} */\n\n\n      var selectorFn = this.getStoreBoundSelectorFn(selector);\n      return this._stateStream.pipe(operators.map(selectorFn), operators.catchError(\n      /**\n      * @param {?} err\n      * @return {?}\n      */\n      function (err) {\n        // if error is TypeError we swallow it to prevent usual errors with property access\n        var suppressErrors = _this._config.selectorOptions.suppressErrors;\n\n        if (err instanceof TypeError && suppressErrors) {\n          return rxjs.of(undefined);\n        } // rethrow other errors\n\n\n        return rxjs.throwError(err);\n      }), operators.distinctUntilChanged(), leaveNgxs(this._internalExecutionStrategy));\n    };\n    /**\n     * @param {?} selector\n     * @return {?}\n     */\n\n\n    Store.prototype.selectOnce =\n    /**\n    * @param {?} selector\n    * @return {?}\n    */\n    function (selector) {\n      return this.select(selector).pipe(operators.take(1));\n    };\n    /**\n     * @param {?} selector\n     * @return {?}\n     */\n\n\n    Store.prototype.selectSnapshot =\n    /**\n    * @param {?} selector\n    * @return {?}\n    */\n    function (selector) {\n      /** @type {?} */\n      var selectorFn = this.getStoreBoundSelectorFn(selector);\n      return selectorFn(this._stateStream.getValue());\n    };\n    /**\n     * Allow the user to subscribe to the root of the state\n     */\n\n    /**\n     * Allow the user to subscribe to the root of the state\n     * @param {?=} fn\n     * @return {?}\n     */\n\n\n    Store.prototype.subscribe =\n    /**\n    * Allow the user to subscribe to the root of the state\n    * @param {?=} fn\n    * @return {?}\n    */\n    function (fn) {\n      return this._stateStream.pipe(leaveNgxs(this._internalExecutionStrategy)).subscribe(fn);\n    };\n    /**\n     * Return the raw value of the state.\n     */\n\n    /**\n     * Return the raw value of the state.\n     * @return {?}\n     */\n\n\n    Store.prototype.snapshot =\n    /**\n    * Return the raw value of the state.\n    * @return {?}\n    */\n    function () {\n      return this._internalStateOperations.getRootStateOperations().getState();\n    };\n    /**\n     * Reset the state to a specific point in time. This method is useful\n     * for plugin's who need to modify the state directly or unit testing.\n     */\n\n    /**\n     * Reset the state to a specific point in time. This method is useful\n     * for plugin's who need to modify the state directly or unit testing.\n     * @param {?} state\n     * @return {?}\n     */\n\n\n    Store.prototype.reset =\n    /**\n    * Reset the state to a specific point in time. This method is useful\n    * for plugin's who need to modify the state directly or unit testing.\n    * @param {?} state\n    * @return {?}\n    */\n    function (state) {\n      return this._internalStateOperations.getRootStateOperations().setState(state);\n    };\n    /**\n     * @private\n     * @param {?} selector\n     * @return {?}\n     */\n\n\n    Store.prototype.getStoreBoundSelectorFn =\n    /**\n    * @private\n    * @param {?} selector\n    * @return {?}\n    */\n    function (selector) {\n      /** @type {?} */\n      var makeSelectorFn = getRootSelectorFactory(selector);\n      /** @type {?} */\n\n      var runtimeContext = this._stateFactory.getRuntimeSelectorContext();\n\n      return makeSelectorFn(runtimeContext);\n    };\n    /**\n     * @private\n     * @param {?} initialStateValue\n     * @return {?}\n     */\n\n\n    Store.prototype.initStateStream =\n    /**\n    * @private\n    * @param {?} initialStateValue\n    * @return {?}\n    */\n    function (initialStateValue) {\n      /** @type {?} */\n      var value = this._stateStream.value;\n      /** @type {?} */\n\n      var storeIsEmpty = !value || Object.keys(value).length === 0;\n\n      if (storeIsEmpty) {\n        /** @type {?} */\n        var defaultStateNotEmpty = Object.keys(this._config.defaultsState).length > 0;\n        /** @type {?} */\n\n        var storeValues = defaultStateNotEmpty ? __assign({}, this._config.defaultsState, initialStateValue) : initialStateValue;\n\n        this._stateStream.next(storeValues);\n      }\n    };\n\n    Store.decorators = [{\n      type: core.Injectable\n    }];\n    /** @nocollapse */\n\n    Store.ctorParameters = function () {\n      return [{\n        type: StateStream\n      }, {\n        type: InternalStateOperations\n      }, {\n        type: NgxsConfig\n      }, {\n        type: InternalNgxsExecutionStrategy\n      }, {\n        type: StateFactory\n      }, {\n        type: undefined,\n        decorators: [{\n          type: core.Optional\n        }, {\n          type: core.Inject,\n          args: [internals.INITIAL_STATE_TOKEN]\n        }]\n      }];\n    };\n\n    return Store;\n  }();\n\n  if (false) {\n    /**\n     * @type {?}\n     * @private\n     */\n    Store.prototype._stateStream;\n    /**\n     * @type {?}\n     * @private\n     */\n\n    Store.prototype._internalStateOperations;\n    /**\n     * @type {?}\n     * @private\n     */\n\n    Store.prototype._config;\n    /**\n     * @type {?}\n     * @private\n     */\n\n    Store.prototype._internalExecutionStrategy;\n    /**\n     * @type {?}\n     * @private\n     */\n\n    Store.prototype._stateFactory;\n  }\n  /**\n   * @fileoverview added by tsickle\n   * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n   */\n\n  /**\n   * Allows the select decorator to get access to the DI store, this is used internally\n   * in `\\@Select` decorator.\n   */\n\n\n  var SelectFactory =\n  /** @class */\n  function () {\n    function SelectFactory(store, config) {\n      SelectFactory.store = store;\n      SelectFactory.config = config;\n    }\n    /**\n     * @return {?}\n     */\n\n\n    SelectFactory.prototype.ngOnDestroy =\n    /**\n    * @return {?}\n    */\n    function () {\n      SelectFactory.store = null;\n      SelectFactory.config = null;\n    };\n\n    SelectFactory.store = null;\n    SelectFactory.config = null;\n    SelectFactory.decorators = [{\n      type: core.Injectable,\n      args: [{\n        providedIn: 'root'\n      }]\n    }];\n    /** @nocollapse */\n\n    SelectFactory.ctorParameters = function () {\n      return [{\n        type: Store\n      }, {\n        type: NgxsConfig\n      }];\n    };\n    /** @nocollapse */\n\n\n    SelectFactory.ngInjectableDef = core.defineInjectable({\n      factory: function SelectFactory_Factory() {\n        return new SelectFactory(core.inject(Store), core.inject(NgxsConfig));\n      },\n      token: SelectFactory,\n      providedIn: \"root\"\n    });\n    return SelectFactory;\n  }();\n\n  if (false) {\n    /** @type {?} */\n    SelectFactory.store;\n    /** @type {?} */\n\n    SelectFactory.config;\n  }\n  /**\n   * @fileoverview added by tsickle\n   * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n   */\n\n  /**\n   * Init action\n   */\n\n\n  var\n  /**\n  * Init action\n  */\n  InitState =\n  /** @class */\n  function () {\n    function InitState() {}\n\n    Object.defineProperty(InitState, \"type\", {\n      get:\n      /**\n      * @return {?}\n      */\n      function () {\n        // NOTE: Not necessary to declare the type in this way in your code. See https://github.com/ngxs/store/pull/644#issuecomment-436003138\n        return '@@INIT';\n      },\n      enumerable: true,\n      configurable: true\n    });\n    return InitState;\n  }();\n  /**\n   * Update action\n   */\n\n\n  var\n  /**\n  * Update action\n  */\n  UpdateState =\n  /** @class */\n  function () {\n    function UpdateState(addedStates) {\n      this.addedStates = addedStates;\n    }\n\n    Object.defineProperty(UpdateState, \"type\", {\n      get:\n      /**\n      * @return {?}\n      */\n      function () {\n        // NOTE: Not necessary to declare the type in this way in your code. See https://github.com/ngxs/store/pull/644#issuecomment-436003138\n        return '@@UPDATE_STATE';\n      },\n      enumerable: true,\n      configurable: true\n    });\n    return UpdateState;\n  }();\n\n  if (false) {\n    /** @type {?} */\n    UpdateState.prototype.addedStates;\n  }\n  /**\n   * @fileoverview added by tsickle\n   * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n   */\n\n  /**\n   * Root module\n   * @ignore\n   */\n\n\n  var NgxsRootModule =\n  /** @class */\n  function () {\n    function NgxsRootModule(factory, internalStateOperations, _store, injector, states, lifecycleStateManager) {\n      if (states === void 0) {\n        states = [];\n      } // If the user is running View Engine then we create the `SelectFactory` instance,\n      // otherwise it'll be tree-shaken away in Ivy.\n\n\n      !core.ÉµivyEnabled && injector.get(SelectFactory); // Add stores to the state graph and return their defaults\n\n      /** @type {?} */\n\n      var results = factory.addAndReturnDefaults(states);\n      internalStateOperations.setStateToTheCurrentWithNew(results); // Connect our actions stream\n\n      factory.connectActionHandlers(); // Dispatch the init action and invoke init and bootstrap functions after\n\n      lifecycleStateManager.ngxsBootstrap(new InitState(), results);\n    }\n\n    NgxsRootModule.decorators = [{\n      type: core.NgModule\n    }];\n    /** @nocollapse */\n\n    NgxsRootModule.ctorParameters = function () {\n      return [{\n        type: StateFactory\n      }, {\n        type: InternalStateOperations\n      }, {\n        type: Store\n      }, {\n        type: core.Injector\n      }, {\n        type: Array,\n        decorators: [{\n          type: core.Optional\n        }, {\n          type: core.Inject,\n          args: [ROOT_STATE_TOKEN]\n        }]\n      }, {\n        type: LifecycleStateManager\n      }];\n    };\n\n    return NgxsRootModule;\n  }();\n  /**\n   * @fileoverview added by tsickle\n   * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n   */\n\n  /**\n   * Feature module\n   * @ignore\n   */\n\n\n  var NgxsFeatureModule =\n  /** @class */\n  function () {\n    function NgxsFeatureModule(_store, internalStateOperations, factory, states, lifecycleStateManager) {\n      if (states === void 0) {\n        states = [];\n      } // Since FEATURE_STATE_TOKEN is a multi token, we need to\n      // flatten it [[Feature1State, Feature2State], [Feature3State]]\n\n      /** @type {?} */\n\n\n      var flattenedStates = NgxsFeatureModule.flattenStates(states); // add stores to the state graph and return their defaults\n\n      /** @type {?} */\n\n      var results = factory.addAndReturnDefaults(flattenedStates);\n\n      if (results.states.length) {\n        internalStateOperations.setStateToTheCurrentWithNew(results); // dispatch the update action and invoke init and bootstrap functions after\n\n        lifecycleStateManager.ngxsBootstrap(new UpdateState(results.defaults), results);\n      }\n    }\n    /**\n     * @private\n     * @param {?=} states\n     * @return {?}\n     */\n\n\n    NgxsFeatureModule.flattenStates =\n    /**\n    * @private\n    * @param {?=} states\n    * @return {?}\n    */\n    function (states) {\n      if (states === void 0) {\n        states = [];\n      }\n\n      return states.reduce(\n      /**\n      * @param {?} total\n      * @param {?} values\n      * @return {?}\n      */\n      function (total, values) {\n        return total.concat(values);\n      }, []);\n    };\n\n    NgxsFeatureModule.decorators = [{\n      type: core.NgModule\n    }];\n    /** @nocollapse */\n\n    NgxsFeatureModule.ctorParameters = function () {\n      return [{\n        type: Store\n      }, {\n        type: InternalStateOperations\n      }, {\n        type: StateFactory\n      }, {\n        type: Array,\n        decorators: [{\n          type: core.Optional\n        }, {\n          type: core.Inject,\n          args: [FEATURE_STATE_TOKEN]\n        }]\n      }, {\n        type: LifecycleStateManager\n      }];\n    };\n\n    return NgxsFeatureModule;\n  }();\n  /**\n   * @fileoverview added by tsickle\n   * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n   */\n\n  /**\n   * Ngxs Module\n   */\n\n\n  var NgxsModule =\n  /** @class */\n  function () {\n    function NgxsModule() {}\n    /**\n     * Root module factory\n     */\n\n    /**\n     * Root module factory\n     * @param {?=} states\n     * @param {?=} options\n     * @return {?}\n     */\n\n\n    NgxsModule.forRoot =\n    /**\n    * Root module factory\n    * @param {?=} states\n    * @param {?=} options\n    * @return {?}\n    */\n    function (states, options) {\n      if (states === void 0) {\n        states = [];\n      }\n\n      if (options === void 0) {\n        options = {};\n      }\n\n      return {\n        ngModule: NgxsRootModule,\n        providers: __spread([StateFactory, StateContextFactory, Actions, InternalActions, internals.NgxsBootstrapper, LifecycleStateManager, InternalDispatcher, InternalDispatchedActionResults, InternalStateOperations, InternalNgxsExecutionStrategy, Store, StateStream, PluginManager], states, NgxsModule.ngxsTokenProviders(states, options))\n      };\n    };\n    /**\n     * Feature module factory\n     */\n\n    /**\n     * Feature module factory\n     * @param {?=} states\n     * @return {?}\n     */\n\n\n    NgxsModule.forFeature =\n    /**\n    * Feature module factory\n    * @param {?=} states\n    * @return {?}\n    */\n    function (states) {\n      if (states === void 0) {\n        states = [];\n      }\n\n      return {\n        ngModule: NgxsFeatureModule,\n        providers: __spread([StateFactory, PluginManager], states, [{\n          provide: FEATURE_STATE_TOKEN,\n          multi: true,\n          useValue: states\n        }])\n      };\n    };\n    /**\n     * @private\n     * @param {?} states\n     * @param {?} options\n     * @return {?}\n     */\n\n\n    NgxsModule.ngxsTokenProviders =\n    /**\n    * @private\n    * @param {?} states\n    * @param {?} options\n    * @return {?}\n    */\n    function (states, options) {\n      return [{\n        provide: USER_PROVIDED_NGXS_EXECUTION_STRATEGY,\n        useValue: options.executionStrategy\n      }, {\n        provide: ROOT_STATE_TOKEN,\n        useValue: states\n      }, {\n        provide: NgxsModule.ROOT_OPTIONS,\n        useValue: options\n      }, {\n        provide: NgxsConfig,\n        useFactory: NgxsModule.ngxsConfigFactory,\n        deps: [NgxsModule.ROOT_OPTIONS]\n      }, {\n        provide: core.APP_BOOTSTRAP_LISTENER,\n        useFactory: NgxsModule.appBootstrapListenerFactory,\n        multi: true,\n        deps: [internals.NgxsBootstrapper]\n      }, {\n        provide: internals.INITIAL_STATE_TOKEN,\n        useFactory: NgxsModule.getInitialState\n      }, {\n        provide: internals.NGXS_STATE_CONTEXT_FACTORY,\n        useExisting: StateContextFactory\n      }, {\n        provide: internals.NGXS_STATE_FACTORY,\n        useExisting: StateFactory\n      }];\n    };\n    /**\n     * @private\n     * @param {?} options\n     * @return {?}\n     */\n\n\n    NgxsModule.ngxsConfigFactory =\n    /**\n    * @private\n    * @param {?} options\n    * @return {?}\n    */\n    function (options) {\n      return mergeDeep(new NgxsConfig(), options);\n    };\n    /**\n     * @private\n     * @param {?} bootstrapper\n     * @return {?}\n     */\n\n\n    NgxsModule.appBootstrapListenerFactory =\n    /**\n    * @private\n    * @param {?} bootstrapper\n    * @return {?}\n    */\n    function (bootstrapper) {\n      return (\n        /**\n        * @return {?}\n        */\n        function () {\n          return bootstrapper.bootstrap();\n        }\n      );\n    };\n    /**\n     * @private\n     * @return {?}\n     */\n\n\n    NgxsModule.getInitialState =\n    /**\n    * @private\n    * @return {?}\n    */\n    function () {\n      return internals.InitialState.pop();\n    };\n\n    NgxsModule.ROOT_OPTIONS = new core.InjectionToken('ROOT_OPTIONS');\n    NgxsModule.decorators = [{\n      type: core.NgModule\n    }];\n    return NgxsModule;\n  }();\n\n  if (false) {\n    /**\n     * @type {?}\n     * @private\n     */\n    NgxsModule.ROOT_OPTIONS;\n  }\n  /**\n   * @fileoverview added by tsickle\n   * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n   */\n\n  /**\n   * Decorates a method with a action information.\n   * @param {?} actions\n   * @param {?=} options\n   * @return {?}\n   */\n\n\n  function Action(actions, options) {\n    return (\n      /**\n      * @param {?} target\n      * @param {?} name\n      * @return {?}\n      */\n      function (target, name) {\n        var e_1, _a; // Caretaker note: we have still left the `typeof` condition in order to avoid\n        // creating a breaking change for projects that still use the View Engine.\n\n\n        if (typeof ngDevMode === 'undefined' || ngDevMode) {\n          /** @type {?} */\n          var isStaticMethod = target.hasOwnProperty('prototype');\n\n          if (isStaticMethod) {\n            throwActionDecoratorError();\n          }\n        }\n        /** @type {?} */\n\n\n        var meta = ensureStoreMetadata(target.constructor);\n\n        if (!Array.isArray(actions)) {\n          actions = [actions];\n        }\n\n        try {\n          for (var actions_1 = __values(actions), actions_1_1 = actions_1.next(); !actions_1_1.done; actions_1_1 = actions_1.next()) {\n            var action = actions_1_1.value;\n            /** @type {?} */\n\n            var type = action.type;\n\n            if (!meta.actions[type]) {\n              meta.actions[type] = [];\n            }\n\n            meta.actions[type].push({\n              fn: name,\n              options: options || {},\n              type: type\n            });\n          }\n        } catch (e_1_1) {\n          e_1 = {\n            error: e_1_1\n          };\n        } finally {\n          try {\n            if (actions_1_1 && !actions_1_1.done && (_a = actions_1.return)) _a.call(actions_1);\n          } finally {\n            if (e_1) throw e_1.error;\n          }\n        }\n      }\n    );\n  }\n  /**\n   * @fileoverview added by tsickle\n   * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n   */\n\n  /**\n   * All provided or injected tokens must have `\\@Injectable` decorator\n   * (previously, injected tokens without `\\@Injectable` were allowed\n   * if another decorator was used, e.g. pipes).\n   * @param {?} target\n   * @return {?}\n   */\n\n\n  function ensureStateClassIsInjectable(target) {\n    // `Éµprov` is a static property added by the NGCC compiler. It always exists in\n    // AOT mode because this property is added before runtime. If an application is running in\n    // JIT mode then this property can be added by the `@Injectable()` decorator. The `@Injectable()`\n    // decorator has to go after the `@State()` decorator, thus we prevent users from unwanted DI errors.\n    if (core.ÉµivyEnabled) {\n      /** @type {?} */\n\n      /** @nocollapse */\n      var ngInjectableDef = target.Éµprov;\n\n      if (!ngInjectableDef) {\n        // Don't warn if Ivy is disabled or `Éµprov` exists on the class\n        console.warn(getUndecoratedStateInIvyWarningMessage(target.name));\n      }\n    }\n  }\n  /**\n   * @fileoverview added by tsickle\n   * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n   */\n\n  /**\n   * @record\n   * @template T\n   */\n\n\n  function MutateMetaOptions() {}\n\n  if (false) {\n    /** @type {?} */\n    MutateMetaOptions.prototype.meta;\n    /** @type {?} */\n\n    MutateMetaOptions.prototype.inheritedStateClass;\n    /** @type {?} */\n\n    MutateMetaOptions.prototype.optionsWithInheritance;\n  }\n  /**\n   * Decorates a class with ngxs state information.\n   * @template T\n   * @param {?} options\n   * @return {?}\n   */\n\n\n  function State(options) {\n    /**\n     * @param {?} inheritedStateClass\n     * @return {?}\n     */\n    function getStateOptions(inheritedStateClass) {\n      /** @type {?} */\n      var inheritanceOptions = inheritedStateClass[META_OPTIONS_KEY] || {};\n      return (\n        /** @type {?} */\n        __assign({}, inheritanceOptions, options)\n      );\n    }\n    /**\n     * @param {?} params\n     * @return {?}\n     */\n\n\n    function mutateMetaData(params) {\n      var meta = params.meta,\n          inheritedStateClass = params.inheritedStateClass,\n          optionsWithInheritance = params.optionsWithInheritance;\n      var children = optionsWithInheritance.children,\n          defaults = optionsWithInheritance.defaults,\n          name = optionsWithInheritance.name;\n      /** @type {?} */\n\n      var stateName = typeof name === 'string' ? name : name && name.getName() || null; // Caretaker note: we have still left the `typeof` condition in order to avoid\n      // creating a breaking change for projects that still use the View Engine.\n\n      if (typeof ngDevMode === 'undefined' || ngDevMode) {\n        StoreValidators.checkThatStateIsNamedCorrectly(stateName);\n      }\n\n      if (inheritedStateClass.hasOwnProperty(META_KEY)) {\n        /** @type {?} */\n        var inheritedMeta = inheritedStateClass[META_KEY] || {};\n        meta.actions = __assign({}, meta.actions, inheritedMeta.actions);\n      }\n\n      meta.children = children;\n      meta.defaults = defaults;\n      meta.name = stateName;\n    }\n\n    return (\n      /**\n      * @param {?} target\n      * @return {?}\n      */\n      function (target) {\n        // Caretaker note: we have still left the `typeof` condition in order to avoid\n        // creating a breaking change for projects that still use the View Engine.\n        if (typeof ngDevMode === 'undefined' || ngDevMode) {\n          ensureStateClassIsInjectable(target);\n        }\n        /** @type {?} */\n\n\n        var stateClass = target;\n        /** @type {?} */\n\n        var meta = ensureStoreMetadata(stateClass);\n        /** @type {?} */\n\n        var inheritedStateClass = Object.getPrototypeOf(stateClass);\n        /** @type {?} */\n\n        var optionsWithInheritance = getStateOptions(inheritedStateClass);\n        mutateMetaData({\n          meta: meta,\n          inheritedStateClass: inheritedStateClass,\n          optionsWithInheritance: optionsWithInheritance\n        });\n        stateClass[META_OPTIONS_KEY] = optionsWithInheritance;\n      }\n    );\n  }\n  /**\n   * @fileoverview added by tsickle\n   * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n   */\n\n  /** @type {?} */\n\n\n  var DOLLAR_CHAR_CODE = 36;\n  /**\n   * @template T\n   * @param {?} selector\n   * @param {?} store\n   * @return {?}\n   */\n\n  function createSelectObservable(selector, store) {\n    // We're doing this stuff to tree-shake the `SelectFactory` when the user\n    // is running Ivy since NGXS will select the state from the provided `store` argument.\n    return core.ÉµivyEnabled ? createSelectObservableIvy(selector, store) : createSelectObservableViewEngine(selector);\n  }\n  /**\n   * @param {?} config\n   * @param {?} name\n   * @param {?=} rawSelector\n   * @param {?=} paths\n   * @return {?}\n   */\n\n\n  function createSelectorFn(config, name, rawSelector, paths) {\n    if (paths === void 0) {\n      paths = [];\n    }\n\n    rawSelector = rawSelector || removeDollarAtTheEnd(name);\n\n    if (typeof rawSelector !== 'string') {\n      return rawSelector;\n    } else {\n      /** @type {?} */\n      var propsArray = paths.length ? __spread([rawSelector], paths) : rawSelector.split('.');\n      return core.ÉµivyEnabled ? createSelectorFnIvy(propsArray, config) : createSelectorFnViewEngine(propsArray);\n    }\n  }\n  /**\n   * \\@example If `foo$` => make it just `foo`\n   * @param {?} name\n   * @return {?}\n   */\n\n\n  function removeDollarAtTheEnd(name) {\n    /** @type {?} */\n    var lastCharIndex = name.length - 1;\n    /** @type {?} */\n\n    var dollarAtTheEnd = name.charCodeAt(lastCharIndex) === DOLLAR_CHAR_CODE;\n    return dollarAtTheEnd ? name.slice(0, lastCharIndex) : name;\n  }\n  /**\n   * @template T\n   * @param {?} selector\n   * @param {?} store\n   * @return {?}\n   */\n\n\n  function createSelectObservableIvy(selector, store) {\n    return ngDevMode && !store ? throwSelectFactoryNotConnectedError() :\n    /** @type {?} */\n    store.select(selector);\n  }\n  /**\n   * @template T\n   * @param {?} selector\n   * @return {?}\n   */\n\n\n  function createSelectObservableViewEngine(selector) {\n    return SelectFactory.store ? SelectFactory.store.select(selector) : throwSelectFactoryNotConnectedError();\n  }\n  /**\n   * @param {?} propsArray\n   * @param {?} config\n   * @return {?}\n   */\n\n\n  function createSelectorFnIvy(propsArray, config) {\n    return ngDevMode && !config ? throwSelectFactoryNotConnectedError() : propGetter(propsArray,\n    /** @type {?} */\n    config);\n  }\n  /**\n   * @param {?} propsArray\n   * @return {?}\n   */\n\n\n  function createSelectorFnViewEngine(propsArray) {\n    return propGetter(propsArray,\n    /** @type {?} */\n    SelectFactory.config);\n  }\n  /**\n   * @fileoverview added by tsickle\n   * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n   */\n\n  /**\n   * Decorator for selecting a slice of state from the store.\n   * @template T\n   * @param {?=} rawSelector\n   * @param {...?} paths\n   * @return {?}\n   */\n\n\n  function Select(rawSelector) {\n    var paths = [];\n\n    for (var _i = 1; _i < arguments.length; _i++) {\n      paths[_i - 1] = arguments[_i];\n    }\n\n    return (\n      /**\n      * @param {?} target\n      * @param {?} key\n      * @return {?}\n      */\n      function (target, key) {\n        var _a;\n        /** @type {?} */\n\n\n        var name = key.toString();\n        /** @type {?} */\n\n        var selectorId = \"__\" + name + \"__selector\";\n        /** @type {?} */\n\n        var selector = null;\n        /** @type {?} */\n\n        var injectorNotifier$ = null;\n\n        if (core.ÉµivyEnabled) {\n          injectorNotifier$ = internals.ensureInjectorNotifierIsCaptured(target);\n        }\n\n        Object.defineProperties(target, (_a = {}, _a[selectorId] = {\n          writable: true,\n          enumerable: false,\n          configurable: true\n        }, _a[name] = {\n          enumerable: true,\n          configurable: true,\n          get:\n          /**\n          * @return {?}\n          */\n          function () {\n            var _this = this;\n\n            if (this[selectorId]) {\n              return this[selectorId];\n            } // The `localInject` will be tree-shaken away in apps that\n            // still use the View Engine.\n\n\n            if (core.ÉµivyEnabled) {\n              this[selectorId] =\n              /** @type {?} */\n              injectorNotifier$.pipe(operators.mergeMap(\n              /**\n              * @return {?}\n              */\n              function () {\n                /** @type {?} */\n                var store = internals.localInject(_this, Store);\n                /** @type {?} */\n\n                var config = internals.localInject(_this, NgxsConfig);\n                selector = selector || createSelectorFn(config, name, rawSelector, paths);\n                return createSelectObservable(selector, store);\n              }));\n            } else {\n              selector = selector || createSelectorFn(null, name, rawSelector, paths);\n              this[selectorId] = createSelectObservable(selector, null);\n            }\n\n            return this[selectorId];\n          }\n        }, _a)); // Keep this `if` guard here so the below stuff will be tree-shaken away in apps that still use the View Engine.\n\n        if (core.ÉµivyEnabled) {\n          internals.ensureLocalInjectorCaptured(target);\n        }\n      }\n    );\n  }\n  /**\n   * @fileoverview added by tsickle\n   * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n   */\n\n  /**\n   * Decorator for setting selector options at a method or class level.\n   * @param {?} options\n   * @return {?}\n   */\n\n\n  function SelectorOptions(options) {\n    return (\n      /** @type {?} */\n\n      /**\n      * @template T\n      * @param {?} target\n      * @param {?} methodName\n      * @param {?} descriptor\n      * @return {?}\n      */\n      function decorate(target, methodName, descriptor) {\n        if (methodName) {\n          // Method Decorator\n\n          /** @type {?} */\n          var originalFn = descriptor.value ||\n          /** @type {?} */\n          descriptor.originalFn;\n\n          if (originalFn) {\n            selectorOptionsMetaAccessor.defineOptions(originalFn, options);\n          }\n        } else {\n          // Class Decorator\n          selectorOptionsMetaAccessor.defineOptions(target, options);\n        }\n      }\n    );\n  }\n  /**\n   * @fileoverview added by tsickle\n   * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n   */\n\n  /**\n   * @record\n   */\n\n\n  function MetaDataModel$1() {}\n\n  if (false) {\n    /** @type {?} */\n    MetaDataModel$1.prototype.name;\n    /** @type {?} */\n\n    MetaDataModel$1.prototype.actions;\n    /** @type {?} */\n\n    MetaDataModel$1.prototype.defaults;\n    /** @type {?} */\n\n    MetaDataModel$1.prototype.path;\n    /** @type {?|undefined} */\n\n    MetaDataModel$1.prototype.children;\n  }\n  /**\n   * @record\n   */\n\n\n  function SelectorMetaDataModel$1() {}\n\n  if (false) {\n    /** @type {?} */\n    SelectorMetaDataModel$1.prototype.originalFn;\n    /** @type {?} */\n\n    SelectorMetaDataModel$1.prototype.containerClass;\n    /** @type {?} */\n\n    SelectorMetaDataModel$1.prototype.selectorName;\n    /** @type {?} */\n\n    SelectorMetaDataModel$1.prototype.getSelectorOptions;\n  }\n  /**\n   * @param {?} target\n   * @return {?}\n   */\n\n\n  function ensureStoreMetadata$1(target) {\n    return ensureStoreMetadata(target);\n  }\n  /**\n   * @param {?} target\n   * @return {?}\n   */\n\n\n  function getStoreMetadata$1(target) {\n    return getStoreMetadata(target);\n  }\n  /**\n   * @param {?} target\n   * @return {?}\n   */\n\n\n  function ensureSelectorMetadata$1(target) {\n    return ensureSelectorMetadata(target);\n  }\n  /**\n   * @param {?} target\n   * @return {?}\n   */\n\n\n  function getSelectorMetadata$1(target) {\n    return getSelectorMetadata(target);\n  }\n  /**\n   * @fileoverview added by tsickle\n   * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n   */\n\n  /**\n   * Decorator for memoizing a state selector.\n   * @template T\n   * @param {?=} selectors\n   * @return {?}\n   */\n\n\n  function Selector(selectors) {\n    return (\n      /**\n      * @template U\n      * @param {?} target\n      * @param {?} key\n      * @param {?} descriptor\n      * @return {?}\n      */\n      function (target, key, descriptor) {\n        // Caretaker note: we have still left the `typeof` condition in order to avoid\n        // creating a breaking change for projects that still use the View Engine.\n        if (typeof ngDevMode === 'undefined' || ngDevMode) {\n          /** @type {?} */\n          var isNotMethod = !(descriptor && descriptor.value !== null);\n\n          if (isNotMethod) {\n            throwSelectorDecoratorError();\n          }\n        }\n        /** @type {?} */\n\n\n        var originalFn = descriptor.value;\n        /** @type {?} */\n\n        var memoizedFn = createSelector(selectors,\n        /** @type {?} */\n        originalFn, {\n          containerClass: target,\n          selectorName: key.toString(),\n          getSelectorOptions:\n          /**\n          * @return {?}\n          */\n          function () {\n            return {};\n          }\n        });\n        /** @type {?} */\n\n        var newDescriptor = {\n          configurable: true,\n          get:\n          /**\n          * @return {?}\n          */\n          function () {\n            return memoizedFn;\n          }\n        }; // Add hidden property to descriptor\n\n        /** @type {?} */\n        newDescriptor['originalFn'] = originalFn;\n        return newDescriptor;\n      }\n    );\n  }\n  /**\n   * @fileoverview added by tsickle\n   * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n   */\n\n  /**\n   * @template T\n   */\n\n\n  var\n  /**\n  * @template T\n  */\n  StateToken =\n  /** @class */\n  function () {\n    function StateToken(name) {\n      var _this = this;\n\n      this.name = name;\n      /** @type {?} */\n\n      var selectorMetadata = ensureSelectorMetadata(\n      /** @type {?} */\n      this);\n\n      selectorMetadata.makeRootSelector =\n      /**\n      * @param {?} runtimeContext\n      * @return {?}\n      */\n      function (runtimeContext) {\n        return runtimeContext.getStateGetter(_this.name);\n      };\n    }\n    /**\n     * @return {?}\n     */\n\n\n    StateToken.prototype.getName =\n    /**\n    * @return {?}\n    */\n    function () {\n      return this.name;\n    };\n    /**\n     * @return {?}\n     */\n\n\n    StateToken.prototype.toString =\n    /**\n    * @return {?}\n    */\n    function () {\n      return \"StateToken[\" + this.name + \"]\";\n    };\n\n    return StateToken;\n  }();\n\n  if (false) {\n    /**\n     * @type {?}\n     * @private\n     */\n    StateToken.prototype.name;\n  }\n\n  exports.Action = Action;\n  exports.Actions = Actions;\n  exports.InitState = InitState;\n  exports.NGXS_PLUGINS = NGXS_PLUGINS;\n  exports.NgxsModule = NgxsModule;\n  exports.NgxsSimpleChange = NgxsSimpleChange;\n  exports.NoopNgxsExecutionStrategy = NoopNgxsExecutionStrategy;\n  exports.Select = Select;\n  exports.Selector = Selector;\n  exports.SelectorOptions = SelectorOptions;\n  exports.State = State;\n  exports.StateStream = StateStream;\n  exports.StateToken = StateToken;\n  exports.Store = Store;\n  exports.UpdateState = UpdateState;\n  exports.actionMatcher = actionMatcher;\n  exports.createSelector = createSelector;\n  exports.ensureSelectorMetadata = ensureSelectorMetadata$1;\n  exports.ensureStoreMetadata = ensureStoreMetadata$1;\n  exports.getActionTypeFromInstance = getActionTypeFromInstance;\n  exports.getSelectorMetadata = getSelectorMetadata$1;\n  exports.getStoreMetadata = getStoreMetadata$1;\n  exports.getValue = getValue;\n  exports.ofAction = ofAction;\n  exports.ofActionCanceled = ofActionCanceled;\n  exports.ofActionCompleted = ofActionCompleted;\n  exports.ofActionDispatched = ofActionDispatched;\n  exports.ofActionErrored = ofActionErrored;\n  exports.ofActionSuccessful = ofActionSuccessful;\n  exports.setValue = setValue;\n  exports.Éµa = OrderedSubject;\n  exports.Éµb = InternalActions;\n  exports.Éµc = ROOT_STATE_TOKEN;\n  exports.Éµd = FEATURE_STATE_TOKEN;\n  exports.Éµe = SELECTOR_META_KEY;\n  exports.Éµf = NgxsConfig;\n  exports.Éµg = mergeDeep;\n  exports.Éµh = USER_PROVIDED_NGXS_EXECUTION_STRATEGY;\n  exports.Éµi = NGXS_EXECUTION_STRATEGY;\n  exports.Éµj = NgxsRootModule;\n  exports.Éµk = StateFactory;\n  exports.Éµl = InternalDispatchedActionResults;\n  exports.Éµm = InternalDispatcher;\n  exports.Éµn = StateContextFactory;\n  exports.Éµo = InternalStateOperations;\n  exports.Éµp = PluginManager;\n  exports.Éµq = InternalNgxsExecutionStrategy;\n  exports.Éµs = ensureStoreMetadata;\n  exports.Éµt = getStoreMetadata;\n  exports.Éµu = ensureSelectorMetadata;\n  exports.Éµv = getSelectorMetadata;\n  exports.Éµw = LifecycleStateManager;\n  exports.Éµx = NgxsFeatureModule;\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n});","map":{"version":3,"sources":["/home/huncho/Documents/Angular/Inventory/node_modules/@ngxs/store/bundles/ngxs-store.umd.js"],"names":["global","factory","exports","module","require","define","amd","self","ngxs","store","ng","core","internals","common","rxjs","operators","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__extends","__","constructor","prototype","create","__assign","assign","t","s","i","n","arguments","length","call","apply","__rest","e","indexOf","getOwnPropertySymbols","propertyIsEnumerable","__decorate","decorators","target","key","desc","c","r","getOwnPropertyDescriptor","Reflect","decorate","defineProperty","__param","paramIndex","decorator","__metadata","metadataKey","metadataValue","metadata","__awaiter","thisArg","_arguments","P","generator","adopt","value","resolve","Promise","reject","fulfilled","step","next","rejected","result","done","then","__generator","body","_","label","sent","trys","ops","f","y","g","verb","Symbol","iterator","v","op","TypeError","pop","push","__createBinding","o","m","k","k2","undefined","__exportStar","__values","__read","ar","error","__spread","concat","__spreadArrays","il","a","j","jl","__await","__asyncGenerator","asyncIterator","q","resume","settle","fulfill","shift","__asyncDelegator","__asyncValues","__makeTemplateObject","cooked","raw","__importStar","mod","__esModule","default","__importDefault","__classPrivateFieldGet","receiver","privateMap","has","get","__classPrivateFieldSet","set","throwStateNameError","name","Error","throwStateNamePropertyError","throwStateUniqueError","current","newName","oldName","throwStateDecoratorError","throwActionDecoratorError","throwSelectorDecoratorError","getZoneWarningMessage","getUndecoratedStateInIvyWarningMessage","throwSelectFactoryNotConnectedError","throwPatchingArrayError","throwPatchingPrimitiveError","DispatchOutsideZoneNgxsExecutionStrategy","_ngZone","_platformId","ngDevMode","verifyZoneIsNotNooped","enter","func","isPlatformServer","runInsideAngular","runOutsideAngular","leave","NgZone","isInAngularZone","run","type","Injectable","args","providedIn","ctorParameters","String","Inject","PLATFORM_ID","ngInjectableDef","defineInjectable","DispatchOutsideZoneNgxsExecutionStrategy_Factory","inject","token","ngZone","console","warn","ROOT_STATE_TOKEN","InjectionToken","FEATURE_STATE_TOKEN","NGXS_PLUGINS","META_KEY","META_OPTIONS_KEY","SELECTOR_META_KEY","NgxsConfig","defaultsState","selectorOptions","injectContainerState","suppressErrors","compatibility","strictContentSecurityPolicy","executionStrategy","developmentMode","StateContext","getState","setState","val","patchState","dispatch","actions","NgxsPlugin","handle","state","action","StoreOptions","defaults","children","NgxsSimpleChange","previousValue","currentValue","firstChange","NgxsOnInit","ngxsOnInit","ctx","NgxsOnChanges","ngxsOnChanges","change","NgxsAfterBootstrap","ngxsAfterBootstrap","NoopNgxsExecutionStrategy","NoopNgxsExecutionStrategy_Factory","USER_PROVIDED_NGXS_EXECUTION_STRATEGY","NGXS_EXECUTION_STRATEGY","injector","INJECTOR","Éµglobal","Zone","NgxsExecutionStrategy","getActionTypeFromInstance","actionMatcher","action1","type1","action2","setValue","obj","prop","split","lastIndex","reduce","acc","part","index","isArray","slice","getValue","isObject","item","mergeDeep","base","sources","_i","_a","_b","source","StateClassInternal","StateOperations","actionOrActions","MetaDataModel","path","makeRootSelector","RuntimeSelectorContext","getStateGetter","getSelectorOptions","localOptions","SharedSelectorOptions","SelectorMetaDataModel","originalFn","containerClass","selectorName","MappedStore","isInitialised","instance","StatesAndDefaults","states","RootStateDiff","currentAppState","newAppState","ensureStoreMetadata","defaultMetadata_1","context","getStoreMetadata","ensureSelectorMetadata","defaultMetadata","getSelectorMetadata","compliantPropGetter","paths","copyOfPaths","fastPropGetter","segments","seg","l","expr","fn","Function","propGetter","config","buildGraph","stateClasses","findName","stateClass","meta","find","map","nameToState","findFullParentPath","newObj","visit","child","keyToFind","parent_1","parent_2","topologicalSort","graph","sorted","visited","ancestors","forEach","dep","join","keys","reverse","isObject$1","getStateDiffChanges","mappedStore","diff","ActionCompletion","ofAction","allowedTypes","ofActionOperator","ofActionDispatched","ofActionSuccessful","ofActionCanceled","ofActionCompleted","allowedStatuses","mapActionResult","ofActionErrored","statuses","mapOperator","mapAction","allowedMap","createAllowedActionTypesMap","allowedStatusMap","createAllowedStatusesMap","pipe","filterStatus","filter","actionType","typeMatch","statusMatch","status","successful","canceled","FilterMap","types","filterMap","klass","leaveNgxs","ngxsExecutionStrategy","Observable","sink","subscribe","complete","InternalNgxsExecutionStrategy","_executionStrategy","ActionStatus","Dispatched","Successful","Canceled","Errored","ActionContext","OrderedSubject","_super","_this","_itemQueue","_busyPushingNext","unshift","nextValue","Subject","InternalActions","Actions","internalActions$","internalExecutionStrategy","observer","childSubscription","add","compose","funcs","curr","nextArgs","StateStream","ngOnDestroy","BehaviorSubject","PluginManager","_parentManager","_pluginHandlers","plugins","registerHandlers","enumerable","configurable","pluginHandlers","getPluginHandlers","rootPlugins","handlers","plugin","bind","Optional","SkipSelf","InternalDispatchedActionResults","InternalDispatcher","_injector","_actions","_actionResults","_pluginManager","_stateStream","_ngxsExecutionStrategy","dispatchByEvents","_errorHandler","ErrorHandler","handleError","of","forkJoin","dispatchSingle","throwError","prevState","nextState","nextAction","actionResult$","getActionResultStream","createDispatchObservable","shareReplay","take","exhaustMap","EMPTY","Injector","deepFreeze","freeze","oIsFunction","hasOwnProp","getOwnPropertyNames","isFrozen","InternalStateOperations","_dispatcher","_config","getRootStateOperations","rootStateOperations","newState","isAngularInTestMode","ensureStateAndActionsAreImmutable","setStateToTheCurrentWithNew","results","stateOperations","currentState","root","frozenValue","simplePatch","existingState","StateContextFactory","_internalStateOperations","createStateContext","setStateValue","newValue","setStateFromOperator","stateOperator","local","isStateOperator","patchOperator","StoreValidators","checkThatStateIsNamedCorrectly","stateNameRegex","test","checkThatStateNameIsUnique","stateName","statesByName","checkThatStateClassesHaveBeenDecorated","RegExp","StateFactory","_parentFactory","_stateContextFactory","_initialState","_actionsSubscription","_states","_statesByName","_statePaths","getRuntimeSelectorContext","memoize","stateFactory","resolveGetter","statePaths","getter","globalSelectorOptions","cloneDefaults","unsubscribe","e_1","newStates","addToStatesMap","stateGraph","sortedStates","nameGraph","bootstrappedStores","sortedStates_1","sortedStates_1_1","name_1","addRuntimeInfoToMeta","stateMap","hasBeenMountedAndBootstrapped","e_1_1","return","addAndReturnDefaults","classes","mappedStores","connectActionHandlers","dispatched$","mergeMap","invokeActions","defaultIfEmpty","catchError","e_2","e_3","_c","_d","actionMetas","actionMetas_1","actionMetas_1_1","actionMeta","stateContext","from","options","cancelUncompleted","takeUntil","e_3_1","e_2_1","e_4","statesMap","stateClasses_1","stateClasses_1_1","unmountedState","e_4_1","valueIsBootstrappedInInitialState","INITIAL_STATE_TOKEN","LifecycleStateManager","internalStateOperations","stateContextFactory","bootstrapper","ngxsBootstrap","tap","invokeInit","appBootstrapped$","appBootstrapped","invokeBootstrap","mappedStores_1","mappedStores_1_1","firstDiffChange","getStateContext","mappedStores_2","mappedStores_2_1","NgxsBootstrapper","SELECTOR_OPTIONS_META_KEY","selectorOptionsMetaAccessor","getOptions","defineOptions","CreationMetadata","RuntimeSelectorInfo","argumentSelectorFunctions","createSelector","selectors","creationMetadata","wrappedFn","wrappedSelectorFn","returnValue","innerMemoizedFn","memoizedFn","selectorMetaData","setupSelectorMetadata","getRuntimeSelectorInfo","selectFromRoot","rootState","argFn","ex","getExplicitSelectorOptions","selectorMetaDataClone","getLocalSelectorOptions","localSelectorOptions","selectorsToApply","getSelectorsToApply","selector","getRootSelectorFactory","explicitOptions","canInjectContainerState","Store","_internalExecutionStrategy","_stateFactory","initialStateValue","initStateStream","select","selectorFn","getStoreBoundSelectorFn","err","distinctUntilChanged","selectOnce","selectSnapshot","snapshot","reset","makeSelectorFn","runtimeContext","storeIsEmpty","defaultStateNotEmpty","storeValues","SelectFactory","SelectFactory_Factory","InitState","UpdateState","addedStates","NgxsRootModule","_store","lifecycleStateManager","ÉµivyEnabled","NgModule","NgxsFeatureModule","flattenedStates","flattenStates","total","values","NgxsModule","forRoot","ngModule","providers","ngxsTokenProviders","forFeature","provide","multi","useValue","ROOT_OPTIONS","useFactory","ngxsConfigFactory","deps","APP_BOOTSTRAP_LISTENER","appBootstrapListenerFactory","getInitialState","NGXS_STATE_CONTEXT_FACTORY","useExisting","NGXS_STATE_FACTORY","bootstrap","InitialState","Action","isStaticMethod","actions_1","actions_1_1","ensureStateClassIsInjectable","Éµprov","MutateMetaOptions","inheritedStateClass","optionsWithInheritance","State","getStateOptions","inheritanceOptions","mutateMetaData","params","getName","inheritedMeta","getPrototypeOf","DOLLAR_CHAR_CODE","createSelectObservable","createSelectObservableIvy","createSelectObservableViewEngine","createSelectorFn","rawSelector","removeDollarAtTheEnd","propsArray","createSelectorFnIvy","createSelectorFnViewEngine","lastCharIndex","dollarAtTheEnd","charCodeAt","Select","toString","selectorId","injectorNotifier$","ensureInjectorNotifierIsCaptured","defineProperties","writable","localInject","ensureLocalInjectorCaptured","SelectorOptions","methodName","descriptor","MetaDataModel$1","SelectorMetaDataModel$1","ensureStoreMetadata$1","getStoreMetadata$1","ensureSelectorMetadata$1","getSelectorMetadata$1","Selector","isNotMethod","newDescriptor","StateToken","selectorMetadata","Éµa","Éµb","Éµc","Éµd","Éµe","Éµf","Éµg","Éµh","Éµi","Éµj","Éµk","Éµl","Éµm","Éµn","Éµo","Éµp","Éµq","Éµs","Éµt","Éµu","Éµv","Éµw","Éµx"],"mappings":"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","sourcesContent":["(function (global, factory) {\n    typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, require('@angular/core'), require('@ngxs/store/internals'), require('@angular/common'), require('rxjs'), require('rxjs/operators')) :\n    typeof define === 'function' && define.amd ? define('@ngxs/store', ['exports', '@angular/core', '@ngxs/store/internals', '@angular/common', 'rxjs', 'rxjs/operators'], factory) :\n    (global = global || self, factory((global.ngxs = global.ngxs || {}, global.ngxs.store = {}), global.ng.core, global.ngxs.store.internals, global.ng.common, global.rxjs, global.rxjs.operators));\n}(this, function (exports, core, internals, common, rxjs, operators) { 'use strict';\n\n    /*! *****************************************************************************\r\n    Copyright (c) Microsoft Corporation.\r\n\r\n    Permission to use, copy, modify, and/or distribute this software for any\r\n    purpose with or without fee is hereby granted.\r\n\r\n    THE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\n    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\n    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\n    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\n    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\n    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\n    PERFORMANCE OF THIS SOFTWARE.\r\n    ***************************************************************************** */\r\n    /* global Reflect, Promise */\r\n\r\n    var extendStatics = function(d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n\r\n    function __extends(d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    }\r\n\r\n    var __assign = function() {\r\n        __assign = Object.assign || function __assign(t) {\r\n            for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n                s = arguments[i];\r\n                for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n            }\r\n            return t;\r\n        };\r\n        return __assign.apply(this, arguments);\r\n    };\r\n\r\n    function __rest(s, e) {\r\n        var t = {};\r\n        for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n            t[p] = s[p];\r\n        if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n            for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n                if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                    t[p[i]] = s[p[i]];\r\n            }\r\n        return t;\r\n    }\r\n\r\n    function __decorate(decorators, target, key, desc) {\r\n        var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n        if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n        else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n        return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n    }\r\n\r\n    function __param(paramIndex, decorator) {\r\n        return function (target, key) { decorator(target, key, paramIndex); }\r\n    }\r\n\r\n    function __metadata(metadataKey, metadataValue) {\r\n        if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n    }\r\n\r\n    function __awaiter(thisArg, _arguments, P, generator) {\r\n        function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n        return new (P || (P = Promise))(function (resolve, reject) {\r\n            function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n            function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n            function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n            step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n        });\r\n    }\r\n\r\n    function __generator(thisArg, body) {\r\n        var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n        return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n        function verb(n) { return function (v) { return step([n, v]); }; }\r\n        function step(op) {\r\n            if (f) throw new TypeError(\"Generator is already executing.\");\r\n            while (_) try {\r\n                if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n                if (y = 0, t) op = [op[0] & 2, t.value];\r\n                switch (op[0]) {\r\n                    case 0: case 1: t = op; break;\r\n                    case 4: _.label++; return { value: op[1], done: false };\r\n                    case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                    case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                    default:\r\n                        if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                        if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                        if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                        if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                        if (t[2]) _.ops.pop();\r\n                        _.trys.pop(); continue;\r\n                }\r\n                op = body.call(thisArg, _);\r\n            } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n            if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n        }\r\n    }\r\n\r\n    function __createBinding(o, m, k, k2) {\r\n        if (k2 === undefined) k2 = k;\r\n        o[k2] = m[k];\r\n    }\r\n\r\n    function __exportStar(m, exports) {\r\n        for (var p in m) if (p !== \"default\" && !exports.hasOwnProperty(p)) exports[p] = m[p];\r\n    }\r\n\r\n    function __values(o) {\r\n        var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n        if (m) return m.call(o);\r\n        if (o && typeof o.length === \"number\") return {\r\n            next: function () {\r\n                if (o && i >= o.length) o = void 0;\r\n                return { value: o && o[i++], done: !o };\r\n            }\r\n        };\r\n        throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n    }\r\n\r\n    function __read(o, n) {\r\n        var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n        if (!m) return o;\r\n        var i = m.call(o), r, ar = [], e;\r\n        try {\r\n            while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n        }\r\n        catch (error) { e = { error: error }; }\r\n        finally {\r\n            try {\r\n                if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n            }\r\n            finally { if (e) throw e.error; }\r\n        }\r\n        return ar;\r\n    }\r\n\r\n    function __spread() {\r\n        for (var ar = [], i = 0; i < arguments.length; i++)\r\n            ar = ar.concat(__read(arguments[i]));\r\n        return ar;\r\n    }\r\n\r\n    function __spreadArrays() {\r\n        for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n        for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n            for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n                r[k] = a[j];\r\n        return r;\r\n    };\r\n\r\n    function __await(v) {\r\n        return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n    }\r\n\r\n    function __asyncGenerator(thisArg, _arguments, generator) {\r\n        if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n        var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n        return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n        function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n        function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n        function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n        function fulfill(value) { resume(\"next\", value); }\r\n        function reject(value) { resume(\"throw\", value); }\r\n        function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n    }\r\n\r\n    function __asyncDelegator(o) {\r\n        var i, p;\r\n        return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n        function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n    }\r\n\r\n    function __asyncValues(o) {\r\n        if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n        var m = o[Symbol.asyncIterator], i;\r\n        return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n        function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n        function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n    }\r\n\r\n    function __makeTemplateObject(cooked, raw) {\r\n        if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n        return cooked;\r\n    };\r\n\r\n    function __importStar(mod) {\r\n        if (mod && mod.__esModule) return mod;\r\n        var result = {};\r\n        if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n        result.default = mod;\r\n        return result;\r\n    }\r\n\r\n    function __importDefault(mod) {\r\n        return (mod && mod.__esModule) ? mod : { default: mod };\r\n    }\r\n\r\n    function __classPrivateFieldGet(receiver, privateMap) {\r\n        if (!privateMap.has(receiver)) {\r\n            throw new TypeError(\"attempted to get private field on non-instance\");\r\n        }\r\n        return privateMap.get(receiver);\r\n    }\r\n\r\n    function __classPrivateFieldSet(receiver, privateMap, value) {\r\n        if (!privateMap.has(receiver)) {\r\n            throw new TypeError(\"attempted to set private field on non-instance\");\r\n        }\r\n        privateMap.set(receiver, value);\r\n        return value;\r\n    }\n\n    /**\n     * @fileoverview added by tsickle\n     * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n     */\n    /**\n     * @param {?} name\n     * @return {?}\n     */\n    function throwStateNameError(name) {\n        throw new Error(name + \" is not a valid state name. It needs to be a valid object property name.\");\n    }\n    /**\n     * @return {?}\n     */\n    function throwStateNamePropertyError() {\n        throw new Error(\"States must register a 'name' property.\");\n    }\n    /**\n     * @param {?} current\n     * @param {?} newName\n     * @param {?} oldName\n     * @return {?}\n     */\n    function throwStateUniqueError(current, newName, oldName) {\n        throw new Error(\"State name '\" + current + \"' from \" + newName + \" already exists in \" + oldName + \".\");\n    }\n    /**\n     * @param {?} name\n     * @return {?}\n     */\n    function throwStateDecoratorError(name) {\n        throw new Error(\"States must be decorated with @State() decorator, but \\\"\" + name + \"\\\" isn't.\");\n    }\n    /**\n     * @return {?}\n     */\n    function throwActionDecoratorError() {\n        throw new Error('@Action() decorator cannot be used with static methods.');\n    }\n    /**\n     * @return {?}\n     */\n    function throwSelectorDecoratorError() {\n        throw new Error('Selectors only work on methods.');\n    }\n    /**\n     * @return {?}\n     */\n    function getZoneWarningMessage() {\n        return ('Your application was bootstrapped with nooped zone and your execution strategy requires an actual NgZone!\\n' +\n            'Please set the value of the executionStrategy property to NoopNgxsExecutionStrategy.\\n' +\n            'NgxsModule.forRoot(states, { executionStrategy: NoopNgxsExecutionStrategy })');\n    }\n    /**\n     * @param {?} name\n     * @return {?}\n     */\n    function getUndecoratedStateInIvyWarningMessage(name) {\n        return \"'\" + name + \"' class should be decorated with @Injectable() right after the @State() decorator\";\n    }\n    /**\n     * @return {?}\n     */\n    function throwSelectFactoryNotConnectedError() {\n        throw new Error('You have forgotten to import the NGXS module!');\n    }\n    /**\n     * @return {?}\n     */\n    function throwPatchingArrayError() {\n        throw new Error('Patching arrays is not supported.');\n    }\n    /**\n     * @return {?}\n     */\n    function throwPatchingPrimitiveError() {\n        throw new Error('Patching primitives is not supported.');\n    }\n\n    /**\n     * @fileoverview added by tsickle\n     * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n     */\n    var DispatchOutsideZoneNgxsExecutionStrategy = /** @class */ (function () {\n        function DispatchOutsideZoneNgxsExecutionStrategy(_ngZone, _platformId) {\n            this._ngZone = _ngZone;\n            this._platformId = _platformId;\n            // Caretaker note: we have still left the `typeof` condition in order to avoid\n            // creating a breaking change for projects that still use the View Engine.\n            if (typeof ngDevMode === 'undefined' || ngDevMode) {\n                verifyZoneIsNotNooped(_ngZone);\n            }\n        }\n        /**\n         * @template T\n         * @param {?} func\n         * @return {?}\n         */\n        DispatchOutsideZoneNgxsExecutionStrategy.prototype.enter = /**\n         * @template T\n         * @param {?} func\n         * @return {?}\n         */\n        function (func) {\n            if (common.isPlatformServer(this._platformId)) {\n                return this.runInsideAngular(func);\n            }\n            return this.runOutsideAngular(func);\n        };\n        /**\n         * @template T\n         * @param {?} func\n         * @return {?}\n         */\n        DispatchOutsideZoneNgxsExecutionStrategy.prototype.leave = /**\n         * @template T\n         * @param {?} func\n         * @return {?}\n         */\n        function (func) {\n            return this.runInsideAngular(func);\n        };\n        /**\n         * @private\n         * @template T\n         * @param {?} func\n         * @return {?}\n         */\n        DispatchOutsideZoneNgxsExecutionStrategy.prototype.runInsideAngular = /**\n         * @private\n         * @template T\n         * @param {?} func\n         * @return {?}\n         */\n        function (func) {\n            if (core.NgZone.isInAngularZone()) {\n                return func();\n            }\n            return this._ngZone.run(func);\n        };\n        /**\n         * @private\n         * @template T\n         * @param {?} func\n         * @return {?}\n         */\n        DispatchOutsideZoneNgxsExecutionStrategy.prototype.runOutsideAngular = /**\n         * @private\n         * @template T\n         * @param {?} func\n         * @return {?}\n         */\n        function (func) {\n            if (core.NgZone.isInAngularZone()) {\n                return this._ngZone.runOutsideAngular(func);\n            }\n            return func();\n        };\n        DispatchOutsideZoneNgxsExecutionStrategy.decorators = [\n            { type: core.Injectable, args: [{ providedIn: 'root' },] }\n        ];\n        /** @nocollapse */\n        DispatchOutsideZoneNgxsExecutionStrategy.ctorParameters = function () { return [\n            { type: core.NgZone },\n            { type: String, decorators: [{ type: core.Inject, args: [core.PLATFORM_ID,] }] }\n        ]; };\n        /** @nocollapse */ DispatchOutsideZoneNgxsExecutionStrategy.ngInjectableDef = core.defineInjectable({ factory: function DispatchOutsideZoneNgxsExecutionStrategy_Factory() { return new DispatchOutsideZoneNgxsExecutionStrategy(core.inject(core.NgZone), core.inject(core.PLATFORM_ID)); }, token: DispatchOutsideZoneNgxsExecutionStrategy, providedIn: \"root\" });\n        return DispatchOutsideZoneNgxsExecutionStrategy;\n    }());\n    if (false) {\n        /**\n         * @type {?}\n         * @private\n         */\n        DispatchOutsideZoneNgxsExecutionStrategy.prototype._ngZone;\n        /**\n         * @type {?}\n         * @private\n         */\n        DispatchOutsideZoneNgxsExecutionStrategy.prototype._platformId;\n    }\n    // Caretaker note: this should exist as a separate function and not a class method,\n    // since class methods are not tree-shakable.\n    /**\n     * @param {?} ngZone\n     * @return {?}\n     */\n    function verifyZoneIsNotNooped(ngZone) {\n        // `NoopNgZone` is not exposed publicly as it doesn't expect\n        // to be used outside of the core Angular code, thus we just have\n        // to check if the zone doesn't extend or instanceof `NgZone`.\n        if (ngZone instanceof core.NgZone) {\n            return;\n        }\n        console.warn(getZoneWarningMessage());\n    }\n\n    /**\n     * @fileoverview added by tsickle\n     * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n     */\n    /** @type {?} */\n    var ROOT_STATE_TOKEN = new core.InjectionToken('ROOT_STATE_TOKEN');\n    /** @type {?} */\n    var FEATURE_STATE_TOKEN = new core.InjectionToken('FEATURE_STATE_TOKEN');\n    /** @type {?} */\n    var NGXS_PLUGINS = new core.InjectionToken('NGXS_PLUGINS');\n    /** @type {?} */\n    var META_KEY = 'NGXS_META';\n    /** @type {?} */\n    var META_OPTIONS_KEY = 'NGXS_OPTIONS_META';\n    /** @type {?} */\n    var SELECTOR_META_KEY = 'NGXS_SELECTOR_META';\n    /**\n     * The NGXS config settings.\n     */\n    var NgxsConfig = /** @class */ (function () {\n        function NgxsConfig() {\n            /**\n             * Defining the default state before module initialization\n             * This is convenient if we need to create a define our own set of states.\n             * @deprecated will be removed after v4\n             * (default: {})\n             */\n            this.defaultsState = {};\n            /**\n             * Defining shared selector options\n             */\n            this.selectorOptions = {\n                injectContainerState: true,\n                // TODO: default is true in v3, will change in v4\n                suppressErrors: true // TODO: default is true in v3, will change in v4\n            };\n            this.compatibility = {\n                strictContentSecurityPolicy: false\n            };\n            this.executionStrategy = DispatchOutsideZoneNgxsExecutionStrategy;\n        }\n        NgxsConfig.decorators = [\n            { type: core.Injectable }\n        ];\n        /** @nocollapse */\n        NgxsConfig.ctorParameters = function () { return []; };\n        return NgxsConfig;\n    }());\n    if (false) {\n        /**\n         * Run in development mode. This will add additional debugging features:\n         * - Object.freeze on the state and actions to guarantee immutability\n         * (default: false)\n         *\n         * @deprecated This property is no longer necessary when the Ivy compiler is used.\n         * We'll determine the development mode through the `ngDevMode`. It's still essential with View Engine.\n         * @type {?}\n         */\n        NgxsConfig.prototype.developmentMode;\n        /** @type {?} */\n        NgxsConfig.prototype.compatibility;\n        /**\n         * Determines the execution context to perform async operations inside. An implementation can be\n         * provided to override the default behaviour where the async operations are run\n         * outside Angular's zone but all observable behaviours of NGXS are run back inside Angular's zone.\n         * These observable behaviours are from:\n         *   `\\@Select(...)`, `store.select(...)`, `actions.subscribe(...)` or `store.dispatch(...).subscribe(...)`\n         * Every `zone.run` causes Angular to run change detection on the whole tree (`app.tick()`) so of your\n         * application doesn't rely on zone.js running change detection then you can switch to the\n         * `NoopNgxsExecutionStrategy` that doesn't interact with zones.\n         * (default: null)\n         * @type {?}\n         */\n        NgxsConfig.prototype.executionStrategy;\n        /**\n         * Defining the default state before module initialization\n         * This is convenient if we need to create a define our own set of states.\n         * @deprecated will be removed after v4\n         * (default: {})\n         * @type {?}\n         */\n        NgxsConfig.prototype.defaultsState;\n        /**\n         * Defining shared selector options\n         * @type {?}\n         */\n        NgxsConfig.prototype.selectorOptions;\n    }\n    /**\n     * State context provided to the actions in the state.\n     * @record\n     * @template T\n     */\n    function StateContext() { }\n    if (false) {\n        /**\n         * Get the current state.\n         * @return {?}\n         */\n        StateContext.prototype.getState = function () { };\n        /**\n         * Reset the state to a new value.\n         * @param {?} val\n         * @return {?}\n         */\n        StateContext.prototype.setState = function (val) { };\n        /**\n         * Patch the existing state with the provided value.\n         * @param {?} val\n         * @return {?}\n         */\n        StateContext.prototype.patchState = function (val) { };\n        /**\n         * Dispatch a new action and return the dispatched observable.\n         * @param {?} actions\n         * @return {?}\n         */\n        StateContext.prototype.dispatch = function (actions) { };\n    }\n    /**\n     * Plugin interface\n     * @record\n     */\n    function NgxsPlugin() { }\n    if (false) {\n        /**\n         * Handle the state/action before its submitted to the state handlers.\n         * @param {?} state\n         * @param {?} action\n         * @param {?} next\n         * @return {?}\n         */\n        NgxsPlugin.prototype.handle = function (state, action, next) { };\n    }\n    /**\n     * Options that can be provided to the store.\n     * @record\n     * @template T\n     */\n    function StoreOptions() { }\n    if (false) {\n        /**\n         * Name of the state. Required.\n         * @type {?}\n         */\n        StoreOptions.prototype.name;\n        /**\n         * Default values for the state. If not provided, uses empty object.\n         * @type {?|undefined}\n         */\n        StoreOptions.prototype.defaults;\n        /**\n         * Sub states for the given state.\n         * @type {?|undefined}\n         */\n        StoreOptions.prototype.children;\n    }\n    /**\n     * Represents a basic change from a previous to a new value for a single state instance.\n     * Passed as a value in a NgxsSimpleChanges object to the ngxsOnChanges hook.\n     * @template T\n     */\n    var   /**\n     * Represents a basic change from a previous to a new value for a single state instance.\n     * Passed as a value in a NgxsSimpleChanges object to the ngxsOnChanges hook.\n     * @template T\n     */\n    NgxsSimpleChange = /** @class */ (function () {\n        function NgxsSimpleChange(previousValue, currentValue, firstChange) {\n            this.previousValue = previousValue;\n            this.currentValue = currentValue;\n            this.firstChange = firstChange;\n        }\n        return NgxsSimpleChange;\n    }());\n    if (false) {\n        /** @type {?} */\n        NgxsSimpleChange.prototype.previousValue;\n        /** @type {?} */\n        NgxsSimpleChange.prototype.currentValue;\n        /** @type {?} */\n        NgxsSimpleChange.prototype.firstChange;\n    }\n    /**\n     * On init interface\n     * @record\n     */\n    function NgxsOnInit() { }\n    if (false) {\n        /**\n         * @param {?=} ctx\n         * @return {?}\n         */\n        NgxsOnInit.prototype.ngxsOnInit = function (ctx) { };\n    }\n    /**\n     * On change interface\n     * @record\n     */\n    function NgxsOnChanges() { }\n    if (false) {\n        /**\n         * @param {?} change\n         * @return {?}\n         */\n        NgxsOnChanges.prototype.ngxsOnChanges = function (change) { };\n    }\n    /**\n     * After bootstrap interface\n     * @record\n     */\n    function NgxsAfterBootstrap() { }\n    if (false) {\n        /**\n         * @param {?=} ctx\n         * @return {?}\n         */\n        NgxsAfterBootstrap.prototype.ngxsAfterBootstrap = function (ctx) { };\n    }\n\n    /**\n     * @fileoverview added by tsickle\n     * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n     */\n    var NoopNgxsExecutionStrategy = /** @class */ (function () {\n        function NoopNgxsExecutionStrategy() {\n        }\n        /**\n         * @template T\n         * @param {?} func\n         * @return {?}\n         */\n        NoopNgxsExecutionStrategy.prototype.enter = /**\n         * @template T\n         * @param {?} func\n         * @return {?}\n         */\n        function (func) {\n            return func();\n        };\n        /**\n         * @template T\n         * @param {?} func\n         * @return {?}\n         */\n        NoopNgxsExecutionStrategy.prototype.leave = /**\n         * @template T\n         * @param {?} func\n         * @return {?}\n         */\n        function (func) {\n            return func();\n        };\n        NoopNgxsExecutionStrategy.decorators = [\n            { type: core.Injectable, args: [{ providedIn: 'root' },] }\n        ];\n        /** @nocollapse */ NoopNgxsExecutionStrategy.ngInjectableDef = core.defineInjectable({ factory: function NoopNgxsExecutionStrategy_Factory() { return new NoopNgxsExecutionStrategy(); }, token: NoopNgxsExecutionStrategy, providedIn: \"root\" });\n        return NoopNgxsExecutionStrategy;\n    }());\n\n    /**\n     * @fileoverview added by tsickle\n     * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n     */\n    /**\n     * The strategy that might be provided by users through `options.executionStrategy`.\n     * @type {?}\n     */\n    var USER_PROVIDED_NGXS_EXECUTION_STRATEGY = new core.InjectionToken('USER_PROVIDED_NGXS_EXECUTION_STRATEGY');\n    /*\n     * Internal execution strategy injection token\n     */\n    /** @type {?} */\n    var NGXS_EXECUTION_STRATEGY = new core.InjectionToken('NGXS_EXECUTION_STRATEGY', {\n        providedIn: 'root',\n        factory: (/**\n         * @return {?}\n         */\n        function () {\n            /** @type {?} */\n            var injector = core.inject(core.INJECTOR);\n            /** @type {?} */\n            var executionStrategy = injector.get(USER_PROVIDED_NGXS_EXECUTION_STRATEGY);\n            return executionStrategy\n                ? injector.get(executionStrategy)\n                : injector.get(typeof core.Éµglobal.Zone !== 'undefined'\n                    ? DispatchOutsideZoneNgxsExecutionStrategy\n                    : NoopNgxsExecutionStrategy);\n        })\n    });\n    /**\n     * @record\n     */\n    function NgxsExecutionStrategy() { }\n    if (false) {\n        /**\n         * @template T\n         * @param {?} func\n         * @return {?}\n         */\n        NgxsExecutionStrategy.prototype.enter = function (func) { };\n        /**\n         * @template T\n         * @param {?} func\n         * @return {?}\n         */\n        NgxsExecutionStrategy.prototype.leave = function (func) { };\n    }\n\n    /**\n     * @fileoverview added by tsickle\n     * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n     */\n    /**\n     * Returns the type from an action instance/class.\n     * @ignore\n     * @param {?} action\n     * @return {?}\n     */\n    function getActionTypeFromInstance(action) {\n        if (action.constructor && action.constructor.type) {\n            return action.constructor.type;\n        }\n        else {\n            return action.type;\n        }\n    }\n    /**\n     * Matches a action\n     * @ignore\n     * @param {?} action1\n     * @return {?}\n     */\n    function actionMatcher(action1) {\n        /** @type {?} */\n        var type1 = getActionTypeFromInstance(action1);\n        return (/**\n         * @param {?} action2\n         * @return {?}\n         */\n        function (action2) {\n            return type1 === getActionTypeFromInstance(action2);\n        });\n    }\n    /**\n     * Set a deeply nested value. Example:\n     *\n     *   setValue({ foo: { bar: { eat: false } } },\n     *      'foo.bar.eat', true) //=> { foo: { bar: { eat: true } } }\n     *\n     * While it traverses it also creates new objects from top down.\n     *\n     * @ignore\n     * @type {?}\n     */\n    var setValue = (/**\n     * @param {?} obj\n     * @param {?} prop\n     * @param {?} val\n     * @return {?}\n     */\n    function (obj, prop, val) {\n        obj = __assign({}, obj);\n        /** @type {?} */\n        var split = prop.split('.');\n        /** @type {?} */\n        var lastIndex = split.length - 1;\n        split.reduce((/**\n         * @param {?} acc\n         * @param {?} part\n         * @param {?} index\n         * @return {?}\n         */\n        function (acc, part, index) {\n            if (index === lastIndex) {\n                acc[part] = val;\n            }\n            else {\n                acc[part] = Array.isArray(acc[part]) ? acc[part].slice() : __assign({}, acc[part]);\n            }\n            return acc && acc[part];\n        }), obj);\n        return obj;\n    });\n    /**\n     * Get a deeply nested value. Example:\n     *\n     *    getValue({ foo: bar: [] }, 'foo.bar') //=> []\n     *\n     * @ignore\n     * @type {?}\n     */\n    var getValue = (/**\n     * @param {?} obj\n     * @param {?} prop\n     * @return {?}\n     */\n    function (obj, prop) {\n        return prop.split('.').reduce((/**\n         * @param {?} acc\n         * @param {?} part\n         * @return {?}\n         */\n        function (acc, part) { return acc && acc[part]; }), obj);\n    });\n    /**\n     * Simple object check.\n     *\n     *    isObject({a:1}) //=> true\n     *    isObject(1) //=> false\n     *\n     * @ignore\n     * @type {?}\n     */\n    var isObject = (/**\n     * @param {?} item\n     * @return {?}\n     */\n    function (item) {\n        return item && typeof item === 'object' && !Array.isArray(item);\n    });\n    /**\n     * Deep merge two objects.\n     *\n     *    mergeDeep({a:1, b:{x: 1, y:2}}, {b:{x: 3}, c:4}) //=> {a:1, b:{x:3, y:2}, c:4}\n     *\n     * \\@param base base object onto which `sources` will be applied\n     * @type {?}\n     */\n    var mergeDeep = (/**\n     * @param {?} base\n     * @param {...?} sources\n     * @return {?}\n     */\n    function (base) {\n        var sources = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            sources[_i - 1] = arguments[_i];\n        }\n        var _a, _b;\n        if (!sources.length)\n            return base;\n        /** @type {?} */\n        var source = sources.shift();\n        if (isObject(base) && isObject(source)) {\n            for (var key in source) {\n                if (isObject(source[key])) {\n                    if (!base[key])\n                        Object.assign(base, (_a = {}, _a[key] = {}, _a));\n                    mergeDeep(base[key], source[key]);\n                }\n                else {\n                    Object.assign(base, (_b = {}, _b[key] = source[key], _b));\n                }\n            }\n        }\n        return mergeDeep.apply(void 0, __spread([base], sources));\n    });\n\n    /**\n     * @fileoverview added by tsickle\n     * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n     */\n    /**\n     * @record\n     * @template T, U\n     */\n    function StateClassInternal() { }\n    if (false) {\n        /* Skipping unnamed member:\n        [META_KEY]?: MetaDataModel;*/\n        /* Skipping unnamed member:\n        [META_OPTIONS_KEY]?: StoreOptions<U>;*/\n    }\n    /**\n     * @record\n     * @template T\n     */\n    function StateOperations() { }\n    if (false) {\n        /**\n         * @return {?}\n         */\n        StateOperations.prototype.getState = function () { };\n        /**\n         * @param {?} val\n         * @return {?}\n         */\n        StateOperations.prototype.setState = function (val) { };\n        /**\n         * @param {?} actionOrActions\n         * @return {?}\n         */\n        StateOperations.prototype.dispatch = function (actionOrActions) { };\n    }\n    /**\n     * @record\n     */\n    function MetaDataModel() { }\n    if (false) {\n        /** @type {?} */\n        MetaDataModel.prototype.name;\n        /** @type {?} */\n        MetaDataModel.prototype.actions;\n        /** @type {?} */\n        MetaDataModel.prototype.defaults;\n        /** @type {?} */\n        MetaDataModel.prototype.path;\n        /** @type {?} */\n        MetaDataModel.prototype.makeRootSelector;\n        /** @type {?|undefined} */\n        MetaDataModel.prototype.children;\n    }\n    /**\n     * @record\n     */\n    function RuntimeSelectorContext() { }\n    if (false) {\n        /**\n         * @param {?} key\n         * @return {?}\n         */\n        RuntimeSelectorContext.prototype.getStateGetter = function (key) { };\n        /**\n         * @param {?=} localOptions\n         * @return {?}\n         */\n        RuntimeSelectorContext.prototype.getSelectorOptions = function (localOptions) { };\n    }\n    /**\n     * @record\n     */\n    function SharedSelectorOptions() { }\n    if (false) {\n        /** @type {?|undefined} */\n        SharedSelectorOptions.prototype.injectContainerState;\n        /** @type {?|undefined} */\n        SharedSelectorOptions.prototype.suppressErrors;\n    }\n    /**\n     * @record\n     */\n    function SelectorMetaDataModel() { }\n    if (false) {\n        /** @type {?} */\n        SelectorMetaDataModel.prototype.makeRootSelector;\n        /** @type {?} */\n        SelectorMetaDataModel.prototype.originalFn;\n        /** @type {?} */\n        SelectorMetaDataModel.prototype.containerClass;\n        /** @type {?} */\n        SelectorMetaDataModel.prototype.selectorName;\n        /** @type {?} */\n        SelectorMetaDataModel.prototype.getSelectorOptions;\n    }\n    /**\n     * @record\n     */\n    function MappedStore() { }\n    if (false) {\n        /** @type {?} */\n        MappedStore.prototype.name;\n        /** @type {?} */\n        MappedStore.prototype.isInitialised;\n        /** @type {?} */\n        MappedStore.prototype.actions;\n        /** @type {?} */\n        MappedStore.prototype.defaults;\n        /** @type {?} */\n        MappedStore.prototype.instance;\n        /** @type {?} */\n        MappedStore.prototype.path;\n    }\n    /**\n     * @record\n     */\n    function StatesAndDefaults() { }\n    if (false) {\n        /** @type {?} */\n        StatesAndDefaults.prototype.defaults;\n        /** @type {?} */\n        StatesAndDefaults.prototype.states;\n    }\n    /**\n     * @record\n     * @template T\n     */\n    function RootStateDiff() { }\n    if (false) {\n        /** @type {?} */\n        RootStateDiff.prototype.currentAppState;\n        /** @type {?} */\n        RootStateDiff.prototype.newAppState;\n    }\n    /**\n     * Ensures metadata is attached to the class and returns it.\n     *\n     * @ignore\n     * @param {?} target\n     * @return {?}\n     */\n    function ensureStoreMetadata(target) {\n        if (!target.hasOwnProperty(META_KEY)) {\n            /** @type {?} */\n            var defaultMetadata_1 = {\n                name: null,\n                actions: {},\n                defaults: {},\n                path: null,\n                makeRootSelector: /**\n                 * @param {?} context\n                 * @return {?}\n                 */\n                function (context) {\n                    return context.getStateGetter(defaultMetadata_1.name);\n                },\n                children: []\n            };\n            Object.defineProperty(target, META_KEY, { value: defaultMetadata_1 });\n        }\n        return getStoreMetadata(target);\n    }\n    /**\n     * Get the metadata attached to the state class if it exists.\n     *\n     * @ignore\n     * @param {?} target\n     * @return {?}\n     */\n    function getStoreMetadata(target) {\n        return (/** @type {?} */ (target[META_KEY]));\n    }\n    /**\n     * Ensures metadata is attached to the selector and returns it.\n     *\n     * @ignore\n     * @param {?} target\n     * @return {?}\n     */\n    function ensureSelectorMetadata(target) {\n        if (!target.hasOwnProperty(SELECTOR_META_KEY)) {\n            /** @type {?} */\n            var defaultMetadata = {\n                makeRootSelector: null,\n                originalFn: null,\n                containerClass: null,\n                selectorName: null,\n                getSelectorOptions: (/**\n                 * @return {?}\n                 */\n                function () { return ({}); })\n            };\n            Object.defineProperty(target, SELECTOR_META_KEY, { value: defaultMetadata });\n        }\n        return getSelectorMetadata(target);\n    }\n    /**\n     * Get the metadata attached to the selector if it exists.\n     *\n     * @ignore\n     * @param {?} target\n     * @return {?}\n     */\n    function getSelectorMetadata(target) {\n        return target[SELECTOR_META_KEY];\n    }\n    /**\n     * Get a deeply nested value. Example:\n     *\n     *    getValue({ foo: bar: [] }, 'foo.bar') //=> []\n     *\n     * Note: This is not as fast as the `fastPropGetter` but is strict Content Security Policy compliant.\n     * See perf hit: https://jsperf.com/fast-value-getter-given-path/1\n     *\n     * @ignore\n     * @param {?} paths\n     * @return {?}\n     */\n    function compliantPropGetter(paths) {\n        /** @type {?} */\n        var copyOfPaths = paths.slice();\n        return (/**\n         * @param {?} obj\n         * @return {?}\n         */\n        function (obj) { return copyOfPaths.reduce((/**\n         * @param {?} acc\n         * @param {?} part\n         * @return {?}\n         */\n        function (acc, part) { return acc && acc[part]; }), obj); });\n    }\n    /**\n     * The generated function is faster than:\n     * - pluck (Observable operator)\n     * - memoize\n     *\n     * @ignore\n     * @param {?} paths\n     * @return {?}\n     */\n    function fastPropGetter(paths) {\n        /** @type {?} */\n        var segments = paths;\n        /** @type {?} */\n        var seg = 'store.' + segments[0];\n        /** @type {?} */\n        var i = 0;\n        /** @type {?} */\n        var l = segments.length;\n        /** @type {?} */\n        var expr = seg;\n        while (++i < l) {\n            expr = expr + ' && ' + (seg = seg + '.' + segments[i]);\n        }\n        /** @type {?} */\n        var fn = new Function('store', 'return ' + expr + ';');\n        return (/** @type {?} */ (fn));\n    }\n    /**\n     * Get a deeply nested value. Example:\n     *\n     *    getValue({ foo: bar: [] }, 'foo.bar') //=> []\n     *\n     * @ignore\n     * @param {?} paths\n     * @param {?} config\n     * @return {?}\n     */\n    function propGetter(paths, config) {\n        if (config && config.compatibility && config.compatibility.strictContentSecurityPolicy) {\n            return compliantPropGetter(paths);\n        }\n        else {\n            return fastPropGetter(paths);\n        }\n    }\n    /**\n     * Given an array of states, it will return a object graph. Example:\n     *    const states = [\n     *      Cart,\n     *      CartSaved,\n     *      CartSavedItems\n     *    ]\n     *\n     * would return:\n     *\n     *  const graph = {\n     *    cart: ['saved'],\n     *    saved: ['items'],\n     *    items: []\n     *  };\n     *\n     * @ignore\n     * @param {?} stateClasses\n     * @return {?}\n     */\n    function buildGraph(stateClasses) {\n        /** @type {?} */\n        var findName = (/**\n         * @param {?} stateClass\n         * @return {?}\n         */\n        function (stateClass) {\n            /** @type {?} */\n            var meta = stateClasses.find((/**\n             * @param {?} g\n             * @return {?}\n             */\n            function (g) { return g === stateClass; }));\n            // Caretaker note: we have still left the `typeof` condition in order to avoid\n            // creating a breaking change for projects that still use the View Engine.\n            if ((typeof ngDevMode === 'undefined' || ngDevMode) && !meta) {\n                throw new Error(\"Child state not found: \" + stateClass + \". \\r\\nYou may have forgotten to add states to module\");\n            }\n            return (/** @type {?} */ ((/** @type {?} */ ((/** @type {?} */ (meta))[META_KEY])).name));\n        });\n        return stateClasses.reduce((/**\n         * @param {?} result\n         * @param {?} stateClass\n         * @return {?}\n         */\n        function (result, stateClass) {\n            var _a = (/** @type {?} */ (stateClass[META_KEY])), name = _a.name, children = _a.children;\n            result[(/** @type {?} */ (name))] = (children || []).map(findName);\n            return result;\n        }), {});\n    }\n    /**\n     * Given a states array, returns object graph\n     * returning the name and state metadata. Example:\n     *\n     *  const graph = {\n     *    cart: { metadata }\n     *  };\n     *\n     * @ignore\n     * @param {?} states\n     * @return {?}\n     */\n    function nameToState(states) {\n        return states.reduce((/**\n         * @param {?} result\n         * @param {?} stateClass\n         * @return {?}\n         */\n        function (result, stateClass) {\n            /** @type {?} */\n            var meta = (/** @type {?} */ (stateClass[META_KEY]));\n            result[(/** @type {?} */ (meta.name))] = stateClass;\n            return result;\n        }), {});\n    }\n    /**\n     * Given a object relationship graph will return the full path\n     * for the child items. Example:\n     *\n     *  const graph = {\n     *    cart: ['saved'],\n     *    saved: ['items'],\n     *    items: []\n     *  };\n     *\n     * would return:\n     *\n     *  const r = {\n     *    cart: 'cart',\n     *    saved: 'cart.saved',\n     *    items: 'cart.saved.items'\n     *  };\n     *\n     * @ignore\n     * @param {?} obj\n     * @param {?=} newObj\n     * @return {?}\n     */\n    function findFullParentPath(obj, newObj) {\n        if (newObj === void 0) { newObj = {}; }\n        /** @type {?} */\n        var visit = (/**\n         * @param {?} child\n         * @param {?} keyToFind\n         * @return {?}\n         */\n        function (child, keyToFind) {\n            for (var key in child) {\n                if (child.hasOwnProperty(key) && child[key].indexOf(keyToFind) >= 0) {\n                    /** @type {?} */\n                    var parent_1 = visit(child, key);\n                    return parent_1 !== null ? parent_1 + \".\" + key : key;\n                }\n            }\n            return null;\n        });\n        for (var key in obj) {\n            if (obj.hasOwnProperty(key)) {\n                /** @type {?} */\n                var parent_2 = visit(obj, key);\n                newObj[key] = parent_2 ? parent_2 + \".\" + key : key;\n            }\n        }\n        return newObj;\n    }\n    /**\n     * Given a object graph, it will return the items topologically sorted Example:\n     *\n     *  const graph = {\n     *    cart: ['saved'],\n     *    saved: ['items'],\n     *    items: []\n     *  };\n     *\n     * would return:\n     *\n     *  const results = [\n     *    'items',\n     *    'saved',\n     *    'cart'\n     *  ];\n     *\n     * @ignore\n     * @param {?} graph\n     * @return {?}\n     */\n    function topologicalSort(graph) {\n        /** @type {?} */\n        var sorted = [];\n        /** @type {?} */\n        var visited = {};\n        /** @type {?} */\n        var visit = (/**\n         * @param {?} name\n         * @param {?=} ancestors\n         * @return {?}\n         */\n        function (name, ancestors) {\n            if (ancestors === void 0) { ancestors = []; }\n            if (!Array.isArray(ancestors)) {\n                ancestors = [];\n            }\n            ancestors.push(name);\n            visited[name] = true;\n            graph[name].forEach((/**\n             * @param {?} dep\n             * @return {?}\n             */\n            function (dep) {\n                // Caretaker note: we have still left the `typeof` condition in order to avoid\n                // creating a breaking change for projects that still use the View Engine.\n                if ((typeof ngDevMode === 'undefined' || ngDevMode) && ancestors.indexOf(dep) >= 0) {\n                    throw new Error(\"Circular dependency '\" + dep + \"' is required by '\" + name + \"': \" + ancestors.join(' -> '));\n                }\n                if (visited[dep]) {\n                    return;\n                }\n                visit(dep, ancestors.slice(0));\n            }));\n            if (sorted.indexOf(name) < 0) {\n                sorted.push(name);\n            }\n        });\n        Object.keys(graph).forEach((/**\n         * @param {?} k\n         * @return {?}\n         */\n        function (k) { return visit(k); }));\n        return sorted.reverse();\n    }\n    /**\n     * Returns if the parameter is a object or not.\n     *\n     * @ignore\n     * @param {?} obj\n     * @return {?}\n     */\n    function isObject$1(obj) {\n        return (typeof obj === 'object' && obj !== null) || typeof obj === 'function';\n    }\n    /**\n     * @template T\n     * @param {?} mappedStore\n     * @param {?} diff\n     * @return {?}\n     */\n    function getStateDiffChanges(mappedStore, diff) {\n        /** @type {?} */\n        var previousValue = getValue(diff.currentAppState, mappedStore.path);\n        /** @type {?} */\n        var currentValue = getValue(diff.newAppState, mappedStore.path);\n        return new NgxsSimpleChange(previousValue, currentValue, !mappedStore.isInitialised);\n    }\n\n    /**\n     * @fileoverview added by tsickle\n     * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n     */\n    /**\n     * @record\n     * @template T, E\n     */\n    function ActionCompletion() { }\n    if (false) {\n        /** @type {?} */\n        ActionCompletion.prototype.action;\n        /** @type {?} */\n        ActionCompletion.prototype.result;\n    }\n    /**\n     * RxJS operator for selecting out specific actions.\n     *\n     * This will grab actions that have just been dispatched as well as actions that have completed\n     * @param {...?} allowedTypes\n     * @return {?}\n     */\n    function ofAction() {\n        var allowedTypes = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            allowedTypes[_i] = arguments[_i];\n        }\n        return ofActionOperator(allowedTypes);\n    }\n    /**\n     * RxJS operator for selecting out specific actions.\n     *\n     * This will ONLY grab actions that have just been dispatched\n     * @param {...?} allowedTypes\n     * @return {?}\n     */\n    function ofActionDispatched() {\n        var allowedTypes = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            allowedTypes[_i] = arguments[_i];\n        }\n        return ofActionOperator(allowedTypes, [\"DISPATCHED\" /* Dispatched */]);\n    }\n    /**\n     * RxJS operator for selecting out specific actions.\n     *\n     * This will ONLY grab actions that have just been successfully completed\n     * @param {...?} allowedTypes\n     * @return {?}\n     */\n    function ofActionSuccessful() {\n        var allowedTypes = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            allowedTypes[_i] = arguments[_i];\n        }\n        return ofActionOperator(allowedTypes, [\"SUCCESSFUL\" /* Successful */]);\n    }\n    /**\n     * RxJS operator for selecting out specific actions.\n     *\n     * This will ONLY grab actions that have just been canceled\n     * @param {...?} allowedTypes\n     * @return {?}\n     */\n    function ofActionCanceled() {\n        var allowedTypes = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            allowedTypes[_i] = arguments[_i];\n        }\n        return ofActionOperator(allowedTypes, [\"CANCELED\" /* Canceled */]);\n    }\n    /**\n     * RxJS operator for selecting out specific actions.\n     *\n     * This will ONLY grab actions that have just been completed\n     * @param {...?} allowedTypes\n     * @return {?}\n     */\n    function ofActionCompleted() {\n        var allowedTypes = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            allowedTypes[_i] = arguments[_i];\n        }\n        /** @type {?} */\n        var allowedStatuses = [\n            \"SUCCESSFUL\" /* Successful */,\n            \"CANCELED\" /* Canceled */,\n            \"ERRORED\" /* Errored */\n        ];\n        return ofActionOperator(allowedTypes, allowedStatuses, mapActionResult);\n    }\n    /**\n     * RxJS operator for selecting out specific actions.\n     *\n     * This will ONLY grab actions that have just thrown an error\n     * @param {...?} allowedTypes\n     * @return {?}\n     */\n    function ofActionErrored() {\n        var allowedTypes = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            allowedTypes[_i] = arguments[_i];\n        }\n        return ofActionOperator(allowedTypes, [\"ERRORED\" /* Errored */]);\n    }\n    /**\n     * @param {?} allowedTypes\n     * @param {?=} statuses\n     * @param {?=} mapOperator\n     * @return {?}\n     */\n    function ofActionOperator(allowedTypes, statuses, \n    // This actually could've been `OperatorFunction<ActionContext, ActionCompletion | any>`,\n    // since it maps either to `ctx.action` OR to `ActionCompletion`. But `ActionCompleteion | any`\n    // defaults to `any`, thus there is no sense from union type.\n    mapOperator) {\n        if (mapOperator === void 0) { mapOperator = mapAction; }\n        /** @type {?} */\n        var allowedMap = createAllowedActionTypesMap(allowedTypes);\n        /** @type {?} */\n        var allowedStatusMap = statuses && createAllowedStatusesMap(statuses);\n        return (/**\n         * @param {?} o\n         * @return {?}\n         */\n        function (o) {\n            return o.pipe(filterStatus(allowedMap, allowedStatusMap), mapOperator());\n        });\n    }\n    /**\n     * @param {?} allowedTypes\n     * @param {?=} allowedStatuses\n     * @return {?}\n     */\n    function filterStatus(allowedTypes, allowedStatuses) {\n        return operators.filter((/**\n         * @param {?} ctx\n         * @return {?}\n         */\n        function (ctx) {\n            /** @type {?} */\n            var actionType = (/** @type {?} */ (getActionTypeFromInstance(ctx.action)));\n            /** @type {?} */\n            var typeMatch = allowedTypes[actionType];\n            /** @type {?} */\n            var statusMatch = allowedStatuses ? allowedStatuses[ctx.status] : true;\n            return typeMatch && statusMatch;\n        }));\n    }\n    /**\n     * @return {?}\n     */\n    function mapActionResult() {\n        return operators.map((/**\n         * @param {?} __0\n         * @return {?}\n         */\n        function (_a) {\n            var action = _a.action, status = _a.status, error = _a.error;\n            return (/** @type {?} */ ({\n                action: action,\n                result: {\n                    successful: \"SUCCESSFUL\" /* Successful */ === status,\n                    canceled: \"CANCELED\" /* Canceled */ === status,\n                    error: error\n                }\n            }));\n        }));\n    }\n    /**\n     * @template T\n     * @return {?}\n     */\n    function mapAction() {\n        return operators.map((/**\n         * @param {?} ctx\n         * @return {?}\n         */\n        function (ctx) { return (/** @type {?} */ (ctx.action)); }));\n    }\n    /**\n     * @record\n     */\n    function FilterMap() { }\n    /**\n     * @param {?} types\n     * @return {?}\n     */\n    function createAllowedActionTypesMap(types) {\n        return types.reduce((/**\n         * @param {?} filterMap\n         * @param {?} klass\n         * @return {?}\n         */\n        function (filterMap, klass) {\n            filterMap[(/** @type {?} */ (getActionTypeFromInstance(klass)))] = true;\n            return filterMap;\n        }), (/** @type {?} */ ({})));\n    }\n    /**\n     * @param {?} statuses\n     * @return {?}\n     */\n    function createAllowedStatusesMap(statuses) {\n        return statuses.reduce((/**\n         * @param {?} filterMap\n         * @param {?} status\n         * @return {?}\n         */\n        function (filterMap, status) {\n            filterMap[status] = true;\n            return filterMap;\n        }), (/** @type {?} */ ({})));\n    }\n\n    /**\n     * @fileoverview added by tsickle\n     * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n     */\n    /**\n     * Returns operator that will run\n     * `subscribe` outside of the ngxs execution context\n     * @template T\n     * @param {?} ngxsExecutionStrategy\n     * @return {?}\n     */\n    function leaveNgxs(ngxsExecutionStrategy) {\n        return (/**\n         * @param {?} source\n         * @return {?}\n         */\n        function (source) {\n            return new rxjs.Observable((/**\n             * @param {?} sink\n             * @return {?}\n             */\n            function (sink) {\n                return source.subscribe({\n                    next: /**\n                     * @param {?} value\n                     * @return {?}\n                     */\n                    function (value) {\n                        ngxsExecutionStrategy.leave((/**\n                         * @return {?}\n                         */\n                        function () { return sink.next(value); }));\n                    },\n                    error: /**\n                     * @param {?} error\n                     * @return {?}\n                     */\n                    function (error) {\n                        ngxsExecutionStrategy.leave((/**\n                         * @return {?}\n                         */\n                        function () { return sink.error(error); }));\n                    },\n                    complete: /**\n                     * @return {?}\n                     */\n                    function () {\n                        ngxsExecutionStrategy.leave((/**\n                         * @return {?}\n                         */\n                        function () { return sink.complete(); }));\n                    }\n                });\n            }));\n        });\n    }\n\n    /**\n     * @fileoverview added by tsickle\n     * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n     */\n    var InternalNgxsExecutionStrategy = /** @class */ (function () {\n        function InternalNgxsExecutionStrategy(_executionStrategy) {\n            this._executionStrategy = _executionStrategy;\n        }\n        /**\n         * @template T\n         * @param {?} func\n         * @return {?}\n         */\n        InternalNgxsExecutionStrategy.prototype.enter = /**\n         * @template T\n         * @param {?} func\n         * @return {?}\n         */\n        function (func) {\n            return this._executionStrategy.enter(func);\n        };\n        /**\n         * @template T\n         * @param {?} func\n         * @return {?}\n         */\n        InternalNgxsExecutionStrategy.prototype.leave = /**\n         * @template T\n         * @param {?} func\n         * @return {?}\n         */\n        function (func) {\n            return this._executionStrategy.leave(func);\n        };\n        InternalNgxsExecutionStrategy.decorators = [\n            { type: core.Injectable }\n        ];\n        /** @nocollapse */\n        InternalNgxsExecutionStrategy.ctorParameters = function () { return [\n            { type: undefined, decorators: [{ type: core.Inject, args: [NGXS_EXECUTION_STRATEGY,] }] }\n        ]; };\n        return InternalNgxsExecutionStrategy;\n    }());\n    if (false) {\n        /**\n         * @type {?}\n         * @private\n         */\n        InternalNgxsExecutionStrategy.prototype._executionStrategy;\n    }\n\n    /**\n     * @fileoverview added by tsickle\n     * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n     */\n    /** @enum {string} */\n    var ActionStatus = {\n        Dispatched: 'DISPATCHED',\n        Successful: 'SUCCESSFUL',\n        Canceled: 'CANCELED',\n        Errored: 'ERRORED',\n    };\n    /**\n     * @record\n     * @template T\n     */\n    function ActionContext() { }\n    if (false) {\n        /** @type {?} */\n        ActionContext.prototype.status;\n        /** @type {?} */\n        ActionContext.prototype.action;\n        /** @type {?|undefined} */\n        ActionContext.prototype.error;\n    }\n    /**\n     * Custom Subject that ensures that subscribers are notified of values in the order that they arrived.\n     * A standard Subject does not have this guarantee.\n     * For example, given the following code:\n     * ```typescript\n     *   const subject = new Subject<string>();\n     * subject.subscribe(value => {\n     * if (value === 'start') subject.next('end');\n     * });\n     * subject.subscribe(value => { });\n     * subject.next('start');\n     * ```\n     * When `subject` is a standard `Subject<T>` the second subscriber would recieve `end` and then `start`.\n     * When `subject` is a `OrderedSubject<T>` the second subscriber would recieve `start` and then `end`.\n     * @template T\n     */\n    var   /**\n     * Custom Subject that ensures that subscribers are notified of values in the order that they arrived.\n     * A standard Subject does not have this guarantee.\n     * For example, given the following code:\n     * ```typescript\n     *   const subject = new Subject<string>();\n     * subject.subscribe(value => {\n     * if (value === 'start') subject.next('end');\n     * });\n     * subject.subscribe(value => { });\n     * subject.next('start');\n     * ```\n     * When `subject` is a standard `Subject<T>` the second subscriber would recieve `end` and then `start`.\n     * When `subject` is a `OrderedSubject<T>` the second subscriber would recieve `start` and then `end`.\n     * @template T\n     */\n    OrderedSubject = /** @class */ (function (_super) {\n        __extends(OrderedSubject, _super);\n        function OrderedSubject() {\n            var _this = _super !== null && _super.apply(this, arguments) || this;\n            _this._itemQueue = [];\n            _this._busyPushingNext = false;\n            return _this;\n        }\n        /**\n         * @param {?=} value\n         * @return {?}\n         */\n        OrderedSubject.prototype.next = /**\n         * @param {?=} value\n         * @return {?}\n         */\n        function (value) {\n            if (this._busyPushingNext) {\n                this._itemQueue.unshift((/** @type {?} */ (value)));\n                return;\n            }\n            this._busyPushingNext = true;\n            _super.prototype.next.call(this, value);\n            while (this._itemQueue.length > 0) {\n                /** @type {?} */\n                var nextValue = this._itemQueue.pop();\n                _super.prototype.next.call(this, nextValue);\n            }\n            this._busyPushingNext = false;\n        };\n        return OrderedSubject;\n    }(rxjs.Subject));\n    if (false) {\n        /**\n         * @type {?}\n         * @private\n         */\n        OrderedSubject.prototype._itemQueue;\n        /**\n         * @type {?}\n         * @private\n         */\n        OrderedSubject.prototype._busyPushingNext;\n    }\n    /**\n     * Internal Action stream that is emitted anytime an action is dispatched.\n     */\n    var InternalActions = /** @class */ (function (_super) {\n        __extends(InternalActions, _super);\n        function InternalActions() {\n            return _super !== null && _super.apply(this, arguments) || this;\n        }\n        InternalActions.decorators = [\n            { type: core.Injectable }\n        ];\n        return InternalActions;\n    }(OrderedSubject));\n    /**\n     * Action stream that is emitted anytime an action is dispatched.\n     *\n     * You can listen to this in services to react without stores.\n     */\n    var Actions = /** @class */ (function (_super) {\n        __extends(Actions, _super);\n        function Actions(internalActions$, internalExecutionStrategy) {\n            return _super.call(this, (/**\n             * @param {?} observer\n             * @return {?}\n             */\n            function (observer) {\n                /** @type {?} */\n                var childSubscription = internalActions$\n                    .pipe(leaveNgxs(internalExecutionStrategy))\n                    .subscribe({\n                    next: (/**\n                     * @param {?} ctx\n                     * @return {?}\n                     */\n                    function (ctx) { return observer.next(ctx); }),\n                    error: (/**\n                     * @param {?} error\n                     * @return {?}\n                     */\n                    function (error) { return observer.error(error); }),\n                    complete: (/**\n                     * @return {?}\n                     */\n                    function () { return observer.complete(); })\n                });\n                observer.add(childSubscription);\n            })) || this;\n        }\n        Actions.decorators = [\n            { type: core.Injectable }\n        ];\n        /** @nocollapse */\n        Actions.ctorParameters = function () { return [\n            { type: InternalActions },\n            { type: InternalNgxsExecutionStrategy }\n        ]; };\n        return Actions;\n    }(rxjs.Observable));\n\n    /**\n     * @fileoverview added by tsickle\n     * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n     */\n    /**\n     * Composes a array of functions from left to right. Example:\n     *\n     *      compose([fn, final])(state, action);\n     *\n     * then the funcs have a signature like:\n     *\n     *      function fn (state, action, next) {\n     *          console.log('here', state, action, next);\n     *          return next(state, action);\n     *      }\n     *\n     *      function final (state, action) {\n     *          console.log('here', state, action);\n     *          return state;\n     *      }\n     *\n     * the last function should not call `next`.\n     *\n     * @ignore\n     * @type {?}\n     */\n    var compose = (/**\n     * @param {?} funcs\n     * @return {?}\n     */\n    function (funcs) { return (/**\n     * @param {...?} args\n     * @return {?}\n     */\n    function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        /** @type {?} */\n        var curr = (/** @type {?} */ (funcs.shift()));\n        return curr.apply(void 0, __spread(args, [(/**\n             * @param {...?} nextArgs\n             * @return {?}\n             */\n            function () {\n                var nextArgs = [];\n                for (var _i = 0; _i < arguments.length; _i++) {\n                    nextArgs[_i] = arguments[_i];\n                }\n                return compose(funcs).apply(void 0, __spread(nextArgs));\n            })]));\n    }); });\n\n    /**\n     * @fileoverview added by tsickle\n     * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n     */\n    /**\n     * BehaviorSubject of the entire state.\n     * @ignore\n     */\n    var StateStream = /** @class */ (function (_super) {\n        __extends(StateStream, _super);\n        function StateStream() {\n            return _super.call(this, {}) || this;\n        }\n        /**\n         * @return {?}\n         */\n        StateStream.prototype.ngOnDestroy = /**\n         * @return {?}\n         */\n        function () {\n            // The `StateStream` should never emit values once the root view is removed, e.g. when the `NgModuleRef.destroy()` is called.\n            // This will eliminate memory leaks in server-side rendered apps where the `StateStream` is created per each HTTP request, users\n            // might forget to unsubscribe from `store.select` or `store.subscribe`, thus this will lead to huge memory leaks in SSR apps.\n            this.complete();\n        };\n        StateStream.decorators = [\n            { type: core.Injectable }\n        ];\n        /** @nocollapse */\n        StateStream.ctorParameters = function () { return []; };\n        return StateStream;\n    }(rxjs.BehaviorSubject));\n\n    /**\n     * @fileoverview added by tsickle\n     * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n     */\n    var PluginManager = /** @class */ (function () {\n        function PluginManager(_parentManager, _pluginHandlers) {\n            this._parentManager = _parentManager;\n            this._pluginHandlers = _pluginHandlers;\n            this.plugins = [];\n            this.registerHandlers();\n        }\n        Object.defineProperty(PluginManager.prototype, \"rootPlugins\", {\n            get: /**\n             * @private\n             * @return {?}\n             */\n            function () {\n                return (this._parentManager && this._parentManager.plugins) || this.plugins;\n            },\n            enumerable: true,\n            configurable: true\n        });\n        /**\n         * @private\n         * @return {?}\n         */\n        PluginManager.prototype.registerHandlers = /**\n         * @private\n         * @return {?}\n         */\n        function () {\n            var _a;\n            /** @type {?} */\n            var pluginHandlers = this.getPluginHandlers();\n            (_a = this.rootPlugins).push.apply(_a, __spread(pluginHandlers));\n        };\n        /**\n         * @private\n         * @return {?}\n         */\n        PluginManager.prototype.getPluginHandlers = /**\n         * @private\n         * @return {?}\n         */\n        function () {\n            /** @type {?} */\n            var handlers = this._pluginHandlers || [];\n            return handlers.map((/**\n             * @param {?} plugin\n             * @return {?}\n             */\n            function (plugin) { return (/** @type {?} */ ((plugin.handle ? plugin.handle.bind(plugin) : plugin))); }));\n        };\n        PluginManager.decorators = [\n            { type: core.Injectable }\n        ];\n        /** @nocollapse */\n        PluginManager.ctorParameters = function () { return [\n            { type: PluginManager, decorators: [{ type: core.Optional }, { type: core.SkipSelf }] },\n            { type: Array, decorators: [{ type: core.Inject, args: [NGXS_PLUGINS,] }, { type: core.Optional }] }\n        ]; };\n        return PluginManager;\n    }());\n    if (false) {\n        /** @type {?} */\n        PluginManager.prototype.plugins;\n        /**\n         * @type {?}\n         * @private\n         */\n        PluginManager.prototype._parentManager;\n        /**\n         * @type {?}\n         * @private\n         */\n        PluginManager.prototype._pluginHandlers;\n    }\n\n    /**\n     * @fileoverview added by tsickle\n     * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n     */\n    /**\n     * Internal Action result stream that is emitted when an action is completed.\n     * This is used as a method of returning the action result to the dispatcher\n     * for the observable returned by the dispatch(...) call.\n     * The dispatcher then asynchronously pushes the result from this stream onto the main action stream as a result.\n     */\n    var InternalDispatchedActionResults = /** @class */ (function (_super) {\n        __extends(InternalDispatchedActionResults, _super);\n        function InternalDispatchedActionResults() {\n            return _super !== null && _super.apply(this, arguments) || this;\n        }\n        InternalDispatchedActionResults.decorators = [\n            { type: core.Injectable }\n        ];\n        return InternalDispatchedActionResults;\n    }(rxjs.Subject));\n    var InternalDispatcher = /** @class */ (function () {\n        function InternalDispatcher(_injector, _actions, _actionResults, _pluginManager, _stateStream, _ngxsExecutionStrategy) {\n            this._injector = _injector;\n            this._actions = _actions;\n            this._actionResults = _actionResults;\n            this._pluginManager = _pluginManager;\n            this._stateStream = _stateStream;\n            this._ngxsExecutionStrategy = _ngxsExecutionStrategy;\n        }\n        /**\n         * Dispatches event(s).\n         */\n        /**\n         * Dispatches event(s).\n         * @param {?} actionOrActions\n         * @return {?}\n         */\n        InternalDispatcher.prototype.dispatch = /**\n         * Dispatches event(s).\n         * @param {?} actionOrActions\n         * @return {?}\n         */\n        function (actionOrActions) {\n            var _this = this;\n            /** @type {?} */\n            var result = this._ngxsExecutionStrategy.enter((/**\n             * @return {?}\n             */\n            function () {\n                return _this.dispatchByEvents(actionOrActions);\n            }));\n            result.subscribe({\n                error: (/**\n                 * @param {?} error\n                 * @return {?}\n                 */\n                function (error) {\n                    return _this._ngxsExecutionStrategy.leave((/**\n                     * @return {?}\n                     */\n                    function () {\n                        try {\n                            // Retrieve lazily to avoid cyclic dependency exception\n                            _this._errorHandler = _this._errorHandler || _this._injector.get(core.ErrorHandler);\n                            _this._errorHandler.handleError(error);\n                        }\n                        catch (_a) { }\n                    }));\n                })\n            });\n            return result.pipe(leaveNgxs(this._ngxsExecutionStrategy));\n        };\n        /**\n         * @private\n         * @param {?} actionOrActions\n         * @return {?}\n         */\n        InternalDispatcher.prototype.dispatchByEvents = /**\n         * @private\n         * @param {?} actionOrActions\n         * @return {?}\n         */\n        function (actionOrActions) {\n            var _this = this;\n            if (Array.isArray(actionOrActions)) {\n                if (actionOrActions.length === 0)\n                    return rxjs.of(this._stateStream.getValue());\n                return rxjs.forkJoin(actionOrActions.map((/**\n                 * @param {?} action\n                 * @return {?}\n                 */\n                function (action) { return _this.dispatchSingle(action); })));\n            }\n            else {\n                return this.dispatchSingle(actionOrActions);\n            }\n        };\n        /**\n         * @private\n         * @param {?} action\n         * @return {?}\n         */\n        InternalDispatcher.prototype.dispatchSingle = /**\n         * @private\n         * @param {?} action\n         * @return {?}\n         */\n        function (action) {\n            var _this = this;\n            /** @type {?} */\n            var type = getActionTypeFromInstance(action);\n            if (!type) {\n                /** @type {?} */\n                var error = new Error(\"This action doesn't have a type property: \" + action.constructor.name);\n                return rxjs.throwError(error);\n            }\n            /** @type {?} */\n            var prevState = this._stateStream.getValue();\n            /** @type {?} */\n            var plugins = this._pluginManager.plugins;\n            return ((/** @type {?} */ (compose(__spread(plugins, [\n                (/**\n                 * @param {?} nextState\n                 * @param {?} nextAction\n                 * @return {?}\n                 */\n                function (nextState, nextAction) {\n                    if (nextState !== prevState) {\n                        _this._stateStream.next(nextState);\n                    }\n                    /** @type {?} */\n                    var actionResult$ = _this.getActionResultStream(nextAction);\n                    actionResult$.subscribe((/**\n                     * @param {?} ctx\n                     * @return {?}\n                     */\n                    function (ctx) { return _this._actions.next(ctx); }));\n                    _this._actions.next({ action: nextAction, status: \"DISPATCHED\" /* Dispatched */ });\n                    return _this.createDispatchObservable(actionResult$);\n                })\n            ]))(prevState, action)))).pipe(operators.shareReplay());\n        };\n        /**\n         * @private\n         * @param {?} action\n         * @return {?}\n         */\n        InternalDispatcher.prototype.getActionResultStream = /**\n         * @private\n         * @param {?} action\n         * @return {?}\n         */\n        function (action) {\n            return this._actionResults.pipe(operators.filter((/**\n             * @param {?} ctx\n             * @return {?}\n             */\n            function (ctx) { return ctx.action === action && ctx.status !== \"DISPATCHED\" /* Dispatched */; })), operators.take(1), operators.shareReplay());\n        };\n        /**\n         * @private\n         * @param {?} actionResult$\n         * @return {?}\n         */\n        InternalDispatcher.prototype.createDispatchObservable = /**\n         * @private\n         * @param {?} actionResult$\n         * @return {?}\n         */\n        function (actionResult$) {\n            var _this = this;\n            return actionResult$\n                .pipe(operators.exhaustMap((/**\n             * @param {?} ctx\n             * @return {?}\n             */\n            function (ctx) {\n                switch (ctx.status) {\n                    case \"SUCCESSFUL\" /* Successful */:\n                        return rxjs.of(_this._stateStream.getValue());\n                    case \"ERRORED\" /* Errored */:\n                        return rxjs.throwError(ctx.error);\n                    default:\n                        return rxjs.EMPTY;\n                }\n            })))\n                .pipe(operators.shareReplay());\n        };\n        InternalDispatcher.decorators = [\n            { type: core.Injectable }\n        ];\n        /** @nocollapse */\n        InternalDispatcher.ctorParameters = function () { return [\n            { type: core.Injector },\n            { type: InternalActions },\n            { type: InternalDispatchedActionResults },\n            { type: PluginManager },\n            { type: StateStream },\n            { type: InternalNgxsExecutionStrategy }\n        ]; };\n        return InternalDispatcher;\n    }());\n    if (false) {\n        /**\n         * @type {?}\n         * @private\n         */\n        InternalDispatcher.prototype._errorHandler;\n        /**\n         * @type {?}\n         * @private\n         */\n        InternalDispatcher.prototype._injector;\n        /**\n         * @type {?}\n         * @private\n         */\n        InternalDispatcher.prototype._actions;\n        /**\n         * @type {?}\n         * @private\n         */\n        InternalDispatcher.prototype._actionResults;\n        /**\n         * @type {?}\n         * @private\n         */\n        InternalDispatcher.prototype._pluginManager;\n        /**\n         * @type {?}\n         * @private\n         */\n        InternalDispatcher.prototype._stateStream;\n        /**\n         * @type {?}\n         * @private\n         */\n        InternalDispatcher.prototype._ngxsExecutionStrategy;\n    }\n\n    /**\n     * @fileoverview added by tsickle\n     * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n     */\n    /**\n     * Object freeze code\n     * https://github.com/jsdf/deep-freeze\n     * @type {?}\n     */\n    var deepFreeze = (/**\n     * @param {?} o\n     * @return {?}\n     */\n    function (o) {\n        Object.freeze(o);\n        /** @type {?} */\n        var oIsFunction = typeof o === 'function';\n        /** @type {?} */\n        var hasOwnProp = Object.prototype.hasOwnProperty;\n        Object.getOwnPropertyNames(o).forEach((/**\n         * @param {?} prop\n         * @return {?}\n         */\n        function (prop) {\n            if (hasOwnProp.call(o, prop) &&\n                (oIsFunction ? prop !== 'caller' && prop !== 'callee' && prop !== 'arguments' : true) &&\n                o[prop] !== null &&\n                (typeof o[prop] === 'object' || typeof o[prop] === 'function') &&\n                !Object.isFrozen(o[prop])) {\n                deepFreeze(o[prop]);\n            }\n        }));\n        return o;\n    });\n\n    /**\n     * @fileoverview added by tsickle\n     * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n     */\n    /**\n     * State Context factory class\n     * @ignore\n     */\n    var InternalStateOperations = /** @class */ (function () {\n        function InternalStateOperations(_stateStream, _dispatcher, _config) {\n            this._stateStream = _stateStream;\n            this._dispatcher = _dispatcher;\n            this._config = _config;\n        }\n        /**\n         * Returns the root state operators.\n         */\n        /**\n         * Returns the root state operators.\n         * @return {?}\n         */\n        InternalStateOperations.prototype.getRootStateOperations = /**\n         * Returns the root state operators.\n         * @return {?}\n         */\n        function () {\n            var _this = this;\n            /** @type {?} */\n            var rootStateOperations = {\n                getState: (/**\n                 * @return {?}\n                 */\n                function () { return _this._stateStream.getValue(); }),\n                setState: (/**\n                 * @param {?} newState\n                 * @return {?}\n                 */\n                function (newState) { return _this._stateStream.next(newState); }),\n                dispatch: (/**\n                 * @param {?} actionOrActions\n                 * @return {?}\n                 */\n                function (actionOrActions) { return _this._dispatcher.dispatch(actionOrActions); })\n            };\n            // We have to have that duplication since this will allow us to tree-shake `ensureStateAndActionsAreImmutable`\n            // and `deepFreeze` in Ivy production build.\n            // The below `if` condition checks 2 things:\n            // 1) if we're in View Engine (`ngDevMode` is `undefined`)\n            // 2) if we're running tests, we should fallback to `config.developmentMode` to be backwards-compatible\n            if (typeof ngDevMode === 'undefined' || (ngDevMode && internals.isAngularInTestMode())) {\n                return this._config.developmentMode\n                    ? ensureStateAndActionsAreImmutable(rootStateOperations)\n                    : rootStateOperations;\n            }\n            else {\n                // If we're in Ivy and not running tests, then tree-shake `ensureStateAndActionsAreImmutable` and `deepFreeze`.\n                return ngDevMode\n                    ? ensureStateAndActionsAreImmutable(rootStateOperations)\n                    : rootStateOperations;\n            }\n        };\n        /**\n         * @param {?} results\n         * @return {?}\n         */\n        InternalStateOperations.prototype.setStateToTheCurrentWithNew = /**\n         * @param {?} results\n         * @return {?}\n         */\n        function (results) {\n            /** @type {?} */\n            var stateOperations = this.getRootStateOperations();\n            // Get our current stream\n            /** @type {?} */\n            var currentState = stateOperations.getState();\n            // Set the state to the current + new\n            stateOperations.setState(__assign({}, currentState, results.defaults));\n        };\n        InternalStateOperations.decorators = [\n            { type: core.Injectable }\n        ];\n        /** @nocollapse */\n        InternalStateOperations.ctorParameters = function () { return [\n            { type: StateStream },\n            { type: InternalDispatcher },\n            { type: NgxsConfig }\n        ]; };\n        return InternalStateOperations;\n    }());\n    if (false) {\n        /**\n         * @type {?}\n         * @private\n         */\n        InternalStateOperations.prototype._stateStream;\n        /**\n         * @type {?}\n         * @private\n         */\n        InternalStateOperations.prototype._dispatcher;\n        /**\n         * @type {?}\n         * @private\n         */\n        InternalStateOperations.prototype._config;\n    }\n    /**\n     * @param {?} root\n     * @return {?}\n     */\n    function ensureStateAndActionsAreImmutable(root) {\n        return {\n            getState: (/**\n             * @return {?}\n             */\n            function () { return root.getState(); }),\n            setState: (/**\n             * @param {?} value\n             * @return {?}\n             */\n            function (value) {\n                /** @type {?} */\n                var frozenValue = deepFreeze(value);\n                return root.setState(frozenValue);\n            }),\n            dispatch: (/**\n             * @param {?} actions\n             * @return {?}\n             */\n            function (actions) {\n                return root.dispatch(actions);\n            })\n        };\n    }\n\n    /**\n     * @fileoverview added by tsickle\n     * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n     */\n    /**\n     * @template T\n     * @param {?} val\n     * @return {?}\n     */\n    function simplePatch(val) {\n        return (/**\n         * @param {?} existingState\n         * @return {?}\n         */\n        function (existingState) {\n            if (Array.isArray(val)) {\n                throwPatchingArrayError();\n            }\n            else if (typeof val !== 'object') {\n                throwPatchingPrimitiveError();\n            }\n            /** @type {?} */\n            var newState = __assign({}, ((/** @type {?} */ (existingState))));\n            for (var key in val) {\n                // deep clone for patch compatibility\n                // noinspection JSUnfilteredForInLoop (IDE)\n                newState[key] = ((/** @type {?} */ (val)))[key];\n            }\n            return (/** @type {?} */ (newState));\n        });\n    }\n\n    /**\n     * @fileoverview added by tsickle\n     * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n     */\n    /**\n     * State Context factory class\n     * @ignore\n     */\n    var StateContextFactory = /** @class */ (function () {\n        function StateContextFactory(_internalStateOperations) {\n            this._internalStateOperations = _internalStateOperations;\n        }\n        /**\n         * Create the state context\n         */\n        /**\n         * Create the state context\n         * @template T\n         * @param {?} mappedStore\n         * @return {?}\n         */\n        StateContextFactory.prototype.createStateContext = /**\n         * Create the state context\n         * @template T\n         * @param {?} mappedStore\n         * @return {?}\n         */\n        function (mappedStore) {\n            /** @type {?} */\n            var root = this._internalStateOperations.getRootStateOperations();\n            /**\n             * @param {?} currentAppState\n             * @return {?}\n             */\n            function getState(currentAppState) {\n                return getValue(currentAppState, mappedStore.path);\n            }\n            /**\n             * @param {?} currentAppState\n             * @param {?} newValue\n             * @return {?}\n             */\n            function setStateValue(currentAppState, newValue) {\n                /** @type {?} */\n                var newAppState = setValue(currentAppState, mappedStore.path, newValue);\n                /** @type {?} */\n                var instance = mappedStore.instance;\n                if (instance.ngxsOnChanges) {\n                    /** @type {?} */\n                    var change = getStateDiffChanges(mappedStore, {\n                        currentAppState: currentAppState,\n                        newAppState: newAppState\n                    });\n                    instance.ngxsOnChanges(change);\n                }\n                root.setState(newAppState);\n                return newAppState;\n                // In doing this refactoring I noticed that there is a 'bug' where the\n                // application state is returned instead of this state slice.\n                // This has worked this way since the beginning see:\n                // https://github.com/ngxs/store/blame/324c667b4b7debd8eb979006c67ca0ae347d88cd/src/state-factory.ts\n                // This needs to be fixed, but is a 'breaking' change.\n                // I will do this fix in a subsequent PR and we can decide how to handle it.\n            }\n            /**\n             * @param {?} currentAppState\n             * @param {?} stateOperator\n             * @return {?}\n             */\n            function setStateFromOperator(currentAppState, stateOperator) {\n                /** @type {?} */\n                var local = getState(currentAppState);\n                /** @type {?} */\n                var newValue = stateOperator(local);\n                return setStateValue(currentAppState, newValue);\n            }\n            /**\n             * @param {?} value\n             * @return {?}\n             */\n            function isStateOperator(value) {\n                return typeof value === 'function';\n            }\n            return {\n                getState: /**\n                 * @return {?}\n                 */\n                function () {\n                    /** @type {?} */\n                    var currentAppState = root.getState();\n                    return getState(currentAppState);\n                },\n                patchState: /**\n                 * @param {?} val\n                 * @return {?}\n                 */\n                function (val) {\n                    /** @type {?} */\n                    var currentAppState = root.getState();\n                    /** @type {?} */\n                    var patchOperator = simplePatch(val);\n                    return setStateFromOperator(currentAppState, patchOperator);\n                },\n                setState: /**\n                 * @param {?} val\n                 * @return {?}\n                 */\n                function (val) {\n                    /** @type {?} */\n                    var currentAppState = root.getState();\n                    return isStateOperator(val)\n                        ? setStateFromOperator(currentAppState, val)\n                        : setStateValue(currentAppState, val);\n                },\n                dispatch: /**\n                 * @param {?} actions\n                 * @return {?}\n                 */\n                function (actions) {\n                    return root.dispatch(actions);\n                }\n            };\n        };\n        StateContextFactory.decorators = [\n            { type: core.Injectable }\n        ];\n        /** @nocollapse */\n        StateContextFactory.ctorParameters = function () { return [\n            { type: InternalStateOperations }\n        ]; };\n        return StateContextFactory;\n    }());\n    if (false) {\n        /**\n         * @type {?}\n         * @private\n         */\n        StateContextFactory.prototype._internalStateOperations;\n    }\n\n    /**\n     * @fileoverview added by tsickle\n     * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n     */\n    /**\n     * @abstract\n     */\n    var StoreValidators = /** @class */ (function () {\n        function StoreValidators() {\n        }\n        /**\n         * @param {?} name\n         * @return {?}\n         */\n        StoreValidators.checkThatStateIsNamedCorrectly = /**\n         * @param {?} name\n         * @return {?}\n         */\n        function (name) {\n            if (!name) {\n                throwStateNamePropertyError();\n            }\n            else if (!this.stateNameRegex.test(name)) {\n                throwStateNameError(name);\n            }\n        };\n        /**\n         * @param {?} stateName\n         * @param {?} state\n         * @param {?} statesByName\n         * @return {?}\n         */\n        StoreValidators.checkThatStateNameIsUnique = /**\n         * @param {?} stateName\n         * @param {?} state\n         * @param {?} statesByName\n         * @return {?}\n         */\n        function (stateName, state, statesByName) {\n            /** @type {?} */\n            var existingState = statesByName[stateName];\n            if (existingState && existingState !== state) {\n                throwStateUniqueError(stateName, state.name, existingState.name);\n            }\n        };\n        /**\n         * @param {?} stateClasses\n         * @return {?}\n         */\n        StoreValidators.checkThatStateClassesHaveBeenDecorated = /**\n         * @param {?} stateClasses\n         * @return {?}\n         */\n        function (stateClasses) {\n            stateClasses.forEach((/**\n             * @param {?} stateClass\n             * @return {?}\n             */\n            function (stateClass) {\n                if (!getStoreMetadata(stateClass)) {\n                    throwStateDecoratorError(stateClass.name);\n                }\n            }));\n        };\n        StoreValidators.stateNameRegex = new RegExp('^[a-zA-Z0-9_]+$');\n        return StoreValidators;\n    }());\n    if (false) {\n        /**\n         * @type {?}\n         * @private\n         */\n        StoreValidators.stateNameRegex;\n    }\n\n    /**\n     * @fileoverview added by tsickle\n     * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n     */\n    /**\n     * State factory class\n     * @ignore\n     */\n    var StateFactory = /** @class */ (function () {\n        function StateFactory(_injector, _config, _parentFactory, _actions, _actionResults, _stateContextFactory, _initialState) {\n            var _this = this;\n            this._injector = _injector;\n            this._config = _config;\n            this._parentFactory = _parentFactory;\n            this._actions = _actions;\n            this._actionResults = _actionResults;\n            this._stateContextFactory = _stateContextFactory;\n            this._initialState = _initialState;\n            this._actionsSubscription = null;\n            this._states = [];\n            this._statesByName = {};\n            this._statePaths = {};\n            this.getRuntimeSelectorContext = internals.memoize((/**\n             * @return {?}\n             */\n            function () {\n                /** @type {?} */\n                var stateFactory = _this;\n                /**\n                 * @param {?} key\n                 * @return {?}\n                 */\n                function resolveGetter(key) {\n                    /** @type {?} */\n                    var path = stateFactory.statePaths[key];\n                    return path ? propGetter(path.split('.'), stateFactory._config) : null;\n                }\n                /** @type {?} */\n                var context = _this._parentFactory\n                    ? _this._parentFactory.getRuntimeSelectorContext()\n                    : {\n                        getStateGetter: /**\n                         * @param {?} key\n                         * @return {?}\n                         */\n                        function (key) {\n                            /** @type {?} */\n                            var getter = resolveGetter(key);\n                            if (getter) {\n                                return getter;\n                            }\n                            return (/**\n                             * @param {...?} args\n                             * @return {?}\n                             */\n                            function () {\n                                var args = [];\n                                for (var _i = 0; _i < arguments.length; _i++) {\n                                    args[_i] = arguments[_i];\n                                }\n                                // Late loaded getter\n                                if (!getter) {\n                                    getter = resolveGetter(key);\n                                }\n                                return getter ? getter.apply(void 0, __spread(args)) : undefined;\n                            });\n                        },\n                        getSelectorOptions: /**\n                         * @param {?=} localOptions\n                         * @return {?}\n                         */\n                        function (localOptions) {\n                            /** @type {?} */\n                            var globalSelectorOptions = stateFactory._config.selectorOptions;\n                            return __assign({}, globalSelectorOptions, (localOptions || {}));\n                        }\n                    };\n                return context;\n            }));\n        }\n        Object.defineProperty(StateFactory.prototype, \"states\", {\n            get: /**\n             * @return {?}\n             */\n            function () {\n                return this._parentFactory ? this._parentFactory.states : this._states;\n            },\n            enumerable: true,\n            configurable: true\n        });\n        Object.defineProperty(StateFactory.prototype, \"statesByName\", {\n            get: /**\n             * @return {?}\n             */\n            function () {\n                return this._parentFactory ? this._parentFactory.statesByName : this._statesByName;\n            },\n            enumerable: true,\n            configurable: true\n        });\n        Object.defineProperty(StateFactory.prototype, \"statePaths\", {\n            get: /**\n             * @private\n             * @return {?}\n             */\n            function () {\n                return this._parentFactory ? this._parentFactory.statePaths : this._statePaths;\n            },\n            enumerable: true,\n            configurable: true\n        });\n        /**\n         * @private\n         * @param {?} defaults\n         * @return {?}\n         */\n        StateFactory.cloneDefaults = /**\n         * @private\n         * @param {?} defaults\n         * @return {?}\n         */\n        function (defaults) {\n            /** @type {?} */\n            var value = {};\n            if (Array.isArray(defaults)) {\n                value = defaults.slice();\n            }\n            else if (isObject$1(defaults)) {\n                value = __assign({}, defaults);\n            }\n            else if (defaults === undefined) {\n                value = {};\n            }\n            else {\n                value = defaults;\n            }\n            return value;\n        };\n        /**\n         * @return {?}\n         */\n        StateFactory.prototype.ngOnDestroy = /**\n         * @return {?}\n         */\n        function () {\n            // I'm using non-null assertion here since `_actionsSubscrition` will\n            // be 100% defined. This is because `ngOnDestroy()` cannot be invoked\n            // on the `StateFactory` until its initialized :) An it's initialized\n            // for the first time along with the `NgxsRootModule`.\n            (/** @type {?} */ (this._actionsSubscription)).unsubscribe();\n        };\n        /**\n         * Add a new state to the global defs.\n         */\n        /**\n         * Add a new state to the global defs.\n         * @param {?} stateClasses\n         * @return {?}\n         */\n        StateFactory.prototype.add = /**\n         * Add a new state to the global defs.\n         * @param {?} stateClasses\n         * @return {?}\n         */\n        function (stateClasses) {\n            var e_1, _a;\n            // Caretaker note: we have still left the `typeof` condition in order to avoid\n            // creating a breaking change for projects that still use the View Engine.\n            if (typeof ngDevMode === 'undefined' || ngDevMode) {\n                StoreValidators.checkThatStateClassesHaveBeenDecorated(stateClasses);\n            }\n            var newStates = this.addToStatesMap(stateClasses).newStates;\n            if (!newStates.length)\n                return [];\n            /** @type {?} */\n            var stateGraph = buildGraph(newStates);\n            /** @type {?} */\n            var sortedStates = topologicalSort(stateGraph);\n            /** @type {?} */\n            var paths = findFullParentPath(stateGraph);\n            /** @type {?} */\n            var nameGraph = nameToState(newStates);\n            /** @type {?} */\n            var bootstrappedStores = [];\n            try {\n                for (var sortedStates_1 = __values(sortedStates), sortedStates_1_1 = sortedStates_1.next(); !sortedStates_1_1.done; sortedStates_1_1 = sortedStates_1.next()) {\n                    var name_1 = sortedStates_1_1.value;\n                    /** @type {?} */\n                    var stateClass = nameGraph[name_1];\n                    /** @type {?} */\n                    var path = paths[name_1];\n                    /** @type {?} */\n                    var meta = (/** @type {?} */ (stateClass[META_KEY]));\n                    this.addRuntimeInfoToMeta(meta, path);\n                    /** @type {?} */\n                    var stateMap = {\n                        name: name_1,\n                        path: path,\n                        isInitialised: false,\n                        actions: meta.actions,\n                        instance: this._injector.get(stateClass),\n                        defaults: StateFactory.cloneDefaults(meta.defaults)\n                    };\n                    // ensure our store hasn't already been added\n                    // but don't throw since it could be lazy\n                    // loaded from different paths\n                    if (!this.hasBeenMountedAndBootstrapped(name_1, path)) {\n                        bootstrappedStores.push(stateMap);\n                    }\n                    this.states.push(stateMap);\n                }\n            }\n            catch (e_1_1) { e_1 = { error: e_1_1 }; }\n            finally {\n                try {\n                    if (sortedStates_1_1 && !sortedStates_1_1.done && (_a = sortedStates_1.return)) _a.call(sortedStates_1);\n                }\n                finally { if (e_1) throw e_1.error; }\n            }\n            return bootstrappedStores;\n        };\n        /**\n         * Add a set of states to the store and return the defaults\n         */\n        /**\n         * Add a set of states to the store and return the defaults\n         * @param {?} stateClasses\n         * @return {?}\n         */\n        StateFactory.prototype.addAndReturnDefaults = /**\n         * Add a set of states to the store and return the defaults\n         * @param {?} stateClasses\n         * @return {?}\n         */\n        function (stateClasses) {\n            /** @type {?} */\n            var classes = stateClasses || [];\n            /** @type {?} */\n            var mappedStores = this.add(classes);\n            /** @type {?} */\n            var defaults = mappedStores.reduce((/**\n             * @param {?} result\n             * @param {?} mappedStore\n             * @return {?}\n             */\n            function (result, mappedStore) {\n                return setValue(result, mappedStore.path, mappedStore.defaults);\n            }), {});\n            return { defaults: defaults, states: mappedStores };\n        };\n        /**\n         * Bind the actions to the handlers\n         */\n        /**\n         * Bind the actions to the handlers\n         * @return {?}\n         */\n        StateFactory.prototype.connectActionHandlers = /**\n         * Bind the actions to the handlers\n         * @return {?}\n         */\n        function () {\n            var _this = this;\n            if (this._actionsSubscription !== null)\n                return;\n            /** @type {?} */\n            var dispatched$ = new rxjs.Subject();\n            this._actionsSubscription = this._actions\n                .pipe(operators.filter((/**\n             * @param {?} ctx\n             * @return {?}\n             */\n            function (ctx) { return ctx.status === \"DISPATCHED\" /* Dispatched */; })), operators.mergeMap((/**\n             * @param {?} ctx\n             * @return {?}\n             */\n            function (ctx) {\n                dispatched$.next(ctx);\n                /** @type {?} */\n                var action = ctx.action;\n                return _this.invokeActions(dispatched$, (/** @type {?} */ (action))).pipe(operators.map((/**\n                 * @return {?}\n                 */\n                function () { return (/** @type {?} */ ({ action: action, status: \"SUCCESSFUL\" /* Successful */ })); })), operators.defaultIfEmpty((/** @type {?} */ ({ action: action, status: \"CANCELED\" /* Canceled */ }))), operators.catchError((/**\n                 * @param {?} error\n                 * @return {?}\n                 */\n                function (error) {\n                    return rxjs.of((/** @type {?} */ ({ action: action, status: \"ERRORED\" /* Errored */, error: error })));\n                })));\n            })))\n                .subscribe((/**\n             * @param {?} ctx\n             * @return {?}\n             */\n            function (ctx) { return _this._actionResults.next(ctx); }));\n        };\n        /**\n         * Invoke actions on the states.\n         */\n        /**\n         * Invoke actions on the states.\n         * @param {?} dispatched$\n         * @param {?} action\n         * @return {?}\n         */\n        StateFactory.prototype.invokeActions = /**\n         * Invoke actions on the states.\n         * @param {?} dispatched$\n         * @param {?} action\n         * @return {?}\n         */\n        function (dispatched$, action) {\n            var e_2, _a, e_3, _b;\n            /** @type {?} */\n            var type = (/** @type {?} */ (getActionTypeFromInstance(action)));\n            /** @type {?} */\n            var results = [];\n            try {\n                for (var _c = __values(this.states), _d = _c.next(); !_d.done; _d = _c.next()) {\n                    var metadata = _d.value;\n                    /** @type {?} */\n                    var actionMetas = metadata.actions[type];\n                    if (actionMetas) {\n                        try {\n                            for (var actionMetas_1 = __values(actionMetas), actionMetas_1_1 = actionMetas_1.next(); !actionMetas_1_1.done; actionMetas_1_1 = actionMetas_1.next()) {\n                                var actionMeta = actionMetas_1_1.value;\n                                /** @type {?} */\n                                var stateContext = this._stateContextFactory.createStateContext(metadata);\n                                try {\n                                    /** @type {?} */\n                                    var result = metadata.instance[actionMeta.fn](stateContext, action);\n                                    if (result instanceof Promise) {\n                                        result = rxjs.from(result);\n                                    }\n                                    if (result instanceof rxjs.Observable) {\n                                        // If this observable has been completed w/o emitting\n                                        // any value then we wouldn't want to complete the whole chain\n                                        // of actions. Since if any observable completes then\n                                        // action will be canceled.\n                                        // For instance if any action handler would've had such statement:\n                                        // `handler(ctx) { return EMPTY; }`\n                                        // then the action will be canceled.\n                                        // See https://github.com/ngxs/store/issues/1568\n                                        result = result.pipe(operators.mergeMap((/**\n                                         * @param {?} value\n                                         * @return {?}\n                                         */\n                                        function (value) {\n                                            if (value instanceof Promise) {\n                                                return rxjs.from(value);\n                                            }\n                                            if (value instanceof rxjs.Observable) {\n                                                return value;\n                                            }\n                                            return rxjs.of(value);\n                                        })), operators.defaultIfEmpty({}));\n                                        if (actionMeta.options.cancelUncompleted) {\n                                            // todo: ofActionDispatched should be used with action class\n                                            result = result.pipe(operators.takeUntil(dispatched$.pipe(ofActionDispatched((/** @type {?} */ (action))))));\n                                        }\n                                    }\n                                    else {\n                                        result = rxjs.of({}).pipe(operators.shareReplay());\n                                    }\n                                    results.push(result);\n                                }\n                                catch (e) {\n                                    results.push(rxjs.throwError(e));\n                                }\n                            }\n                        }\n                        catch (e_3_1) { e_3 = { error: e_3_1 }; }\n                        finally {\n                            try {\n                                if (actionMetas_1_1 && !actionMetas_1_1.done && (_b = actionMetas_1.return)) _b.call(actionMetas_1);\n                            }\n                            finally { if (e_3) throw e_3.error; }\n                        }\n                    }\n                }\n            }\n            catch (e_2_1) { e_2 = { error: e_2_1 }; }\n            finally {\n                try {\n                    if (_d && !_d.done && (_a = _c.return)) _a.call(_c);\n                }\n                finally { if (e_2) throw e_2.error; }\n            }\n            if (!results.length) {\n                results.push(rxjs.of({}));\n            }\n            return rxjs.forkJoin(results);\n        };\n        /**\n         * @private\n         * @param {?} stateClasses\n         * @return {?}\n         */\n        StateFactory.prototype.addToStatesMap = /**\n         * @private\n         * @param {?} stateClasses\n         * @return {?}\n         */\n        function (stateClasses) {\n            var e_4, _a;\n            /** @type {?} */\n            var newStates = [];\n            /** @type {?} */\n            var statesMap = this.statesByName;\n            try {\n                for (var stateClasses_1 = __values(stateClasses), stateClasses_1_1 = stateClasses_1.next(); !stateClasses_1_1.done; stateClasses_1_1 = stateClasses_1.next()) {\n                    var stateClass = stateClasses_1_1.value;\n                    /** @type {?} */\n                    var stateName = (/** @type {?} */ (getStoreMetadata(stateClass).name));\n                    // Caretaker note: we have still left the `typeof` condition in order to avoid\n                    // creating a breaking change for projects that still use the View Engine.\n                    if (typeof ngDevMode === 'undefined' || ngDevMode) {\n                        StoreValidators.checkThatStateNameIsUnique(stateName, stateClass, statesMap);\n                    }\n                    /** @type {?} */\n                    var unmountedState = !statesMap[stateName];\n                    if (unmountedState) {\n                        newStates.push(stateClass);\n                        statesMap[stateName] = stateClass;\n                    }\n                }\n            }\n            catch (e_4_1) { e_4 = { error: e_4_1 }; }\n            finally {\n                try {\n                    if (stateClasses_1_1 && !stateClasses_1_1.done && (_a = stateClasses_1.return)) _a.call(stateClasses_1);\n                }\n                finally { if (e_4) throw e_4.error; }\n            }\n            return { newStates: newStates };\n        };\n        /**\n         * @private\n         * @param {?} meta\n         * @param {?} path\n         * @return {?}\n         */\n        StateFactory.prototype.addRuntimeInfoToMeta = /**\n         * @private\n         * @param {?} meta\n         * @param {?} path\n         * @return {?}\n         */\n        function (meta, path) {\n            this.statePaths[(/** @type {?} */ (meta.name))] = path;\n            // TODO: v4 - we plan to get rid of the path property because it is non-deterministic\n            // we can do this when we get rid of the incorrectly exposed getStoreMetadata\n            // We will need to come up with an alternative in v4 because this is used by many plugins\n            meta.path = path;\n        };\n        /**\n         * @description\n         * the method checks if the state has already been added to the tree\n         * and completed the life cycle\n         * @param name\n         * @param path\n         */\n        /**\n         * \\@description\n         * the method checks if the state has already been added to the tree\n         * and completed the life cycle\n         * @private\n         * @param {?} name\n         * @param {?} path\n         * @return {?}\n         */\n        StateFactory.prototype.hasBeenMountedAndBootstrapped = /**\n         * \\@description\n         * the method checks if the state has already been added to the tree\n         * and completed the life cycle\n         * @private\n         * @param {?} name\n         * @param {?} path\n         * @return {?}\n         */\n        function (name, path) {\n            /** @type {?} */\n            var valueIsBootstrappedInInitialState = getValue(this._initialState, path) !== undefined;\n            return this.statesByName[name] && valueIsBootstrappedInInitialState;\n        };\n        StateFactory.decorators = [\n            { type: core.Injectable }\n        ];\n        /** @nocollapse */\n        StateFactory.ctorParameters = function () { return [\n            { type: core.Injector },\n            { type: NgxsConfig },\n            { type: StateFactory, decorators: [{ type: core.Optional }, { type: core.SkipSelf }] },\n            { type: InternalActions },\n            { type: InternalDispatchedActionResults },\n            { type: StateContextFactory },\n            { type: undefined, decorators: [{ type: core.Optional }, { type: core.Inject, args: [internals.INITIAL_STATE_TOKEN,] }] }\n        ]; };\n        return StateFactory;\n    }());\n    if (false) {\n        /**\n         * @type {?}\n         * @private\n         */\n        StateFactory.prototype._actionsSubscription;\n        /**\n         * @type {?}\n         * @private\n         */\n        StateFactory.prototype._states;\n        /**\n         * @type {?}\n         * @private\n         */\n        StateFactory.prototype._statesByName;\n        /**\n         * @type {?}\n         * @private\n         */\n        StateFactory.prototype._statePaths;\n        /** @type {?} */\n        StateFactory.prototype.getRuntimeSelectorContext;\n        /**\n         * @type {?}\n         * @private\n         */\n        StateFactory.prototype._injector;\n        /**\n         * @type {?}\n         * @private\n         */\n        StateFactory.prototype._config;\n        /**\n         * @type {?}\n         * @private\n         */\n        StateFactory.prototype._parentFactory;\n        /**\n         * @type {?}\n         * @private\n         */\n        StateFactory.prototype._actions;\n        /**\n         * @type {?}\n         * @private\n         */\n        StateFactory.prototype._actionResults;\n        /**\n         * @type {?}\n         * @private\n         */\n        StateFactory.prototype._stateContextFactory;\n        /**\n         * @type {?}\n         * @private\n         */\n        StateFactory.prototype._initialState;\n    }\n\n    /**\n     * @fileoverview added by tsickle\n     * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n     */\n    var LifecycleStateManager = /** @class */ (function () {\n        function LifecycleStateManager(internalStateOperations, stateContextFactory, bootstrapper) {\n            this.internalStateOperations = internalStateOperations;\n            this.stateContextFactory = stateContextFactory;\n            this.bootstrapper = bootstrapper;\n        }\n        /**\n         * @template T\n         * @param {?} action\n         * @param {?} results\n         * @return {?}\n         */\n        LifecycleStateManager.prototype.ngxsBootstrap = /**\n         * @template T\n         * @param {?} action\n         * @param {?} results\n         * @return {?}\n         */\n        function (action, results) {\n            var _this = this;\n            this.internalStateOperations\n                .getRootStateOperations()\n                .dispatch(action)\n                .pipe(operators.filter((/**\n             * @return {?}\n             */\n            function () { return !!results; })), operators.tap((/**\n             * @return {?}\n             */\n            function () { return _this.invokeInit((/** @type {?} */ (results)).states); })), operators.mergeMap((/**\n             * @return {?}\n             */\n            function () { return _this.bootstrapper.appBootstrapped$; })), operators.filter((/**\n             * @param {?} appBootstrapped\n             * @return {?}\n             */\n            function (appBootstrapped) { return !!appBootstrapped; })))\n                .subscribe((/**\n             * @return {?}\n             */\n            function () { return _this.invokeBootstrap((/** @type {?} */ (results)).states); }));\n        };\n        /**\n         * Invoke the init function on the states.\n         */\n        /**\n         * Invoke the init function on the states.\n         * @param {?} mappedStores\n         * @return {?}\n         */\n        LifecycleStateManager.prototype.invokeInit = /**\n         * Invoke the init function on the states.\n         * @param {?} mappedStores\n         * @return {?}\n         */\n        function (mappedStores) {\n            var e_1, _a;\n            try {\n                for (var mappedStores_1 = __values(mappedStores), mappedStores_1_1 = mappedStores_1.next(); !mappedStores_1_1.done; mappedStores_1_1 = mappedStores_1.next()) {\n                    var mappedStore = mappedStores_1_1.value;\n                    /** @type {?} */\n                    var instance = mappedStore.instance;\n                    if (instance.ngxsOnChanges) {\n                        /** @type {?} */\n                        var currentAppState = {};\n                        /** @type {?} */\n                        var newAppState = this.internalStateOperations\n                            .getRootStateOperations()\n                            .getState();\n                        /** @type {?} */\n                        var firstDiffChange = getStateDiffChanges(mappedStore, {\n                            currentAppState: currentAppState,\n                            newAppState: newAppState\n                        });\n                        instance.ngxsOnChanges(firstDiffChange);\n                    }\n                    if (instance.ngxsOnInit) {\n                        instance.ngxsOnInit(this.getStateContext(mappedStore));\n                    }\n                    mappedStore.isInitialised = true;\n                }\n            }\n            catch (e_1_1) { e_1 = { error: e_1_1 }; }\n            finally {\n                try {\n                    if (mappedStores_1_1 && !mappedStores_1_1.done && (_a = mappedStores_1.return)) _a.call(mappedStores_1);\n                }\n                finally { if (e_1) throw e_1.error; }\n            }\n        };\n        /**\n         * Invoke the bootstrap function on the states.\n         */\n        /**\n         * Invoke the bootstrap function on the states.\n         * @param {?} mappedStores\n         * @return {?}\n         */\n        LifecycleStateManager.prototype.invokeBootstrap = /**\n         * Invoke the bootstrap function on the states.\n         * @param {?} mappedStores\n         * @return {?}\n         */\n        function (mappedStores) {\n            var e_2, _a;\n            try {\n                for (var mappedStores_2 = __values(mappedStores), mappedStores_2_1 = mappedStores_2.next(); !mappedStores_2_1.done; mappedStores_2_1 = mappedStores_2.next()) {\n                    var mappedStore = mappedStores_2_1.value;\n                    /** @type {?} */\n                    var instance = mappedStore.instance;\n                    if (instance.ngxsAfterBootstrap) {\n                        instance.ngxsAfterBootstrap(this.getStateContext(mappedStore));\n                    }\n                }\n            }\n            catch (e_2_1) { e_2 = { error: e_2_1 }; }\n            finally {\n                try {\n                    if (mappedStores_2_1 && !mappedStores_2_1.done && (_a = mappedStores_2.return)) _a.call(mappedStores_2);\n                }\n                finally { if (e_2) throw e_2.error; }\n            }\n        };\n        /**\n         * @private\n         * @param {?} mappedStore\n         * @return {?}\n         */\n        LifecycleStateManager.prototype.getStateContext = /**\n         * @private\n         * @param {?} mappedStore\n         * @return {?}\n         */\n        function (mappedStore) {\n            return this.stateContextFactory.createStateContext(mappedStore);\n        };\n        LifecycleStateManager.decorators = [\n            { type: core.Injectable }\n        ];\n        /** @nocollapse */\n        LifecycleStateManager.ctorParameters = function () { return [\n            { type: InternalStateOperations },\n            { type: StateContextFactory },\n            { type: internals.NgxsBootstrapper }\n        ]; };\n        return LifecycleStateManager;\n    }());\n    if (false) {\n        /**\n         * @type {?}\n         * @private\n         */\n        LifecycleStateManager.prototype.internalStateOperations;\n        /**\n         * @type {?}\n         * @private\n         */\n        LifecycleStateManager.prototype.stateContextFactory;\n        /**\n         * @type {?}\n         * @private\n         */\n        LifecycleStateManager.prototype.bootstrapper;\n    }\n\n    /**\n     * @fileoverview added by tsickle\n     * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n     */\n    /** @type {?} */\n    var SELECTOR_OPTIONS_META_KEY = 'NGXS_SELECTOR_OPTIONS_META';\n    /** @type {?} */\n    var selectorOptionsMetaAccessor = {\n        getOptions: (/**\n         * @param {?} target\n         * @return {?}\n         */\n        function (target) {\n            return (target && ((/** @type {?} */ (target)))[SELECTOR_OPTIONS_META_KEY]) || {};\n        }),\n        defineOptions: (/**\n         * @param {?} target\n         * @param {?} options\n         * @return {?}\n         */\n        function (target, options) {\n            if (!target)\n                return;\n            ((/** @type {?} */ (target)))[SELECTOR_OPTIONS_META_KEY] = options;\n        })\n    };\n    /**\n     * @record\n     */\n    function CreationMetadata() { }\n    if (false) {\n        /** @type {?} */\n        CreationMetadata.prototype.containerClass;\n        /** @type {?} */\n        CreationMetadata.prototype.selectorName;\n        /** @type {?|undefined} */\n        CreationMetadata.prototype.getSelectorOptions;\n    }\n    /**\n     * @record\n     */\n    function RuntimeSelectorInfo() { }\n    if (false) {\n        /** @type {?} */\n        RuntimeSelectorInfo.prototype.selectorOptions;\n        /** @type {?} */\n        RuntimeSelectorInfo.prototype.argumentSelectorFunctions;\n    }\n    /**\n     * Function for creating a selector\n     * @template T\n     * @param {?} selectors The selectors to use to create the arguments of this function\n     * @param {?} originalFn The original function being made into a selector\n     * @param {?=} creationMetadata\n     * @return {?}\n     */\n    function createSelector(selectors, originalFn, creationMetadata) {\n        /** @type {?} */\n        var containerClass = creationMetadata && creationMetadata.containerClass;\n        /** @type {?} */\n        var wrappedFn = (/** @type {?} */ ((/**\n         * @param {...?} args\n         * @return {?}\n         */\n        function wrappedSelectorFn() {\n            var args = [];\n            for (var _i = 0; _i < arguments.length; _i++) {\n                args[_i] = arguments[_i];\n            }\n            /** @type {?} */\n            var returnValue = originalFn.apply(containerClass, args);\n            if (returnValue instanceof Function) {\n                /** @type {?} */\n                var innerMemoizedFn = internals.memoize.apply(null, [returnValue]);\n                return innerMemoizedFn;\n            }\n            return returnValue;\n        })));\n        /** @type {?} */\n        var memoizedFn = internals.memoize(wrappedFn);\n        Object.setPrototypeOf(memoizedFn, originalFn);\n        /** @type {?} */\n        var selectorMetaData = setupSelectorMetadata(originalFn, creationMetadata);\n        /** @type {?} */\n        var makeRootSelector = (/**\n         * @param {?} context\n         * @return {?}\n         */\n        function (context) {\n            var _a = getRuntimeSelectorInfo(context, selectorMetaData, selectors), argumentSelectorFunctions = _a.argumentSelectorFunctions, selectorOptions = _a.selectorOptions;\n            return (/**\n             * @param {?} rootState\n             * @return {?}\n             */\n            function selectFromRoot(rootState) {\n                // Determine arguments from the app state using the selectors\n                /** @type {?} */\n                var results = argumentSelectorFunctions.map((/**\n                 * @param {?} argFn\n                 * @return {?}\n                 */\n                function (argFn) { return argFn(rootState); }));\n                // if the lambda tries to access a something on the\n                // state that doesn't exist, it will throw a TypeError.\n                // since this is quite usual behaviour, we simply return undefined if so.\n                try {\n                    return memoizedFn.apply(void 0, __spread(results));\n                }\n                catch (ex) {\n                    if (ex instanceof TypeError && selectorOptions.suppressErrors) {\n                        return undefined;\n                    }\n                    throw ex;\n                }\n            });\n        });\n        selectorMetaData.makeRootSelector = makeRootSelector;\n        return memoizedFn;\n    }\n    /**\n     * @template T\n     * @param {?} originalFn\n     * @param {?} creationMetadata\n     * @return {?}\n     */\n    function setupSelectorMetadata(originalFn, creationMetadata) {\n        /** @type {?} */\n        var selectorMetaData = ensureSelectorMetadata(originalFn);\n        selectorMetaData.originalFn = originalFn;\n        /** @type {?} */\n        var getExplicitSelectorOptions = (/**\n         * @return {?}\n         */\n        function () { return ({}); });\n        if (creationMetadata) {\n            selectorMetaData.containerClass = creationMetadata.containerClass;\n            selectorMetaData.selectorName = creationMetadata.selectorName;\n            getExplicitSelectorOptions =\n                creationMetadata.getSelectorOptions || getExplicitSelectorOptions;\n        }\n        /** @type {?} */\n        var selectorMetaDataClone = __assign({}, selectorMetaData);\n        selectorMetaData.getSelectorOptions = (/**\n         * @return {?}\n         */\n        function () {\n            return getLocalSelectorOptions(selectorMetaDataClone, getExplicitSelectorOptions());\n        });\n        return selectorMetaData;\n    }\n    /**\n     * @param {?} context\n     * @param {?} selectorMetaData\n     * @param {?=} selectors\n     * @return {?}\n     */\n    function getRuntimeSelectorInfo(context, selectorMetaData, selectors) {\n        if (selectors === void 0) { selectors = []; }\n        /** @type {?} */\n        var localSelectorOptions = selectorMetaData.getSelectorOptions();\n        /** @type {?} */\n        var selectorOptions = context.getSelectorOptions(localSelectorOptions);\n        /** @type {?} */\n        var selectorsToApply = getSelectorsToApply(selectors, selectorOptions, selectorMetaData.containerClass);\n        /** @type {?} */\n        var argumentSelectorFunctions = selectorsToApply.map((/**\n         * @param {?} selector\n         * @return {?}\n         */\n        function (selector) {\n            /** @type {?} */\n            var factory = getRootSelectorFactory(selector);\n            return factory(context);\n        }));\n        return {\n            selectorOptions: selectorOptions,\n            argumentSelectorFunctions: argumentSelectorFunctions\n        };\n    }\n    /**\n     * @param {?} selectorMetaData\n     * @param {?} explicitOptions\n     * @return {?}\n     */\n    function getLocalSelectorOptions(selectorMetaData, explicitOptions) {\n        return __assign({}, (selectorOptionsMetaAccessor.getOptions(selectorMetaData.containerClass) || {}), (selectorOptionsMetaAccessor.getOptions(selectorMetaData.originalFn) || {}), (selectorMetaData.getSelectorOptions() || {}), explicitOptions);\n    }\n    /**\n     * @param {?=} selectors\n     * @param {?=} selectorOptions\n     * @param {?=} containerClass\n     * @return {?}\n     */\n    function getSelectorsToApply(selectors, selectorOptions, containerClass) {\n        if (selectors === void 0) { selectors = []; }\n        /** @type {?} */\n        var selectorsToApply = [];\n        /** @type {?} */\n        var canInjectContainerState = selectors.length === 0 || selectorOptions.injectContainerState;\n        if (containerClass && canInjectContainerState) {\n            // If we are on a state class, add it as the first selector parameter\n            /** @type {?} */\n            var metadata = getStoreMetadata(containerClass);\n            if (metadata) {\n                selectorsToApply.push(containerClass);\n            }\n        }\n        if (selectors) {\n            selectorsToApply.push.apply(selectorsToApply, __spread(selectors));\n        }\n        return selectorsToApply;\n    }\n    /**\n     * This function gets the factory function to create the selector to get the selected slice from the app state\n     * @ignore\n     * @param {?} selector\n     * @return {?}\n     */\n    function getRootSelectorFactory(selector) {\n        /** @type {?} */\n        var metadata = getSelectorMetadata(selector) || getStoreMetadata(selector);\n        return (metadata && metadata.makeRootSelector) || ((/**\n         * @return {?}\n         */\n        function () { return selector; }));\n    }\n\n    /**\n     * @fileoverview added by tsickle\n     * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n     */\n    var Store = /** @class */ (function () {\n        function Store(_stateStream, _internalStateOperations, _config, _internalExecutionStrategy, _stateFactory, initialStateValue) {\n            this._stateStream = _stateStream;\n            this._internalStateOperations = _internalStateOperations;\n            this._config = _config;\n            this._internalExecutionStrategy = _internalExecutionStrategy;\n            this._stateFactory = _stateFactory;\n            this.initStateStream(initialStateValue);\n        }\n        /**\n         * Dispatches event(s).\n         */\n        /**\n         * Dispatches event(s).\n         * @param {?} actionOrActions\n         * @return {?}\n         */\n        Store.prototype.dispatch = /**\n         * Dispatches event(s).\n         * @param {?} actionOrActions\n         * @return {?}\n         */\n        function (actionOrActions) {\n            return this._internalStateOperations.getRootStateOperations().dispatch(actionOrActions);\n        };\n        /**\n         * @param {?} selector\n         * @return {?}\n         */\n        Store.prototype.select = /**\n         * @param {?} selector\n         * @return {?}\n         */\n        function (selector) {\n            var _this = this;\n            /** @type {?} */\n            var selectorFn = this.getStoreBoundSelectorFn(selector);\n            return this._stateStream.pipe(operators.map(selectorFn), operators.catchError((/**\n             * @param {?} err\n             * @return {?}\n             */\n            function (err) {\n                // if error is TypeError we swallow it to prevent usual errors with property access\n                var suppressErrors = _this._config.selectorOptions.suppressErrors;\n                if (err instanceof TypeError && suppressErrors) {\n                    return rxjs.of(undefined);\n                }\n                // rethrow other errors\n                return rxjs.throwError(err);\n            })), operators.distinctUntilChanged(), leaveNgxs(this._internalExecutionStrategy));\n        };\n        /**\n         * @param {?} selector\n         * @return {?}\n         */\n        Store.prototype.selectOnce = /**\n         * @param {?} selector\n         * @return {?}\n         */\n        function (selector) {\n            return this.select(selector).pipe(operators.take(1));\n        };\n        /**\n         * @param {?} selector\n         * @return {?}\n         */\n        Store.prototype.selectSnapshot = /**\n         * @param {?} selector\n         * @return {?}\n         */\n        function (selector) {\n            /** @type {?} */\n            var selectorFn = this.getStoreBoundSelectorFn(selector);\n            return selectorFn(this._stateStream.getValue());\n        };\n        /**\n         * Allow the user to subscribe to the root of the state\n         */\n        /**\n         * Allow the user to subscribe to the root of the state\n         * @param {?=} fn\n         * @return {?}\n         */\n        Store.prototype.subscribe = /**\n         * Allow the user to subscribe to the root of the state\n         * @param {?=} fn\n         * @return {?}\n         */\n        function (fn) {\n            return this._stateStream.pipe(leaveNgxs(this._internalExecutionStrategy)).subscribe(fn);\n        };\n        /**\n         * Return the raw value of the state.\n         */\n        /**\n         * Return the raw value of the state.\n         * @return {?}\n         */\n        Store.prototype.snapshot = /**\n         * Return the raw value of the state.\n         * @return {?}\n         */\n        function () {\n            return this._internalStateOperations.getRootStateOperations().getState();\n        };\n        /**\n         * Reset the state to a specific point in time. This method is useful\n         * for plugin's who need to modify the state directly or unit testing.\n         */\n        /**\n         * Reset the state to a specific point in time. This method is useful\n         * for plugin's who need to modify the state directly or unit testing.\n         * @param {?} state\n         * @return {?}\n         */\n        Store.prototype.reset = /**\n         * Reset the state to a specific point in time. This method is useful\n         * for plugin's who need to modify the state directly or unit testing.\n         * @param {?} state\n         * @return {?}\n         */\n        function (state) {\n            return this._internalStateOperations.getRootStateOperations().setState(state);\n        };\n        /**\n         * @private\n         * @param {?} selector\n         * @return {?}\n         */\n        Store.prototype.getStoreBoundSelectorFn = /**\n         * @private\n         * @param {?} selector\n         * @return {?}\n         */\n        function (selector) {\n            /** @type {?} */\n            var makeSelectorFn = getRootSelectorFactory(selector);\n            /** @type {?} */\n            var runtimeContext = this._stateFactory.getRuntimeSelectorContext();\n            return makeSelectorFn(runtimeContext);\n        };\n        /**\n         * @private\n         * @param {?} initialStateValue\n         * @return {?}\n         */\n        Store.prototype.initStateStream = /**\n         * @private\n         * @param {?} initialStateValue\n         * @return {?}\n         */\n        function (initialStateValue) {\n            /** @type {?} */\n            var value = this._stateStream.value;\n            /** @type {?} */\n            var storeIsEmpty = !value || Object.keys(value).length === 0;\n            if (storeIsEmpty) {\n                /** @type {?} */\n                var defaultStateNotEmpty = Object.keys(this._config.defaultsState).length > 0;\n                /** @type {?} */\n                var storeValues = defaultStateNotEmpty\n                    ? __assign({}, this._config.defaultsState, initialStateValue) : initialStateValue;\n                this._stateStream.next(storeValues);\n            }\n        };\n        Store.decorators = [\n            { type: core.Injectable }\n        ];\n        /** @nocollapse */\n        Store.ctorParameters = function () { return [\n            { type: StateStream },\n            { type: InternalStateOperations },\n            { type: NgxsConfig },\n            { type: InternalNgxsExecutionStrategy },\n            { type: StateFactory },\n            { type: undefined, decorators: [{ type: core.Optional }, { type: core.Inject, args: [internals.INITIAL_STATE_TOKEN,] }] }\n        ]; };\n        return Store;\n    }());\n    if (false) {\n        /**\n         * @type {?}\n         * @private\n         */\n        Store.prototype._stateStream;\n        /**\n         * @type {?}\n         * @private\n         */\n        Store.prototype._internalStateOperations;\n        /**\n         * @type {?}\n         * @private\n         */\n        Store.prototype._config;\n        /**\n         * @type {?}\n         * @private\n         */\n        Store.prototype._internalExecutionStrategy;\n        /**\n         * @type {?}\n         * @private\n         */\n        Store.prototype._stateFactory;\n    }\n\n    /**\n     * @fileoverview added by tsickle\n     * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n     */\n    /**\n     * Allows the select decorator to get access to the DI store, this is used internally\n     * in `\\@Select` decorator.\n     */\n    var SelectFactory = /** @class */ (function () {\n        function SelectFactory(store, config) {\n            SelectFactory.store = store;\n            SelectFactory.config = config;\n        }\n        /**\n         * @return {?}\n         */\n        SelectFactory.prototype.ngOnDestroy = /**\n         * @return {?}\n         */\n        function () {\n            SelectFactory.store = null;\n            SelectFactory.config = null;\n        };\n        SelectFactory.store = null;\n        SelectFactory.config = null;\n        SelectFactory.decorators = [\n            { type: core.Injectable, args: [{ providedIn: 'root' },] }\n        ];\n        /** @nocollapse */\n        SelectFactory.ctorParameters = function () { return [\n            { type: Store },\n            { type: NgxsConfig }\n        ]; };\n        /** @nocollapse */ SelectFactory.ngInjectableDef = core.defineInjectable({ factory: function SelectFactory_Factory() { return new SelectFactory(core.inject(Store), core.inject(NgxsConfig)); }, token: SelectFactory, providedIn: \"root\" });\n        return SelectFactory;\n    }());\n    if (false) {\n        /** @type {?} */\n        SelectFactory.store;\n        /** @type {?} */\n        SelectFactory.config;\n    }\n\n    /**\n     * @fileoverview added by tsickle\n     * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n     */\n    /**\n     * Init action\n     */\n    var   /**\n     * Init action\n     */\n    InitState = /** @class */ (function () {\n        function InitState() {\n        }\n        Object.defineProperty(InitState, \"type\", {\n            get: /**\n             * @return {?}\n             */\n            function () {\n                // NOTE: Not necessary to declare the type in this way in your code. See https://github.com/ngxs/store/pull/644#issuecomment-436003138\n                return '@@INIT';\n            },\n            enumerable: true,\n            configurable: true\n        });\n        return InitState;\n    }());\n    /**\n     * Update action\n     */\n    var   /**\n     * Update action\n     */\n    UpdateState = /** @class */ (function () {\n        function UpdateState(addedStates) {\n            this.addedStates = addedStates;\n        }\n        Object.defineProperty(UpdateState, \"type\", {\n            get: /**\n             * @return {?}\n             */\n            function () {\n                // NOTE: Not necessary to declare the type in this way in your code. See https://github.com/ngxs/store/pull/644#issuecomment-436003138\n                return '@@UPDATE_STATE';\n            },\n            enumerable: true,\n            configurable: true\n        });\n        return UpdateState;\n    }());\n    if (false) {\n        /** @type {?} */\n        UpdateState.prototype.addedStates;\n    }\n\n    /**\n     * @fileoverview added by tsickle\n     * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n     */\n    /**\n     * Root module\n     * @ignore\n     */\n    var NgxsRootModule = /** @class */ (function () {\n        function NgxsRootModule(factory, internalStateOperations, _store, injector, states, lifecycleStateManager) {\n            if (states === void 0) { states = []; }\n            // If the user is running View Engine then we create the `SelectFactory` instance,\n            // otherwise it'll be tree-shaken away in Ivy.\n            !core.ÉµivyEnabled && injector.get(SelectFactory);\n            // Add stores to the state graph and return their defaults\n            /** @type {?} */\n            var results = factory.addAndReturnDefaults(states);\n            internalStateOperations.setStateToTheCurrentWithNew(results);\n            // Connect our actions stream\n            factory.connectActionHandlers();\n            // Dispatch the init action and invoke init and bootstrap functions after\n            lifecycleStateManager.ngxsBootstrap(new InitState(), results);\n        }\n        NgxsRootModule.decorators = [\n            { type: core.NgModule }\n        ];\n        /** @nocollapse */\n        NgxsRootModule.ctorParameters = function () { return [\n            { type: StateFactory },\n            { type: InternalStateOperations },\n            { type: Store },\n            { type: core.Injector },\n            { type: Array, decorators: [{ type: core.Optional }, { type: core.Inject, args: [ROOT_STATE_TOKEN,] }] },\n            { type: LifecycleStateManager }\n        ]; };\n        return NgxsRootModule;\n    }());\n\n    /**\n     * @fileoverview added by tsickle\n     * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n     */\n    /**\n     * Feature module\n     * @ignore\n     */\n    var NgxsFeatureModule = /** @class */ (function () {\n        function NgxsFeatureModule(_store, internalStateOperations, factory, states, lifecycleStateManager) {\n            if (states === void 0) { states = []; }\n            // Since FEATURE_STATE_TOKEN is a multi token, we need to\n            // flatten it [[Feature1State, Feature2State], [Feature3State]]\n            /** @type {?} */\n            var flattenedStates = NgxsFeatureModule.flattenStates(states);\n            // add stores to the state graph and return their defaults\n            /** @type {?} */\n            var results = factory.addAndReturnDefaults(flattenedStates);\n            if (results.states.length) {\n                internalStateOperations.setStateToTheCurrentWithNew(results);\n                // dispatch the update action and invoke init and bootstrap functions after\n                lifecycleStateManager.ngxsBootstrap(new UpdateState(results.defaults), results);\n            }\n        }\n        /**\n         * @private\n         * @param {?=} states\n         * @return {?}\n         */\n        NgxsFeatureModule.flattenStates = /**\n         * @private\n         * @param {?=} states\n         * @return {?}\n         */\n        function (states) {\n            if (states === void 0) { states = []; }\n            return states.reduce((/**\n             * @param {?} total\n             * @param {?} values\n             * @return {?}\n             */\n            function (total, values) { return total.concat(values); }), []);\n        };\n        NgxsFeatureModule.decorators = [\n            { type: core.NgModule }\n        ];\n        /** @nocollapse */\n        NgxsFeatureModule.ctorParameters = function () { return [\n            { type: Store },\n            { type: InternalStateOperations },\n            { type: StateFactory },\n            { type: Array, decorators: [{ type: core.Optional }, { type: core.Inject, args: [FEATURE_STATE_TOKEN,] }] },\n            { type: LifecycleStateManager }\n        ]; };\n        return NgxsFeatureModule;\n    }());\n\n    /**\n     * @fileoverview added by tsickle\n     * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n     */\n    /**\n     * Ngxs Module\n     */\n    var NgxsModule = /** @class */ (function () {\n        function NgxsModule() {\n        }\n        /**\n         * Root module factory\n         */\n        /**\n         * Root module factory\n         * @param {?=} states\n         * @param {?=} options\n         * @return {?}\n         */\n        NgxsModule.forRoot = /**\n         * Root module factory\n         * @param {?=} states\n         * @param {?=} options\n         * @return {?}\n         */\n        function (states, options) {\n            if (states === void 0) { states = []; }\n            if (options === void 0) { options = {}; }\n            return {\n                ngModule: NgxsRootModule,\n                providers: __spread([\n                    StateFactory,\n                    StateContextFactory,\n                    Actions,\n                    InternalActions,\n                    internals.NgxsBootstrapper,\n                    LifecycleStateManager,\n                    InternalDispatcher,\n                    InternalDispatchedActionResults,\n                    InternalStateOperations,\n                    InternalNgxsExecutionStrategy,\n                    Store,\n                    StateStream,\n                    PluginManager\n                ], states, NgxsModule.ngxsTokenProviders(states, options))\n            };\n        };\n        /**\n         * Feature module factory\n         */\n        /**\n         * Feature module factory\n         * @param {?=} states\n         * @return {?}\n         */\n        NgxsModule.forFeature = /**\n         * Feature module factory\n         * @param {?=} states\n         * @return {?}\n         */\n        function (states) {\n            if (states === void 0) { states = []; }\n            return {\n                ngModule: NgxsFeatureModule,\n                providers: __spread([\n                    StateFactory,\n                    PluginManager\n                ], states, [\n                    {\n                        provide: FEATURE_STATE_TOKEN,\n                        multi: true,\n                        useValue: states\n                    }\n                ])\n            };\n        };\n        /**\n         * @private\n         * @param {?} states\n         * @param {?} options\n         * @return {?}\n         */\n        NgxsModule.ngxsTokenProviders = /**\n         * @private\n         * @param {?} states\n         * @param {?} options\n         * @return {?}\n         */\n        function (states, options) {\n            return [\n                {\n                    provide: USER_PROVIDED_NGXS_EXECUTION_STRATEGY,\n                    useValue: options.executionStrategy\n                },\n                {\n                    provide: ROOT_STATE_TOKEN,\n                    useValue: states\n                },\n                {\n                    provide: NgxsModule.ROOT_OPTIONS,\n                    useValue: options\n                },\n                {\n                    provide: NgxsConfig,\n                    useFactory: NgxsModule.ngxsConfigFactory,\n                    deps: [NgxsModule.ROOT_OPTIONS]\n                },\n                {\n                    provide: core.APP_BOOTSTRAP_LISTENER,\n                    useFactory: NgxsModule.appBootstrapListenerFactory,\n                    multi: true,\n                    deps: [internals.NgxsBootstrapper]\n                },\n                {\n                    provide: internals.INITIAL_STATE_TOKEN,\n                    useFactory: NgxsModule.getInitialState\n                },\n                {\n                    provide: internals.NGXS_STATE_CONTEXT_FACTORY,\n                    useExisting: StateContextFactory\n                },\n                {\n                    provide: internals.NGXS_STATE_FACTORY,\n                    useExisting: StateFactory\n                }\n            ];\n        };\n        /**\n         * @private\n         * @param {?} options\n         * @return {?}\n         */\n        NgxsModule.ngxsConfigFactory = /**\n         * @private\n         * @param {?} options\n         * @return {?}\n         */\n        function (options) {\n            return mergeDeep(new NgxsConfig(), options);\n        };\n        /**\n         * @private\n         * @param {?} bootstrapper\n         * @return {?}\n         */\n        NgxsModule.appBootstrapListenerFactory = /**\n         * @private\n         * @param {?} bootstrapper\n         * @return {?}\n         */\n        function (bootstrapper) {\n            return (/**\n             * @return {?}\n             */\n            function () { return bootstrapper.bootstrap(); });\n        };\n        /**\n         * @private\n         * @return {?}\n         */\n        NgxsModule.getInitialState = /**\n         * @private\n         * @return {?}\n         */\n        function () {\n            return internals.InitialState.pop();\n        };\n        NgxsModule.ROOT_OPTIONS = new core.InjectionToken('ROOT_OPTIONS');\n        NgxsModule.decorators = [\n            { type: core.NgModule }\n        ];\n        return NgxsModule;\n    }());\n    if (false) {\n        /**\n         * @type {?}\n         * @private\n         */\n        NgxsModule.ROOT_OPTIONS;\n    }\n\n    /**\n     * @fileoverview added by tsickle\n     * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n     */\n    /**\n     * Decorates a method with a action information.\n     * @param {?} actions\n     * @param {?=} options\n     * @return {?}\n     */\n    function Action(actions, options) {\n        return (/**\n         * @param {?} target\n         * @param {?} name\n         * @return {?}\n         */\n        function (target, name) {\n            var e_1, _a;\n            // Caretaker note: we have still left the `typeof` condition in order to avoid\n            // creating a breaking change for projects that still use the View Engine.\n            if (typeof ngDevMode === 'undefined' || ngDevMode) {\n                /** @type {?} */\n                var isStaticMethod = target.hasOwnProperty('prototype');\n                if (isStaticMethod) {\n                    throwActionDecoratorError();\n                }\n            }\n            /** @type {?} */\n            var meta = ensureStoreMetadata(target.constructor);\n            if (!Array.isArray(actions)) {\n                actions = [actions];\n            }\n            try {\n                for (var actions_1 = __values(actions), actions_1_1 = actions_1.next(); !actions_1_1.done; actions_1_1 = actions_1.next()) {\n                    var action = actions_1_1.value;\n                    /** @type {?} */\n                    var type = action.type;\n                    if (!meta.actions[type]) {\n                        meta.actions[type] = [];\n                    }\n                    meta.actions[type].push({\n                        fn: name,\n                        options: options || {},\n                        type: type\n                    });\n                }\n            }\n            catch (e_1_1) { e_1 = { error: e_1_1 }; }\n            finally {\n                try {\n                    if (actions_1_1 && !actions_1_1.done && (_a = actions_1.return)) _a.call(actions_1);\n                }\n                finally { if (e_1) throw e_1.error; }\n            }\n        });\n    }\n\n    /**\n     * @fileoverview added by tsickle\n     * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n     */\n    /**\n     * All provided or injected tokens must have `\\@Injectable` decorator\n     * (previously, injected tokens without `\\@Injectable` were allowed\n     * if another decorator was used, e.g. pipes).\n     * @param {?} target\n     * @return {?}\n     */\n    function ensureStateClassIsInjectable(target) {\n        // `Éµprov` is a static property added by the NGCC compiler. It always exists in\n        // AOT mode because this property is added before runtime. If an application is running in\n        // JIT mode then this property can be added by the `@Injectable()` decorator. The `@Injectable()`\n        // decorator has to go after the `@State()` decorator, thus we prevent users from unwanted DI errors.\n        if (core.ÉµivyEnabled) {\n            /** @type {?} */\n            /** @nocollapse */ var ngInjectableDef = target.Éµprov;\n            if (!ngInjectableDef) {\n                // Don't warn if Ivy is disabled or `Éµprov` exists on the class\n                console.warn(getUndecoratedStateInIvyWarningMessage(target.name));\n            }\n        }\n    }\n\n    /**\n     * @fileoverview added by tsickle\n     * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n     */\n    /**\n     * @record\n     * @template T\n     */\n    function MutateMetaOptions() { }\n    if (false) {\n        /** @type {?} */\n        MutateMetaOptions.prototype.meta;\n        /** @type {?} */\n        MutateMetaOptions.prototype.inheritedStateClass;\n        /** @type {?} */\n        MutateMetaOptions.prototype.optionsWithInheritance;\n    }\n    /**\n     * Decorates a class with ngxs state information.\n     * @template T\n     * @param {?} options\n     * @return {?}\n     */\n    function State(options) {\n        /**\n         * @param {?} inheritedStateClass\n         * @return {?}\n         */\n        function getStateOptions(inheritedStateClass) {\n            /** @type {?} */\n            var inheritanceOptions = inheritedStateClass[META_OPTIONS_KEY] || {};\n            return (/** @type {?} */ (__assign({}, inheritanceOptions, options)));\n        }\n        /**\n         * @param {?} params\n         * @return {?}\n         */\n        function mutateMetaData(params) {\n            var meta = params.meta, inheritedStateClass = params.inheritedStateClass, optionsWithInheritance = params.optionsWithInheritance;\n            var children = optionsWithInheritance.children, defaults = optionsWithInheritance.defaults, name = optionsWithInheritance.name;\n            /** @type {?} */\n            var stateName = typeof name === 'string' ? name : (name && name.getName()) || null;\n            // Caretaker note: we have still left the `typeof` condition in order to avoid\n            // creating a breaking change for projects that still use the View Engine.\n            if (typeof ngDevMode === 'undefined' || ngDevMode) {\n                StoreValidators.checkThatStateIsNamedCorrectly(stateName);\n            }\n            if (inheritedStateClass.hasOwnProperty(META_KEY)) {\n                /** @type {?} */\n                var inheritedMeta = inheritedStateClass[META_KEY] || {};\n                meta.actions = __assign({}, meta.actions, inheritedMeta.actions);\n            }\n            meta.children = children;\n            meta.defaults = defaults;\n            meta.name = stateName;\n        }\n        return (/**\n         * @param {?} target\n         * @return {?}\n         */\n        function (target) {\n            // Caretaker note: we have still left the `typeof` condition in order to avoid\n            // creating a breaking change for projects that still use the View Engine.\n            if (typeof ngDevMode === 'undefined' || ngDevMode) {\n                ensureStateClassIsInjectable(target);\n            }\n            /** @type {?} */\n            var stateClass = target;\n            /** @type {?} */\n            var meta = ensureStoreMetadata(stateClass);\n            /** @type {?} */\n            var inheritedStateClass = Object.getPrototypeOf(stateClass);\n            /** @type {?} */\n            var optionsWithInheritance = getStateOptions(inheritedStateClass);\n            mutateMetaData({ meta: meta, inheritedStateClass: inheritedStateClass, optionsWithInheritance: optionsWithInheritance });\n            stateClass[META_OPTIONS_KEY] = optionsWithInheritance;\n        });\n    }\n\n    /**\n     * @fileoverview added by tsickle\n     * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n     */\n    /** @type {?} */\n    var DOLLAR_CHAR_CODE = 36;\n    /**\n     * @template T\n     * @param {?} selector\n     * @param {?} store\n     * @return {?}\n     */\n    function createSelectObservable(selector, store) {\n        // We're doing this stuff to tree-shake the `SelectFactory` when the user\n        // is running Ivy since NGXS will select the state from the provided `store` argument.\n        return core.ÉµivyEnabled\n            ? createSelectObservableIvy(selector, store)\n            : createSelectObservableViewEngine(selector);\n    }\n    /**\n     * @param {?} config\n     * @param {?} name\n     * @param {?=} rawSelector\n     * @param {?=} paths\n     * @return {?}\n     */\n    function createSelectorFn(config, name, rawSelector, paths) {\n        if (paths === void 0) { paths = []; }\n        rawSelector = rawSelector || removeDollarAtTheEnd(name);\n        if (typeof rawSelector !== 'string') {\n            return rawSelector;\n        }\n        else {\n            /** @type {?} */\n            var propsArray = paths.length\n                ? __spread([rawSelector], paths) : rawSelector.split('.');\n            return core.ÉµivyEnabled\n                ? createSelectorFnIvy(propsArray, config)\n                : createSelectorFnViewEngine(propsArray);\n        }\n    }\n    /**\n     * \\@example If `foo$` => make it just `foo`\n     * @param {?} name\n     * @return {?}\n     */\n    function removeDollarAtTheEnd(name) {\n        /** @type {?} */\n        var lastCharIndex = name.length - 1;\n        /** @type {?} */\n        var dollarAtTheEnd = name.charCodeAt(lastCharIndex) === DOLLAR_CHAR_CODE;\n        return dollarAtTheEnd ? name.slice(0, lastCharIndex) : name;\n    }\n    /**\n     * @template T\n     * @param {?} selector\n     * @param {?} store\n     * @return {?}\n     */\n    function createSelectObservableIvy(selector, store) {\n        return ngDevMode && !store ? throwSelectFactoryNotConnectedError() : (/** @type {?} */ (store)).select(selector);\n    }\n    /**\n     * @template T\n     * @param {?} selector\n     * @return {?}\n     */\n    function createSelectObservableViewEngine(selector) {\n        return SelectFactory.store\n            ? SelectFactory.store.select(selector)\n            : throwSelectFactoryNotConnectedError();\n    }\n    /**\n     * @param {?} propsArray\n     * @param {?} config\n     * @return {?}\n     */\n    function createSelectorFnIvy(propsArray, config) {\n        return ngDevMode && !config\n            ? throwSelectFactoryNotConnectedError()\n            : propGetter(propsArray, (/** @type {?} */ (config)));\n    }\n    /**\n     * @param {?} propsArray\n     * @return {?}\n     */\n    function createSelectorFnViewEngine(propsArray) {\n        return propGetter(propsArray, (/** @type {?} */ (SelectFactory.config)));\n    }\n\n    /**\n     * @fileoverview added by tsickle\n     * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n     */\n    /**\n     * Decorator for selecting a slice of state from the store.\n     * @template T\n     * @param {?=} rawSelector\n     * @param {...?} paths\n     * @return {?}\n     */\n    function Select(rawSelector) {\n        var paths = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            paths[_i - 1] = arguments[_i];\n        }\n        return (/**\n         * @param {?} target\n         * @param {?} key\n         * @return {?}\n         */\n        function (target, key) {\n            var _a;\n            /** @type {?} */\n            var name = key.toString();\n            /** @type {?} */\n            var selectorId = \"__\" + name + \"__selector\";\n            /** @type {?} */\n            var selector = null;\n            /** @type {?} */\n            var injectorNotifier$ = null;\n            if (core.ÉµivyEnabled) {\n                injectorNotifier$ = internals.ensureInjectorNotifierIsCaptured(target);\n            }\n            Object.defineProperties(target, (_a = {},\n                _a[selectorId] = {\n                    writable: true,\n                    enumerable: false,\n                    configurable: true\n                },\n                _a[name] = {\n                    enumerable: true,\n                    configurable: true,\n                    get: /**\n                     * @return {?}\n                     */\n                    function () {\n                        var _this = this;\n                        if (this[selectorId]) {\n                            return this[selectorId];\n                        }\n                        // The `localInject` will be tree-shaken away in apps that\n                        // still use the View Engine.\n                        if (core.ÉµivyEnabled) {\n                            this[selectorId] = (/** @type {?} */ (injectorNotifier$)).pipe(operators.mergeMap((/**\n                             * @return {?}\n                             */\n                            function () {\n                                /** @type {?} */\n                                var store = internals.localInject(_this, Store);\n                                /** @type {?} */\n                                var config = internals.localInject(_this, NgxsConfig);\n                                selector = selector || createSelectorFn(config, name, rawSelector, paths);\n                                return createSelectObservable(selector, store);\n                            })));\n                        }\n                        else {\n                            selector = selector || createSelectorFn(null, name, rawSelector, paths);\n                            this[selectorId] = createSelectObservable(selector, null);\n                        }\n                        return this[selectorId];\n                    }\n                },\n                _a));\n            // Keep this `if` guard here so the below stuff will be tree-shaken away in apps that still use the View Engine.\n            if (core.ÉµivyEnabled) {\n                internals.ensureLocalInjectorCaptured(target);\n            }\n        });\n    }\n\n    /**\n     * @fileoverview added by tsickle\n     * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n     */\n    /**\n     * Decorator for setting selector options at a method or class level.\n     * @param {?} options\n     * @return {?}\n     */\n    function SelectorOptions(options) {\n        return (/** @type {?} */ (((/**\n         * @template T\n         * @param {?} target\n         * @param {?} methodName\n         * @param {?} descriptor\n         * @return {?}\n         */\n        function decorate(target, methodName, descriptor) {\n            if (methodName) {\n                // Method Decorator\n                /** @type {?} */\n                var originalFn = descriptor.value || ((/** @type {?} */ (descriptor))).originalFn;\n                if (originalFn) {\n                    selectorOptionsMetaAccessor.defineOptions(originalFn, options);\n                }\n            }\n            else {\n                // Class Decorator\n                selectorOptionsMetaAccessor.defineOptions(target, options);\n            }\n        }))));\n    }\n\n    /**\n     * @fileoverview added by tsickle\n     * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n     */\n    /**\n     * @record\n     */\n    function MetaDataModel$1() { }\n    if (false) {\n        /** @type {?} */\n        MetaDataModel$1.prototype.name;\n        /** @type {?} */\n        MetaDataModel$1.prototype.actions;\n        /** @type {?} */\n        MetaDataModel$1.prototype.defaults;\n        /** @type {?} */\n        MetaDataModel$1.prototype.path;\n        /** @type {?|undefined} */\n        MetaDataModel$1.prototype.children;\n    }\n    /**\n     * @record\n     */\n    function SelectorMetaDataModel$1() { }\n    if (false) {\n        /** @type {?} */\n        SelectorMetaDataModel$1.prototype.originalFn;\n        /** @type {?} */\n        SelectorMetaDataModel$1.prototype.containerClass;\n        /** @type {?} */\n        SelectorMetaDataModel$1.prototype.selectorName;\n        /** @type {?} */\n        SelectorMetaDataModel$1.prototype.getSelectorOptions;\n    }\n    /**\n     * @param {?} target\n     * @return {?}\n     */\n    function ensureStoreMetadata$1(target) {\n        return ensureStoreMetadata(target);\n    }\n    /**\n     * @param {?} target\n     * @return {?}\n     */\n    function getStoreMetadata$1(target) {\n        return getStoreMetadata(target);\n    }\n    /**\n     * @param {?} target\n     * @return {?}\n     */\n    function ensureSelectorMetadata$1(target) {\n        return ensureSelectorMetadata(target);\n    }\n    /**\n     * @param {?} target\n     * @return {?}\n     */\n    function getSelectorMetadata$1(target) {\n        return getSelectorMetadata(target);\n    }\n\n    /**\n     * @fileoverview added by tsickle\n     * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n     */\n    /**\n     * Decorator for memoizing a state selector.\n     * @template T\n     * @param {?=} selectors\n     * @return {?}\n     */\n    function Selector(selectors) {\n        return (/**\n         * @template U\n         * @param {?} target\n         * @param {?} key\n         * @param {?} descriptor\n         * @return {?}\n         */\n        function (target, key, descriptor) {\n            // Caretaker note: we have still left the `typeof` condition in order to avoid\n            // creating a breaking change for projects that still use the View Engine.\n            if (typeof ngDevMode === 'undefined' || ngDevMode) {\n                /** @type {?} */\n                var isNotMethod = !(descriptor && descriptor.value !== null);\n                if (isNotMethod) {\n                    throwSelectorDecoratorError();\n                }\n            }\n            /** @type {?} */\n            var originalFn = descriptor.value;\n            /** @type {?} */\n            var memoizedFn = createSelector(selectors, (/** @type {?} */ (originalFn)), {\n                containerClass: target,\n                selectorName: key.toString(),\n                getSelectorOptions: /**\n                 * @return {?}\n                 */\n                function () {\n                    return {};\n                }\n            });\n            /** @type {?} */\n            var newDescriptor = {\n                configurable: true,\n                get: /**\n                 * @return {?}\n                 */\n                function () {\n                    return memoizedFn;\n                }\n            };\n            // Add hidden property to descriptor\n            ((/** @type {?} */ (newDescriptor)))['originalFn'] = originalFn;\n            return newDescriptor;\n        });\n    }\n\n    /**\n     * @fileoverview added by tsickle\n     * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n     */\n    /**\n     * @template T\n     */\n    var   /**\n     * @template T\n     */\n    StateToken = /** @class */ (function () {\n        function StateToken(name) {\n            var _this = this;\n            this.name = name;\n            /** @type {?} */\n            var selectorMetadata = ensureSelectorMetadata((/** @type {?} */ (this)));\n            selectorMetadata.makeRootSelector = (/**\n             * @param {?} runtimeContext\n             * @return {?}\n             */\n            function (runtimeContext) {\n                return runtimeContext.getStateGetter(_this.name);\n            });\n        }\n        /**\n         * @return {?}\n         */\n        StateToken.prototype.getName = /**\n         * @return {?}\n         */\n        function () {\n            return this.name;\n        };\n        /**\n         * @return {?}\n         */\n        StateToken.prototype.toString = /**\n         * @return {?}\n         */\n        function () {\n            return \"StateToken[\" + this.name + \"]\";\n        };\n        return StateToken;\n    }());\n    if (false) {\n        /**\n         * @type {?}\n         * @private\n         */\n        StateToken.prototype.name;\n    }\n\n    exports.Action = Action;\n    exports.Actions = Actions;\n    exports.InitState = InitState;\n    exports.NGXS_PLUGINS = NGXS_PLUGINS;\n    exports.NgxsModule = NgxsModule;\n    exports.NgxsSimpleChange = NgxsSimpleChange;\n    exports.NoopNgxsExecutionStrategy = NoopNgxsExecutionStrategy;\n    exports.Select = Select;\n    exports.Selector = Selector;\n    exports.SelectorOptions = SelectorOptions;\n    exports.State = State;\n    exports.StateStream = StateStream;\n    exports.StateToken = StateToken;\n    exports.Store = Store;\n    exports.UpdateState = UpdateState;\n    exports.actionMatcher = actionMatcher;\n    exports.createSelector = createSelector;\n    exports.ensureSelectorMetadata = ensureSelectorMetadata$1;\n    exports.ensureStoreMetadata = ensureStoreMetadata$1;\n    exports.getActionTypeFromInstance = getActionTypeFromInstance;\n    exports.getSelectorMetadata = getSelectorMetadata$1;\n    exports.getStoreMetadata = getStoreMetadata$1;\n    exports.getValue = getValue;\n    exports.ofAction = ofAction;\n    exports.ofActionCanceled = ofActionCanceled;\n    exports.ofActionCompleted = ofActionCompleted;\n    exports.ofActionDispatched = ofActionDispatched;\n    exports.ofActionErrored = ofActionErrored;\n    exports.ofActionSuccessful = ofActionSuccessful;\n    exports.setValue = setValue;\n    exports.Éµa = OrderedSubject;\n    exports.Éµb = InternalActions;\n    exports.Éµc = ROOT_STATE_TOKEN;\n    exports.Éµd = FEATURE_STATE_TOKEN;\n    exports.Éµe = SELECTOR_META_KEY;\n    exports.Éµf = NgxsConfig;\n    exports.Éµg = mergeDeep;\n    exports.Éµh = USER_PROVIDED_NGXS_EXECUTION_STRATEGY;\n    exports.Éµi = NGXS_EXECUTION_STRATEGY;\n    exports.Éµj = NgxsRootModule;\n    exports.Éµk = StateFactory;\n    exports.Éµl = InternalDispatchedActionResults;\n    exports.Éµm = InternalDispatcher;\n    exports.Éµn = StateContextFactory;\n    exports.Éµo = InternalStateOperations;\n    exports.Éµp = PluginManager;\n    exports.Éµq = InternalNgxsExecutionStrategy;\n    exports.Éµs = ensureStoreMetadata;\n    exports.Éµt = getStoreMetadata;\n    exports.Éµu = ensureSelectorMetadata;\n    exports.Éµv = getSelectorMetadata;\n    exports.Éµw = LifecycleStateManager;\n    exports.Éµx = NgxsFeatureModule;\n\n    Object.defineProperty(exports, '__esModule', { value: true });\n\n}));\n"]},"metadata":{},"sourceType":"script"}